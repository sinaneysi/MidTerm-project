
2023-11-12 21:05:06,019 p=37462 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.203.205",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.99.221",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.17",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.107.183",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.236",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.114",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-12 21:05:36,995 p=37628 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:05:37,014 p=37628 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:05:49,650 p=37628 u=sina n=ansible | ok: [postgres]
2023-11-12 21:05:49,671 p=37628 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:05:49,691 p=37628 u=sina n=ansible | fatal: [postgres]: FAILED! => {"msg": "'root_dir' is undefined. 'root_dir' is undefined"}
2023-11-12 21:05:49,693 p=37628 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-12 21:05:49,694 p=37628 u=sina n=ansible | postgres                   : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-12 21:07:33,803 p=37747 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:07:33,820 p=37747 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:07:40,135 p=37747 u=sina n=ansible | ok: [postgres]
2023-11-12 21:07:40,158 p=37747 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:07:42,060 p=37747 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-12 21:08:11,019 p=37825 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:08:11,040 p=37825 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:08:16,053 p=37825 u=sina n=ansible | ok: [postgres]
2023-11-12 21:08:16,076 p=37825 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-12 21:08:41,404 p=37825 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-12 21:09:00,764 p=37825 u=sina n=ansible | changed: [postgres] => (item=gnupg-agent)
2023-11-12 21:09:11,399 p=37825 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-12 21:09:11,409 p=37825 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-12 21:09:23,105 p=37825 u=sina n=ansible | changed: [postgres] => (item=docker)
2023-11-12 21:09:38,030 p=37825 u=sina n=ansible | changed: [postgres] => (item=docker-compose)
2023-11-12 21:09:38,045 p=37825 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-12 21:09:42,121 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:09:42,130 p=37825 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-12 21:10:02,544 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:10:02,552 p=37825 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-12 21:11:26,687 p=37825 u=sina n=ansible | changed: [postgres] => (item=docker-ce)
2023-11-12 21:11:33,650 p=37825 u=sina n=ansible | ok: [postgres] => (item=docker-ce-cli)
2023-11-12 21:11:44,304 p=37825 u=sina n=ansible | ok: [postgres] => (item=containerd.io)
2023-11-12 21:11:44,319 p=37825 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-12 21:11:47,981 p=37825 u=sina n=ansible | ok: [postgres]
2023-11-12 21:11:47,995 p=37825 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-12 21:11:54,568 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:11:54,579 p=37825 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-12 21:11:59,472 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:11:59,489 p=37825 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:12:01,392 p=37825 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-12 21:12:03,540 p=37825 u=sina n=ansible | changed: [postgres] => (item=/opt/services/postgre)
2023-11-12 21:12:03,550 p=37825 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-12 21:12:07,841 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:12:07,850 p=37825 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-12 21:12:11,384 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:12:11,392 p=37825 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:12:15,431 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:12:15,439 p=37825 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:12:19,520 p=37825 u=sina n=ansible | changed: [postgres]
2023-11-12 21:12:19,529 p=37825 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-12 21:12:22,021 p=37825 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-12 21:15:00,015 p=38348 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:15:00,038 p=38348 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:15:06,049 p=38348 u=sina n=ansible | ok: [postgres]
2023-11-12 21:15:06,073 p=38348 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-12 21:15:08,076 p=38348 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-12 21:15:08,087 p=38348 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-12 21:15:09,936 p=38348 u=sina n=ansible | changed: [postgres] => (item=traefik)
2023-11-12 21:15:09,947 p=38348 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-12 21:15:14,416 p=38348 u=sina n=ansible | changed: [postgres]
2023-11-12 21:15:14,427 p=38348 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-12 21:15:16,472 p=38348 u=sina n=ansible | changed: [postgres] => (item=traefik/traefik)
2023-11-12 21:15:16,482 p=38348 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-12 21:15:19,740 p=38348 u=sina n=ansible | changed: [postgres]
2023-11-12 21:15:19,749 p=38348 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-12 21:15:23,119 p=38348 u=sina n=ansible | changed: [postgres]
2023-11-12 21:15:23,128 p=38348 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-12 21:15:25,996 p=38348 u=sina n=ansible | changed: [postgres] => (item=app_net)
2023-11-12 21:15:28,534 p=38348 u=sina n=ansible | changed: [postgres] => (item=web_net)
2023-11-12 21:15:28,544 p=38348 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-12 21:16:22,223 p=38348 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "v2.10.4: Pulling from library/traefik\n", "msg": "Error starting project Head \"https://registry-1.docker.io/v2/library/traefik/manifests/v2.10.4\": Get \"https://auth.docker.io/token?scope=repository%3Alibrary%2Ftraefik%3Apull&service=registry.docker.io\": net/http: TLS handshake timeout"}
2023-11-12 21:16:22,225 p=38348 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-12 21:16:22,226 p=38348 u=sina n=ansible | postgres                   : ok=8    changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-12 21:16:30,576 p=38519 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:16:30,599 p=38519 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:16:35,558 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:16:35,584 p=38519 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-12 21:16:37,573 p=38519 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-12 21:16:37,583 p=38519 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-12 21:16:39,313 p=38519 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-12 21:16:39,325 p=38519 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-12 21:16:42,801 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:16:42,812 p=38519 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-12 21:16:44,533 p=38519 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-12 21:16:44,543 p=38519 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-12 21:16:48,324 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:16:48,334 p=38519 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-12 21:16:51,704 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:16:51,714 p=38519 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-12 21:16:54,483 p=38519 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:16:57,029 p=38519 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:16:57,041 p=38519 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-12 21:18:09,951 p=38519 u=sina n=ansible | changed: [postgres]
2023-11-12 21:18:09,970 p=38519 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:18:11,718 p=38519 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-12 21:18:13,310 p=38519 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-12 21:18:13,321 p=38519 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-12 21:18:16,491 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:18:16,501 p=38519 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-12 21:18:19,793 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:18:19,802 p=38519 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:18:23,148 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:18:23,158 p=38519 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:18:26,531 p=38519 u=sina n=ansible | ok: [postgres]
2023-11-12 21:18:26,540 p=38519 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-12 21:18:30,021 p=38519 u=sina n=ansible | changed: [postgres]
2023-11-12 21:18:30,030 p=38519 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-12 21:18:36,281 p=38519 u=sina n=ansible | changed: [postgres]
2023-11-12 21:18:36,293 p=38519 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-12 21:18:38,721 p=38519 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:18:41,175 p=38519 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:18:41,185 p=38519 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-12 21:21:49,595 p=38519 u=sina n=ansible | changed: [postgres]
2023-11-12 21:21:49,637 p=38519 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-12 21:21:49,638 p=38519 u=sina n=ansible | postgres                   : ok=18   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-12 21:25:01,656 p=39348 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:25:01,679 p=39348 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:25:05,019 p=39348 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-12 21:25:07,487 p=39374 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:25:07,510 p=39374 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:25:13,497 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:13,535 p=39374 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-12 21:25:16,178 p=39374 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-12 21:25:16,190 p=39374 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-12 21:25:18,079 p=39374 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-12 21:25:18,100 p=39374 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-12 21:25:22,274 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:22,288 p=39374 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-12 21:25:24,199 p=39374 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-12 21:25:24,212 p=39374 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-12 21:25:28,239 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:28,250 p=39374 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-12 21:25:31,968 p=39374 u=sina n=ansible | changed: [postgres]
2023-11-12 21:25:31,980 p=39374 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-12 21:25:34,799 p=39374 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:25:37,450 p=39374 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:25:37,470 p=39374 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-12 21:25:42,063 p=39374 u=sina n=ansible | changed: [postgres]
2023-11-12 21:25:42,087 p=39374 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:25:43,902 p=39374 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-12 21:25:45,745 p=39374 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-12 21:25:45,759 p=39374 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-12 21:25:49,537 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:49,548 p=39374 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-12 21:25:53,121 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:53,133 p=39374 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:25:56,599 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:25:56,611 p=39374 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:26:00,179 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:26:00,191 p=39374 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-12 21:26:03,679 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:26:03,700 p=39374 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-12 21:26:09,233 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:26:09,246 p=39374 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-12 21:26:11,967 p=39374 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:26:14,516 p=39374 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:26:14,530 p=39374 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-12 21:26:17,000 p=39374 u=sina n=ansible | ok: [postgres]
2023-11-12 21:26:17,052 p=39374 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-12 21:26:17,053 p=39374 u=sina n=ansible | postgres                   : ok=18   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-12 21:31:33,807 p=39881 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-12 21:31:33,831 p=39881 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-12 21:31:41,051 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:31:41,083 p=39881 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-12 21:31:43,027 p=39881 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-12 21:31:43,043 p=39881 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-12 21:31:44,892 p=39881 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-12 21:31:44,906 p=39881 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-12 21:31:50,996 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:31:51,011 p=39881 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-12 21:31:52,707 p=39881 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-12 21:31:52,720 p=39881 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-12 21:31:56,176 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:31:56,187 p=39881 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-12 21:31:59,419 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:31:59,432 p=39881 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-12 21:32:06,119 p=39881 u=sina n=ansible | changed: [postgres]
2023-11-12 21:32:06,130 p=39881 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-12 21:32:09,044 p=39881 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:32:11,656 p=39881 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:32:11,671 p=39881 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-12 21:32:14,049 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:14,071 p=39881 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-12 21:32:16,294 p=39881 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-12 21:32:17,917 p=39881 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-12 21:32:17,930 p=39881 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-12 21:32:21,154 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:21,167 p=39881 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-12 21:32:24,587 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:24,600 p=39881 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:32:29,205 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:29,218 p=39881 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-12 21:32:32,688 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:32,700 p=39881 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-12 21:32:35,994 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:36,007 p=39881 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-12 21:32:41,292 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:41,305 p=39881 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-12 21:32:43,908 p=39881 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-12 21:32:46,565 p=39881 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-12 21:32:46,579 p=39881 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-12 21:32:49,202 p=39881 u=sina n=ansible | ok: [postgres]
2023-11-12 21:32:49,259 p=39881 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-12 21:32:49,259 p=39881 u=sina n=ansible | postgres                   : ok=19   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 05:12:19,799 p=48674 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 05:12:19,858 p=48674 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 05:12:30,691 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:12:30,716 p=48674 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-13 05:12:51,117 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:12:51,126 p=48674 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-13 05:13:47,367 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:13:47,377 p=48674 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-13 05:13:53,821 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:13:53,833 p=48674 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-13 05:13:57,093 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:13:57,103 p=48674 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-13 05:14:00,166 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:00,176 p=48674 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-13 05:14:03,134 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:03,143 p=48674 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-13 05:14:04,780 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.d)
2023-11-13 05:14:06,309 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.daily)
2023-11-13 05:14:07,785 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.hourly)
2023-11-13 05:14:09,281 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.weekly)
2023-11-13 05:14:11,167 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.monthly)
2023-11-13 05:14:12,646 p=48674 u=sina n=ansible | changed: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-13 05:14:14,091 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/crontab)
2023-11-13 05:14:14,103 p=48674 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-13 05:14:15,579 p=48674 u=sina n=ansible | changed: [postgres] => (item=/usr/bin/as)
2023-11-13 05:14:17,061 p=48674 u=sina n=ansible | changed: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-13 05:14:17,074 p=48674 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-13 05:14:20,033 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:20,043 p=48674 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-13 05:14:21,660 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:21,671 p=48674 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-13 05:14:23,617 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:23,626 p=48674 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-13 05:14:26,585 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:26,594 p=48674 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-13 05:14:29,658 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:29,669 p=48674 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-13 05:14:32,778 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:32,793 p=48674 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-13 05:14:34,726 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:34,740 p=48674 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-13 05:14:37,675 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:37,685 p=48674 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-13 05:14:39,154 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:39,163 p=48674 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-13 05:14:42,039 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:14:42,050 p=48674 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-13 05:14:46,369 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:46,379 p=48674 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-13 05:14:49,114 p=48674 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-13 05:14:49,114 p=48674 u=sina n=ansible | ...ignoring
2023-11-13 05:14:49,125 p=48674 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-13 05:14:52,185 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:52,195 p=48674 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-13 05:14:54,034 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:54,044 p=48674 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-13 05:14:55,973 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:14:55,982 p=48674 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-13 05:14:58,944 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:14:58,953 p=48674 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-13 05:15:02,019 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:02,031 p=48674 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-13 05:15:05,087 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:05,102 p=48674 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-13 05:15:05,127 p=48674 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-13 05:15:06,929 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:06,941 p=48674 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-13 05:15:10,107 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:10,117 p=48674 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-13 05:15:13,119 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:13,129 p=48674 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-13 05:15:16,147 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:16,156 p=48674 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-13 05:15:17,672 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:17,682 p=48674 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-13 05:15:19,104 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:19,114 p=48674 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-13 05:15:20,549 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:20,558 p=48674 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-13 05:15:22,096 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:22,105 p=48674 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-13 05:15:23,524 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:23,533 p=48674 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-13 05:15:25,056 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:25,066 p=48674 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-13 05:15:26,490 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:26,500 p=48674 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-13 05:15:27,924 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:27,934 p=48674 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-13 05:15:29,363 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:29,373 p=48674 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-13 05:15:30,896 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:30,905 p=48674 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-13 05:15:33,843 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:33,852 p=48674 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-13 05:15:35,604 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:35,614 p=48674 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-13 05:15:37,064 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:37,074 p=48674 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-13 05:15:40,571 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:40,581 p=48674 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-13 05:15:43,905 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:43,915 p=48674 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-13 05:15:48,944 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:48,957 p=48674 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-13 05:15:51,038 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:51,048 p=48674 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-13 05:15:53,729 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:53,739 p=48674 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-13 05:15:55,568 p=48674 u=sina n=ansible | ok: [postgres]
2023-11-13 05:15:55,578 p=48674 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-13 05:15:57,437 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:57,447 p=48674 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-13 05:15:59,052 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:15:59,061 p=48674 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-13 05:16:01,034 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:16:01,044 p=48674 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-13 05:16:03,256 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-13 05:16:05,073 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-13 05:16:06,737 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-13 05:16:08,379 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-13 05:16:09,911 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-13 05:16:11,336 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-13 05:16:12,778 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-13 05:16:14,388 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-13 05:16:16,107 p=48674 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-13 05:16:16,121 p=48674 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-13 05:16:17,951 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:16:17,963 p=48674 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-13 05:16:21,727 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:16:21,742 p=48674 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-13 05:16:25,790 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:16:25,800 p=48674 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-13 05:16:27,419 p=48674 u=sina n=ansible | changed: [postgres]
2023-11-13 05:16:27,437 p=48674 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-13 05:16:34,706 p=48674 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-13 05:16:45,754 p=48674 u=sina n=ansible | changed: [postgres] => (item=gnupg-agent)
2023-11-13 05:16:52,813 p=48674 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-13 05:16:52,824 p=48674 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-13 05:17:00,307 p=48674 u=sina n=ansible | changed: [postgres] => (item=docker)
2023-11-13 05:17:10,223 p=48674 u=sina n=ansible | changed: [postgres] => (item=docker-compose)
2023-11-13 05:17:10,236 p=48674 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-13 05:17:12,681 p=48674 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Failed to download key at https://download.docker.com/linux/ubuntu/gpg: HTTP Error 403: Forbidden"}
2023-11-13 05:17:12,682 p=48674 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 05:17:12,682 p=48674 u=sina n=ansible | postgres                   : ok=60   changed=48   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-13 05:18:13,856 p=49620 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 05:18:13,910 p=49620 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 05:18:18,147 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:18,172 p=49620 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-13 05:18:20,698 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:20,708 p=49620 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-13 05:18:28,651 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:28,660 p=49620 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-13 05:18:32,153 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:32,166 p=49620 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-13 05:18:35,530 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:35,539 p=49620 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-13 05:18:38,543 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:38,552 p=49620 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-13 05:18:41,470 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:41,482 p=49620 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-13 05:18:42,990 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.d)
2023-11-13 05:18:44,502 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.daily)
2023-11-13 05:18:46,095 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.hourly)
2023-11-13 05:18:48,091 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.weekly)
2023-11-13 05:18:49,670 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.monthly)
2023-11-13 05:18:51,201 p=49620 u=sina n=ansible | ok: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-13 05:18:52,678 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/crontab)
2023-11-13 05:18:52,689 p=49620 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-13 05:18:54,276 p=49620 u=sina n=ansible | ok: [postgres] => (item=/usr/bin/as)
2023-11-13 05:18:55,805 p=49620 u=sina n=ansible | ok: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-13 05:18:55,816 p=49620 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-13 05:18:58,980 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:18:58,991 p=49620 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-13 05:19:00,640 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:00,649 p=49620 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-13 05:19:02,169 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:02,179 p=49620 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-13 05:19:05,126 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:05,135 p=49620 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-13 05:19:08,093 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:08,101 p=49620 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-13 05:19:11,066 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:11,076 p=49620 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-13 05:19:12,805 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:19:12,815 p=49620 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-13 05:19:15,774 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:15,785 p=49620 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-13 05:19:17,311 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:17,321 p=49620 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-13 05:19:20,211 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:20,222 p=49620 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-13 05:19:23,343 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:23,353 p=49620 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-13 05:19:26,218 p=49620 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-13 05:19:26,219 p=49620 u=sina n=ansible | ...ignoring
2023-11-13 05:19:26,228 p=49620 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-13 05:19:29,190 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:29,200 p=49620 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-13 05:19:31,028 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:31,039 p=49620 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-13 05:19:33,082 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:33,094 p=49620 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-13 05:19:36,050 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:36,060 p=49620 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-13 05:19:38,917 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:38,927 p=49620 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-13 05:19:41,886 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:41,898 p=49620 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-13 05:19:41,922 p=49620 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-13 05:19:43,646 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:19:43,656 p=49620 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-13 05:19:47,114 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:47,126 p=49620 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-13 05:19:50,091 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:50,111 p=49620 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-13 05:19:53,048 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:53,058 p=49620 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-13 05:19:55,301 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:55,315 p=49620 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-13 05:19:56,837 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:56,851 p=49620 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-13 05:19:58,731 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:19:58,742 p=49620 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-13 05:20:00,758 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:00,769 p=49620 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-13 05:20:02,741 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:02,750 p=49620 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-13 05:20:04,332 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:04,350 p=49620 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-13 05:20:05,874 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:05,884 p=49620 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-13 05:20:07,384 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:07,394 p=49620 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-13 05:20:08,856 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:08,869 p=49620 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-13 05:20:10,350 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:10,359 p=49620 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-13 05:20:13,365 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:13,374 p=49620 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-13 05:20:15,115 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:15,124 p=49620 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-13 05:20:16,695 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:16,705 p=49620 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-13 05:20:19,684 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:19,697 p=49620 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-13 05:20:22,648 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:22,657 p=49620 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-13 05:20:25,555 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:25,566 p=49620 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-13 05:20:27,151 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:27,161 p=49620 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-13 05:20:28,700 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:28,717 p=49620 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-13 05:20:30,221 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:30,232 p=49620 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-13 05:20:31,729 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:31,739 p=49620 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-13 05:20:33,701 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:33,711 p=49620 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-13 05:20:35,360 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:35,375 p=49620 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-13 05:20:36,999 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-13 05:20:38,517 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-13 05:20:40,051 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-13 05:20:41,590 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-13 05:20:43,060 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-13 05:20:44,532 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-13 05:20:45,994 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-13 05:20:48,045 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-13 05:20:49,578 p=49620 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-13 05:20:49,592 p=49620 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-13 05:20:51,218 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:51,228 p=49620 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-13 05:20:56,133 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:20:56,142 p=49620 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-13 05:20:59,721 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:20:59,734 p=49620 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-13 05:21:01,294 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:21:01,346 p=49620 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-13 05:21:09,143 p=49620 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-13 05:21:16,513 p=49620 u=sina n=ansible | ok: [postgres] => (item=gnupg-agent)
2023-11-13 05:21:24,204 p=49620 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-13 05:21:24,215 p=49620 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-13 05:21:27,717 p=49620 u=sina n=ansible | ok: [postgres] => (item=docker)
2023-11-13 05:21:30,183 p=49620 u=sina n=ansible | ok: [postgres] => (item=docker-compose)
2023-11-13 05:21:30,195 p=49620 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-13 05:21:33,400 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:21:33,410 p=49620 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-13 05:21:51,735 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:21:51,747 p=49620 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-13 05:26:51,895 p=49620 u=sina n=ansible | changed: [postgres] => (item=docker-ce)
2023-11-13 05:26:59,863 p=49620 u=sina n=ansible | ok: [postgres] => (item=docker-ce-cli)
2023-11-13 05:27:07,230 p=49620 u=sina n=ansible | ok: [postgres] => (item=containerd.io)
2023-11-13 05:27:07,241 p=49620 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-13 05:27:10,002 p=49620 u=sina n=ansible | ok: [postgres]
2023-11-13 05:27:10,010 p=49620 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-13 05:27:13,272 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:13,283 p=49620 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-13 05:27:22,599 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:22,621 p=49620 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-13 05:27:24,136 p=49620 u=sina n=ansible | changed: [postgres] => (item=services)
2023-11-13 05:27:24,146 p=49620 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-13 05:27:25,686 p=49620 u=sina n=ansible | changed: [postgres] => (item=traefik)
2023-11-13 05:27:25,697 p=49620 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-13 05:27:28,722 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:28,731 p=49620 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-13 05:27:30,274 p=49620 u=sina n=ansible | changed: [postgres] => (item=traefik/traefik)
2023-11-13 05:27:30,285 p=49620 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-13 05:27:33,446 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:33,456 p=49620 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-13 05:27:36,733 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:36,743 p=49620 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-13 05:27:42,772 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:27:42,781 p=49620 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-13 05:27:45,367 p=49620 u=sina n=ansible | changed: [postgres] => (item=app_net)
2023-11-13 05:27:47,680 p=49620 u=sina n=ansible | changed: [postgres] => (item=web_net)
2023-11-13 05:27:47,693 p=49620 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-13 05:31:32,047 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:32,064 p=49620 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 05:31:33,685 p=49620 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 05:31:35,216 p=49620 u=sina n=ansible | changed: [postgres] => (item=/opt/services/postgre)
2023-11-13 05:31:35,226 p=49620 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 05:31:38,391 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:38,399 p=49620 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 05:31:41,467 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:41,476 p=49620 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:31:44,535 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:44,545 p=49620 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:31:47,503 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:47,513 p=49620 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 05:31:50,576 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:50,585 p=49620 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 05:31:56,620 p=49620 u=sina n=ansible | changed: [postgres]
2023-11-13 05:31:56,629 p=49620 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 05:32:09,571 p=49620 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 05:32:11,703 p=49620 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 05:32:11,714 p=49620 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-13 05:44:18,342 p=49620 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": ["ERROR: for postgre_haproxy_1  Cannot start service haproxy: driver failed programming external connectivity on endpoint postgre_haproxy_1 (7a5004548c60a888ec6c3066612af2c74be3c63dcdd9da9d76372f623c220bf8): Error starting userland proxy: listen tcp4 192.168.1.212:5432: bind: cannot assign requested address"], "module_stderr": "Image for service haproxy was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.\nCreating postgre_haproxy_1 ... \nCreating postgre_pg-0_1    ... \nCreating postgre_pg-2_1    ... \nCreating postgre_pg-1_1    ... \nHost is already in use by another container\nCreating postgre_haproxy_1 ... error\n\nERROR: for postgre_haproxy_1  Cannot start service haproxy: driver failed programming external connectivity on endpoint postgre_haproxy_1 (7a5004548c60a888ec6c3066612af2c74be3c63dcdd9da9d76372f623c220bf8): Error starting userland proxy: listen tcp4 192.168.1.212:5432: bind: cannot assign requested address\nCreating postgre_pg-0_1    ... done\nCreating postgre_pg-2_1    ... done\nCreating postgre_pg-1_1    ... done\n", "module_stdout": "15: Pulling from bitnami/postgresql-repmgr\nDigest: sha256:b8e22d8f40cf45237e043a53f806b73d3465d02cc660f2961345f38e263a68e5\nStatus: Downloaded newer image for bitnami/postgresql-repmgr:15\nStep 1/5 : FROM haproxy:latest\nlatest: Pulling from library/haproxy\nDigest: sha256:fdd14bba61bed25638503b51a9d59ee31082d71a461ec28eddb29ad522156c67\nStatus: Downloaded newer image for haproxy:latest\n ---> 77b6e95477bb\nStep 2/5 : USER root\n ---> Running in 3ff5194e78aa\nRemoving intermediate container 3ff5194e78aa\n ---> 6bd2017ca330\nStep 3/5 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Running in 66e184c625bb\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8062 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [258 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [17.4 kB]\nFetched 8546 kB in 34s (252 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libldap-2.4-2 libldap-common libpq5 libreadline8 libsasl2-2 libsasl2-modules\n  libsasl2-modules-db netbase postgresql-client-13 postgresql-client-common\n  readline-common sensible-utils\nSuggested packages:\n  libsasl2-modules-gssapi-mit | libsasl2-modules-gssapi-heimdal\n  libsasl2-modules-ldap libsasl2-modules-otp libsasl2-modules-sql\n  postgresql-13 postgresql-doc-13 readline-doc\nThe following NEW packages will be installed:\n  libldap-2.4-2 libldap-common libpq5 libreadline8 libsasl2-2 libsasl2-modules\n  libsasl2-modules-db netbase postgresql-client postgresql-client-13\n  postgresql-client-common readline-common sensible-utils\n0 upgraded, 13 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2730 kB of archives.\nAfter this operation, 9604 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 readline-common all 8.1-1 [73.7 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libreadline8 amd64 8.1-1 [169 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 netbase all 6.3 [19.9 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 sensible-utils all 0.0.14 [14.8 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-2.1+deb11u1 [69.1 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libsasl2-2 amd64 2.1.27+dfsg-2.1+deb11u1 [106 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 libldap-2.4-2 amd64 2.4.57+dfsg-3+deb11u1 [232 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libldap-common all 2.4.57+dfsg-3+deb11u1 [95.8 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 libpq5 amd64 13.11-0+deb11u1 [180 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules amd64 2.1.27+dfsg-2.1+deb11u1 [104 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-common all 225 [89.3 kB]\nGet:12 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-13 amd64 13.11-0+deb11u1 [1512 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 postgresql-client all 13+225 [64.8 kB]\ndebconf: delaying package configuration, since apt-utils is not installed\nFetched 2730 kB in 12s (226 kB/s)\nSelecting previously unselected package readline-common.\n(Reading database ... \n(Reading database ... 5%\n(Reading database ... 10%\n(Reading database ... 15%\n(Reading database ... 20%\n(Reading database ... 25%\n(Reading database ... 30%\n(Reading database ... 35%\n(Reading database ... 40%\n(Reading database ... 45%\n(Reading database ... 50%\n(Reading database ... 55%\n(Reading database ... 60%\n(Reading database ... 65%\n(Reading database ... 70%\n(Reading database ... 75%\n(Reading database ... 80%\n(Reading database ... 85%\n(Reading database ... 90%\n(Reading database ... 95%\n(Reading database ... 100%\n(Reading database ... 6671 files and directories currently installed.)\nPreparing to unpack .../00-readline-common_8.1-1_all.deb ...\nUnpacking readline-common (8.1-1) ...\nSelecting previously unselected package libreadline8:amd64.\nPreparing to unpack .../01-libreadline8_8.1-1_amd64.deb ...\nUnpacking libreadline8:amd64 (8.1-1) ...\nSelecting previously unselected package netbase.\nPreparing to unpack .../02-netbase_6.3_all.deb ...\nUnpacking netbase (6.3) ...\nSelecting previously unselected package sensible-utils.\nPreparing to unpack .../03-sensible-utils_0.0.14_all.deb ...\nUnpacking sensible-utils (0.0.14) ...\nSelecting previously unselected package libsasl2-modules-db:amd64.\nPreparing to unpack .../04-libsasl2-modules-db_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package libsasl2-2:amd64.\nPreparing to unpack .../05-libsasl2-2_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package libldap-2.4-2:amd64.\nPreparing to unpack .../06-libldap-2.4-2_2.4.57+dfsg-3+deb11u1_amd64.deb ...\nUnpacking libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\nSelecting previously unselected package libldap-common.\nPreparing to unpack .../07-libldap-common_2.4.57+dfsg-3+deb11u1_all.deb ...\nUnpacking libldap-common (2.4.57+dfsg-3+deb11u1) ...\nSelecting previously unselected package libpq5:amd64.\nPreparing to unpack .../08-libpq5_13.11-0+deb11u1_amd64.deb ...\nUnpacking libpq5:amd64 (13.11-0+deb11u1) ...\nSelecting previously unselected package libsasl2-modules:amd64.\nPreparing to unpack .../09-libsasl2-modules_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package postgresql-client-common.\nPreparing to unpack .../10-postgresql-client-common_225_all.deb ...\nUnpacking postgresql-client-common (225) ...\nSelecting previously unselected package postgresql-client-13.\nPreparing to unpack .../11-postgresql-client-13_13.11-0+deb11u1_amd64.deb ...\nUnpacking postgresql-client-13 (13.11-0+deb11u1) ...\nSelecting previously unselected package postgresql-client.\nPreparing to unpack .../12-postgresql-client_13+225_all.deb ...\nUnpacking postgresql-client (13+225) ...\nSetting up libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up libldap-common (2.4.57+dfsg-3+deb11u1) ...\nSetting up libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up sensible-utils (0.0.14) ...\nSetting up netbase (6.3) ...\nSetting up readline-common (8.1-1) ...\nSetting up postgresql-client-common (225) ...\nSetting up libreadline8:amd64 (8.1-1) ...\nSetting up libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\nSetting up libpq5:amd64 (13.11-0+deb11u1) ...\nSetting up postgresql-client-13 (13.11-0+deb11u1) ...\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\nSetting up postgresql-client (13+225) ...\nProcessing triggers for libc-bin (2.31-13+deb11u7) ...\nRemoving intermediate container 66e184c625bb\n ---> 0540658b6d36\nStep 4/5 : RUN touch /opt/primary-check.sh && touch /opt/standby-check.sh\n ---> Running in dde8d5acc8e5\nRemoving intermediate container dde8d5acc8e5\n ---> 71f34789a8a8\nStep 5/5 : RUN chmod 777 /opt/primary-check.sh  && chmod 777  /opt/standby-check.sh\n ---> Running in f4b581c02e79\nRemoving intermediate container f4b581c02e79\n ---> 1bca94cfeeaf\n\nSuccessfully built 1bca94cfeeaf\nSuccessfully tagged postgre_haproxy:latest\n", "msg": "Error starting project Encountered errors while bringing up the project."}
2023-11-13 05:44:18,343 p=49620 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 05:44:18,344 p=49620 u=sina n=ansible | postgres                   : ok=83   changed=25   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-13 05:46:35,432 p=51609 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 05:46:35,451 p=51609 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 05:46:42,668 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:46:42,699 p=51609 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 05:46:44,463 p=51609 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 05:46:45,993 p=51609 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-13 05:46:46,004 p=51609 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 05:46:49,169 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:46:49,180 p=51609 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 05:46:52,139 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:46:52,150 p=51609 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:46:55,108 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:46:55,120 p=51609 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:46:58,078 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:46:58,089 p=51609 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 05:47:01,303 p=51609 u=sina n=ansible | changed: [postgres]
2023-11-13 05:47:01,314 p=51609 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 05:47:06,578 p=51609 u=sina n=ansible | ok: [postgres]
2023-11-13 05:47:06,589 p=51609 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 05:47:09,040 p=51609 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 05:47:11,287 p=51609 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 05:47:11,300 p=51609 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-13 05:47:14,364 p=51609 u=sina n=ansible | changed: [postgres]
2023-11-13 05:47:14,415 p=51609 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 05:47:14,415 p=51609 u=sina n=ansible | postgres                   : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 05:50:30,890 p=52004 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 05:50:30,912 p=52004 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 05:50:35,104 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:50:35,130 p=52004 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-13 05:50:36,815 p=52004 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-13 05:50:36,829 p=52004 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-13 05:50:38,349 p=52004 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-13 05:50:38,360 p=52004 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-13 05:50:41,523 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:50:41,533 p=52004 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-13 05:50:43,060 p=52004 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-13 05:50:43,071 p=52004 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-13 05:50:46,029 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:50:46,038 p=52004 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-13 05:50:48,976 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:50:48,986 p=52004 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-13 05:50:56,369 p=52004 u=sina n=ansible | changed: [postgres]
2023-11-13 05:50:56,381 p=52004 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-13 05:50:58,833 p=52004 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 05:51:01,081 p=52004 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 05:51:01,093 p=52004 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-13 05:51:03,951 p=52004 u=sina n=ansible | changed: [postgres]
2023-11-13 05:51:03,974 p=52004 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 05:51:05,515 p=52004 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 05:51:07,019 p=52004 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-13 05:51:07,029 p=52004 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 05:51:09,889 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:51:09,899 p=52004 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 05:51:12,860 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:51:12,870 p=52004 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:51:15,748 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:51:15,757 p=52004 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 05:51:18,602 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:51:18,612 p=52004 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 05:51:21,496 p=52004 u=sina n=ansible | ok: [postgres]
2023-11-13 05:51:21,506 p=52004 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 05:51:27,914 p=52004 u=sina n=ansible | changed: [postgres]
2023-11-13 05:51:27,924 p=52004 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 05:51:30,172 p=52004 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 05:51:32,418 p=52004 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 05:51:32,431 p=52004 u=sina n=ansible | TASK [postgres : deploy traefik Compose stack] *********************************
2023-11-13 05:51:36,113 p=52004 u=sina n=ansible | changed: [postgres]
2023-11-13 05:51:36,154 p=52004 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 05:51:36,154 p=52004 u=sina n=ansible | postgres                   : ok=19   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 06:00:16,530 p=52758 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:00:16,547 p=52758 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:00:21,427 p=52758 u=sina n=ansible | ok: [postgres]
2023-11-13 06:00:21,460 p=52758 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-13 06:00:23,159 p=52758 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:00:24,712 p=52758 u=sina n=ansible | changed: [postgres] => (item=/opt/services/redis)
2023-11-13 06:00:24,724 p=52758 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-13 06:00:28,075 p=52758 u=sina n=ansible | changed: [postgres]
2023-11-13 06:00:28,085 p=52758 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-13 06:00:31,271 p=52758 u=sina n=ansible | changed: [postgres]
2023-11-13 06:00:31,281 p=52758 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-13 06:00:31,453 p=52758 u=sina n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'PROSUB' is undefined. 'PROSUB' is undefined
2023-11-13 06:00:31,453 p=52758 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'PROSUB' is undefined. 'PROSUB' is undefined"}
2023-11-13 06:00:31,455 p=52758 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:00:31,455 p=52758 u=sina n=ansible | postgres                   : ok=4    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:11:52,409 p=53397 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:11:52,426 p=53397 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:11:57,305 p=53397 u=sina n=ansible | ok: [postgres]
2023-11-13 06:11:57,343 p=53397 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-13 06:11:59,103 p=53397 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:12:00,637 p=53397 u=sina n=ansible | ok: [postgres] => (item=/opt/services/redis)
2023-11-13 06:12:00,652 p=53397 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-13 06:12:03,810 p=53397 u=sina n=ansible | ok: [postgres]
2023-11-13 06:12:03,820 p=53397 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-13 06:12:06,770 p=53397 u=sina n=ansible | ok: [postgres]
2023-11-13 06:12:06,781 p=53397 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-13 06:12:10,062 p=53397 u=sina n=ansible | changed: [postgres]
2023-11-13 06:12:10,072 p=53397 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-13 06:12:13,134 p=53397 u=sina n=ansible | changed: [postgres]
2023-11-13 06:12:13,143 p=53397 u=sina n=ansible | TASK [redis : Create a postgres.archidev.ir A record to point to host] *********
2023-11-13 06:12:19,173 p=53397 u=sina n=ansible | changed: [postgres]
2023-11-13 06:12:19,182 p=53397 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-13 06:12:21,632 p=53397 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:12:23,880 p=53397 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:12:23,895 p=53397 u=sina n=ansible | TASK [redis : deploy traefik Compose stack] ************************************
2023-11-13 06:12:25,967 p=53397 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Configuration error - The Compose file '/opt/services/redis/docker-compose.yaml' is invalid because:\nservices.haproxy.ports contains an invalid type, it should be an array"}
2023-11-13 06:12:25,969 p=53397 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:12:25,970 p=53397 u=sina n=ansible | postgres                   : ok=8    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:12:58,190 p=53562 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:12:58,206 p=53562 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:13:02,204 p=53562 u=sina n=ansible | ok: [postgres]
2023-11-13 06:13:02,231 p=53562 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-13 06:13:03,919 p=53562 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:13:05,455 p=53562 u=sina n=ansible | ok: [postgres] => (item=/opt/services/redis)
2023-11-13 06:13:05,469 p=53562 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-13 06:13:08,630 p=53562 u=sina n=ansible | ok: [postgres]
2023-11-13 06:13:08,641 p=53562 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-13 06:13:11,601 p=53562 u=sina n=ansible | ok: [postgres]
2023-11-13 06:13:11,611 p=53562 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-13 06:13:14,876 p=53562 u=sina n=ansible | changed: [postgres]
2023-11-13 06:13:14,887 p=53562 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-13 06:13:17,848 p=53562 u=sina n=ansible | ok: [postgres]
2023-11-13 06:13:17,858 p=53562 u=sina n=ansible | TASK [redis : Create a postgres.archidev.ir A record to point to host] *********
2023-11-13 06:13:23,070 p=53562 u=sina n=ansible | ok: [postgres]
2023-11-13 06:13:23,080 p=53562 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-13 06:13:25,532 p=53562 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:13:27,780 p=53562 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:13:27,795 p=53562 u=sina n=ansible | TASK [redis : deploy traefik Compose stack] ************************************
2023-11-13 06:21:07,877 p=53562 u=sina n=ansible | changed: [postgres]
2023-11-13 06:21:07,920 p=53562 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:21:07,921 p=53562 u=sina n=ansible | postgres                   : ok=9    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 06:28:10,008 p=54383 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:28:10,029 p=54383 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:28:19,123 p=54383 u=sina n=ansible | ok: [postgres]
2023-11-13 06:28:19,154 p=54383 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:28:20,822 p=54383 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:28:22,278 p=54383 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-13 06:28:22,290 p=54383 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:28:25,249 p=54383 u=sina n=ansible | ok: [postgres]
2023-11-13 06:28:25,260 p=54383 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:28:28,072 p=54383 u=sina n=ansible | ok: [postgres]
2023-11-13 06:28:28,082 p=54383 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:28:30,852 p=54383 u=sina n=ansible | ok: [postgres]
2023-11-13 06:28:30,863 p=54383 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:28:33,721 p=54383 u=sina n=ansible | ok: [postgres]
2023-11-13 06:28:33,732 p=54383 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:28:36,893 p=54383 u=sina n=ansible | changed: [postgres]
2023-11-13 06:28:36,905 p=54383 u=sina n=ansible | TASK [postgres : copy postgres .env] *******************************************
2023-11-13 06:28:37,037 p=54383 u=sina n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'PSOTSUB' is undefined. 'PSOTSUB' is undefined
2023-11-13 06:28:37,037 p=54383 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'PSOTSUB' is undefined. 'PSOTSUB' is undefined"}
2023-11-13 06:28:37,039 p=54383 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:28:37,040 p=54383 u=sina n=ansible | postgres                   : ok=7    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:29:17,969 p=54549 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:29:17,992 p=54549 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:29:22,110 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:22,162 p=54549 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:29:23,903 p=54549 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:29:25,338 p=54549 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-13 06:29:25,351 p=54549 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:29:28,402 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:28,412 p=54549 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:29:31,310 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:31,322 p=54549 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:29:34,132 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:34,144 p=54549 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:29:37,009 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:37,021 p=54549 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:29:39,873 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:39,885 p=54549 u=sina n=ansible | TASK [postgres : copy postgres .env] *******************************************
2023-11-13 06:29:43,557 p=54549 u=sina n=ansible | changed: [postgres]
2023-11-13 06:29:43,569 p=54549 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 06:29:48,650 p=54549 u=sina n=ansible | ok: [postgres]
2023-11-13 06:29:48,661 p=54549 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 06:29:51,347 p=54549 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:29:53,492 p=54549 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:29:53,506 p=54549 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 06:29:55,540 p=54549 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Configuration error - The Compose file '/opt/services/postgre/docker-compose.yaml' is invalid because:\nservices.haproxy.ports contains an invalid type, it should be an array"}
2023-11-13 06:29:55,542 p=54549 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:29:55,542 p=54549 u=sina n=ansible | postgres                   : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:30:33,737 p=54747 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:30:33,759 p=54747 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:30:37,659 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:37,691 p=54747 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:30:39,371 p=54747 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:30:40,831 p=54747 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgre)
2023-11-13 06:30:40,845 p=54747 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:30:44,386 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:44,397 p=54747 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:30:47,178 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:47,191 p=54747 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:30:50,501 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:50,512 p=54747 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:30:53,498 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:53,510 p=54747 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:30:56,631 p=54747 u=sina n=ansible | changed: [postgres]
2023-11-13 06:30:56,642 p=54747 u=sina n=ansible | TASK [postgres : copy postgres .env] *******************************************
2023-11-13 06:30:59,539 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:30:59,551 p=54747 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 06:31:04,664 p=54747 u=sina n=ansible | ok: [postgres]
2023-11-13 06:31:04,673 p=54747 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 06:31:07,073 p=54747 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:31:09,267 p=54747 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:31:09,284 p=54747 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 06:31:13,201 p=54747 u=sina n=ansible | changed: [postgres]
2023-11-13 06:31:13,251 p=54747 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:31:13,251 p=54747 u=sina n=ansible | postgres                   : ok=11   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 06:34:58,242 p=55105 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:34:58,259 p=55105 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:35:02,598 p=55105 u=sina n=ansible | ok: [postgres]
2023-11-13 06:35:02,624 p=55105 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-13 06:35:04,400 p=55105 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:35:05,929 p=55105 u=sina n=ansible | ok: [postgres] => (item=/opt/services/redis)
2023-11-13 06:35:05,941 p=55105 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-13 06:35:09,412 p=55105 u=sina n=ansible | changed: [postgres]
2023-11-13 06:35:09,422 p=55105 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-13 06:35:12,306 p=55105 u=sina n=ansible | ok: [postgres]
2023-11-13 06:35:12,317 p=55105 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-13 06:35:15,351 p=55105 u=sina n=ansible | changed: [postgres]
2023-11-13 06:35:15,361 p=55105 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-13 06:35:18,320 p=55105 u=sina n=ansible | ok: [postgres]
2023-11-13 06:35:18,330 p=55105 u=sina n=ansible | TASK [redis : Create a redis.archidev.ir A record to point to host] ************
2023-11-13 06:35:23,442 p=55105 u=sina n=ansible | ok: [postgres]
2023-11-13 06:35:23,453 p=55105 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-13 06:35:25,904 p=55105 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:35:28,458 p=55105 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:35:28,470 p=55105 u=sina n=ansible | TASK [redis : deploy redis Compose stack] **************************************
2023-11-13 06:35:34,526 p=55105 u=sina n=ansible | changed: [postgres]
2023-11-13 06:35:34,570 p=55105 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:35:34,571 p=55105 u=sina n=ansible | postgres                   : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 06:41:42,827 p=55619 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:41:42,844 p=55619 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:41:47,475 p=55619 u=sina n=ansible | ok: [postgres]
2023-11-13 06:41:47,501 p=55619 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-13 06:41:49,201 p=55619 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:41:50,710 p=55619 u=sina n=ansible | changed: [postgres] => (item=/opt/services/redis)
2023-11-13 06:41:50,723 p=55619 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-13 06:41:54,093 p=55619 u=sina n=ansible | changed: [postgres]
2023-11-13 06:41:54,119 p=55619 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-13 06:41:57,062 p=55619 u=sina n=ansible | changed: [postgres]
2023-11-13 06:41:57,072 p=55619 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-13 06:42:00,040 p=55619 u=sina n=ansible | changed: [postgres]
2023-11-13 06:42:00,049 p=55619 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-13 06:42:02,898 p=55619 u=sina n=ansible | changed: [postgres]
2023-11-13 06:42:02,908 p=55619 u=sina n=ansible | TASK [redis : Create a redis.archidev.ir A record to point to host] ************
2023-11-13 06:42:07,915 p=55619 u=sina n=ansible | ok: [postgres]
2023-11-13 06:42:07,928 p=55619 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-13 06:42:10,379 p=55619 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:42:12,523 p=55619 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:42:12,537 p=55619 u=sina n=ansible | TASK [redis : deploy redis Compose stack] **************************************
2023-11-13 06:42:18,336 p=55619 u=sina n=ansible | changed: [postgres]
2023-11-13 06:42:18,384 p=55619 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:42:18,384 p=55619 u=sina n=ansible | postgres                   : ok=9    changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 06:49:33,134 p=56092 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:49:33,150 p=56092 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:49:38,002 p=56092 u=sina n=ansible | ok: [postgres]
2023-11-13 06:49:38,028 p=56092 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:49:39,726 p=56092 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:49:41,256 p=56092 u=sina n=ansible | changed: [postgres] => (item=/opt/services/postgres)
2023-11-13 06:49:41,267 p=56092 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:49:41,410 p=56092 u=sina n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-11-13 06:49:41,411 p=56092 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find or access 'postgres/haproxy.cfg.j2'\nSearched in:\n\t/home/sina/ansible-project/roles/postgres/templates/postgres/haproxy.cfg.j2\n\t/home/sina/ansible-project/roles/postgres/postgres/haproxy.cfg.j2\n\t/home/sina/ansible-project/roles/postgres/tasks/templates/postgres/haproxy.cfg.j2\n\t/home/sina/ansible-project/roles/postgres/tasks/postgres/haproxy.cfg.j2\n\t/home/sina/ansible-project/playbooks/templates/postgres/haproxy.cfg.j2\n\t/home/sina/ansible-project/playbooks/postgres/haproxy.cfg.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-11-13 06:49:41,413 p=56092 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:49:41,413 p=56092 u=sina n=ansible | postgres                   : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:50:10,659 p=56165 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:50:10,676 p=56165 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:50:14,565 p=56165 u=sina n=ansible | ok: [postgres]
2023-11-13 06:50:14,591 p=56165 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:50:16,282 p=56165 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:50:17,812 p=56165 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 06:50:17,824 p=56165 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:50:21,191 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:21,203 p=56165 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:50:24,114 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:24,124 p=56165 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:50:27,134 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:27,144 p=56165 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:50:30,204 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:30,213 p=56165 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:50:33,283 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:33,292 p=56165 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 06:50:36,348 p=56165 u=sina n=ansible | changed: [postgres]
2023-11-13 06:50:36,358 p=56165 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 06:50:41,877 p=56165 u=sina n=ansible | ok: [postgres]
2023-11-13 06:50:41,887 p=56165 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 06:50:44,339 p=56165 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:50:46,488 p=56165 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:50:46,499 p=56165 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 06:50:48,636 p=56165 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Configuration error - .FileNotFoundError: [Errno 2] No such file or directory: '/opt/services/postgre/docker-compose.yaml'"}
2023-11-13 06:50:48,638 p=56165 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:50:48,638 p=56165 u=sina n=ansible | postgres                   : ok=10   changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:51:11,105 p=56354 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:51:11,124 p=56354 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:51:14,978 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:15,004 p=56354 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:51:16,700 p=56354 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:51:18,230 p=56354 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 06:51:18,241 p=56354 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:51:21,555 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:21,567 p=56354 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:51:25,160 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:25,171 p=56354 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:51:28,469 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:28,478 p=56354 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:51:31,345 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:31,355 p=56354 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:51:34,309 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:34,320 p=56354 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 06:51:37,173 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:37,183 p=56354 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 06:51:42,294 p=56354 u=sina n=ansible | ok: [postgres]
2023-11-13 06:51:42,306 p=56354 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 06:51:44,757 p=56354 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:51:46,901 p=56354 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:51:46,912 p=56354 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 06:51:50,183 p=56354 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "Step 1/5 : FROM haproxy:latest\n ---> 77b6e95477bb\nStep 2/5 : USER root\n ---> Using cache\n ---> 6bd2017ca330\nStep 3/5 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Using cache\n ---> 0540658b6d36\nStep 4/5 : RUN touch /opt/postgres/primary-check.sh && touch /opt/postgres/standby-check.sh\n ---> Running in 580f6b92ccc4\nary-check.sh': No such file or directory\n", "msg": "Error starting project (<Service: haproxy>, \"The command '/bin/sh -c touch /opt/postgres/primary-check.sh && touch /opt/postgres/standby-check.sh' returned a non-zero code: 1\")"}
2023-11-13 06:51:50,185 p=56354 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:51:50,185 p=56354 u=sina n=ansible | postgres                   : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 06:53:30,666 p=56581 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 06:53:30,684 p=56581 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 06:53:35,486 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:35,521 p=56581 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 06:53:37,300 p=56581 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 06:53:38,828 p=56581 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 06:53:38,842 p=56581 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 06:53:41,899 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:41,909 p=56581 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 06:53:45,086 p=56581 u=sina n=ansible | changed: [postgres]
2023-11-13 06:53:45,098 p=56581 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:53:48,047 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:48,056 p=56581 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 06:53:51,016 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:51,026 p=56581 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 06:53:54,393 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:54,404 p=56581 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 06:53:57,363 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:53:57,373 p=56581 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 06:54:02,586 p=56581 u=sina n=ansible | ok: [postgres]
2023-11-13 06:54:02,596 p=56581 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 06:54:05,046 p=56581 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 06:54:07,194 p=56581 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 06:54:07,209 p=56581 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 06:54:10,368 p=56581 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "Step 1/5 : FROM haproxy:latest\n ---> 77b6e95477bb\nStep 2/5 : USER root\n ---> Using cache\n ---> 6bd2017ca330\nStep 3/5 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Using cache\n ---> 0540658b6d36\nStep 4/5 : RUN touch /opt/services/postgres/primary-check.sh && touch /opt/services/postgres/standby-check.sh\n ---> Running in c82247796466\nary-check.sh': No such file or directory\n", "msg": "Error starting project (<Service: haproxy>, \"The command '/bin/sh -c touch /opt/services/postgres/primary-check.sh && touch /opt/services/postgres/standby-check.sh' returned a non-zero code: 1\")"}
2023-11-13 06:54:10,370 p=56581 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 06:54:10,370 p=56581 u=sina n=ansible | postgres                   : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 07:02:56,214 p=57099 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:02:56,232 p=57099 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:03:01,049 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:01,078 p=57099 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 07:03:02,876 p=57099 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:03:04,404 p=57099 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 07:03:04,423 p=57099 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 07:03:07,577 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:07,589 p=57099 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 07:03:10,890 p=57099 u=sina n=ansible | changed: [postgres]
2023-11-13 07:03:10,900 p=57099 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 07:03:13,925 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:13,935 p=57099 u=sina n=ansible | TASK [postgres : copy bash config] *********************************************
2023-11-13 07:03:16,895 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:16,905 p=57099 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 07:03:19,864 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:19,873 p=57099 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 07:03:22,835 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:22,847 p=57099 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 07:03:28,163 p=57099 u=sina n=ansible | ok: [postgres]
2023-11-13 07:03:28,177 p=57099 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 07:03:31,137 p=57099 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:03:33,382 p=57099 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:03:33,396 p=57099 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 07:03:36,557 p=57099 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "Step 1/5 : FROM haproxy:latest\n ---> 77b6e95477bb\nStep 2/5 : USER root\n ---> Using cache\n ---> 6bd2017ca330\nStep 3/5 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Using cache\n ---> 0540658b6d36\nStep 4/5 : RUN touch /opt/services/primary-check.sh && touch /opt/services/standby-check.sh\n ---> Running in 12bf548dfb0c\nary-check.sh': No such file or directory\n", "msg": "Error starting project (<Service: haproxy>, \"The command '/bin/sh -c touch /opt/services/primary-check.sh && touch /opt/services/standby-check.sh' returned a non-zero code: 1\")"}
2023-11-13 07:03:36,559 p=57099 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:03:36,559 p=57099 u=sina n=ansible | postgres                   : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 07:05:10,110 p=57357 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:05:10,129 p=57357 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:05:16,928 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:16,981 p=57357 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 07:05:18,650 p=57357 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:05:20,111 p=57357 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 07:05:20,123 p=57357 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 07:05:23,042 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:23,052 p=57357 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 07:05:26,133 p=57357 u=sina n=ansible | changed: [postgres]
2023-11-13 07:05:26,143 p=57357 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-13 07:05:28,868 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:28,881 p=57357 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-13 07:05:31,640 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:31,650 p=57357 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 07:05:34,409 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:34,419 p=57357 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 07:05:37,440 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:37,452 p=57357 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 07:05:42,605 p=57357 u=sina n=ansible | ok: [postgres]
2023-11-13 07:05:42,619 p=57357 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 07:05:45,069 p=57357 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:05:47,213 p=57357 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:05:47,228 p=57357 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 07:05:50,905 p=57357 u=sina n=ansible | changed: [postgres]
2023-11-13 07:05:50,952 p=57357 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:05:50,952 p=57357 u=sina n=ansible | postgres                   : ok=11   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 07:08:49,667 p=57673 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:08:49,687 p=57673 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:08:54,565 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:08:54,646 p=57673 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 07:08:56,458 p=57673 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:08:57,990 p=57673 u=sina n=ansible | ok: [postgres] => (item=/opt/services/postgres)
2023-11-13 07:08:58,018 p=57673 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 07:09:01,683 p=57673 u=sina n=ansible | changed: [postgres]
2023-11-13 07:09:01,706 p=57673 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 07:09:04,754 p=57673 u=sina n=ansible | changed: [postgres]
2023-11-13 07:09:04,779 p=57673 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-13 07:09:07,708 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:07,725 p=57673 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-13 07:09:10,580 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:10,595 p=57673 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 07:09:13,445 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:13,458 p=57673 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 07:09:16,212 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:16,224 p=57673 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 07:09:21,434 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:21,447 p=57673 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 07:09:23,894 p=57673 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:09:26,022 p=57673 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:09:26,037 p=57673 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 07:09:28,195 p=57673 u=sina n=ansible | ok: [postgres]
2023-11-13 07:09:28,257 p=57673 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:09:28,257 p=57673 u=sina n=ansible | postgres                   : ok=11   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 07:10:39,755 p=57931 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:10:39,771 p=57931 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:10:43,993 p=57931 u=sina n=ansible | ok: [postgres]
2023-11-13 07:10:44,029 p=57931 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-13 07:10:45,723 p=57931 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:10:47,250 p=57931 u=sina n=ansible | changed: [postgres] => (item=/opt/services/postgres)
2023-11-13 07:10:47,262 p=57931 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-13 07:10:50,638 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:10:50,649 p=57931 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-13 07:10:53,601 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:10:53,613 p=57931 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-13 07:10:56,672 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:10:56,682 p=57931 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-13 07:10:59,747 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:10:59,757 p=57931 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-13 07:11:02,837 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:11:02,846 p=57931 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-13 07:11:05,890 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:11:05,902 p=57931 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-13 07:11:11,531 p=57931 u=sina n=ansible | ok: [postgres]
2023-11-13 07:11:11,555 p=57931 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-13 07:11:14,303 p=57931 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:11:16,518 p=57931 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:11:16,546 p=57931 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-13 07:11:21,160 p=57931 u=sina n=ansible | changed: [postgres]
2023-11-13 07:11:21,254 p=57931 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:11:21,255 p=57931 u=sina n=ansible | postgres                   : ok=11   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 07:26:58,836 p=58861 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:26:58,855 p=58861 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:27:03,729 p=58861 u=sina n=ansible | ok: [postgres]
2023-11-13 07:27:03,755 p=58861 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-13 07:27:05,391 p=58861 u=sina n=ansible | changed: [postgres] => (item=/opt/services)
2023-11-13 07:27:06,953 p=58861 u=sina n=ansible | changed: [postgres] => (item=/opt/services/repo)
2023-11-13 07:27:06,966 p=58861 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-13 07:27:08,494 p=58861 u=sina n=ansible | changed: [postgres] => (item=gitlab)
2023-11-13 07:27:10,000 p=58861 u=sina n=ansible | changed: [postgres] => (item=minio)
2023-11-13 07:27:11,565 p=58861 u=sina n=ansible | changed: [postgres] => (item=nexus)
2023-11-13 07:27:13,099 p=58861 u=sina n=ansible | changed: [postgres] => (item=sonar)
2023-11-13 07:27:14,632 p=58861 u=sina n=ansible | changed: [postgres] => (item=traefik)
2023-11-13 07:27:14,644 p=58861 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-13 07:27:16,171 p=58861 u=sina n=ansible | changed: [postgres] => (item=traefik/traefik)
2023-11-13 07:27:16,183 p=58861 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-13 07:27:19,454 p=58861 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:27:22,417 p=58861 u=sina n=ansible | changed: [postgres] => (item=.env)
2023-11-13 07:27:22,433 p=58861 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-13 07:27:25,492 p=58861 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:27:28,464 p=58861 u=sina n=ansible | changed: [postgres] => (item=.env)
2023-11-13 07:27:31,386 p=58861 u=sina n=ansible | changed: [postgres] => (item=nginx.conf.j2)
2023-11-13 07:27:31,399 p=58861 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-13 07:27:34,606 p=58861 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:27:37,502 p=58861 u=sina n=ansible | changed: [postgres] => (item=.env)
2023-11-13 07:27:37,515 p=58861 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-13 07:27:40,540 p=58861 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:27:40,552 p=58861 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-13 07:27:43,619 p=58861 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:27:46,581 p=58861 u=sina n=ansible | changed: [postgres] => (item=.env)
2023-11-13 07:27:46,592 p=58861 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-13 07:27:49,655 p=58861 u=sina n=ansible | changed: [postgres]
2023-11-13 07:27:49,665 p=58861 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-13 07:27:55,708 p=58861 u=sina n=ansible | changed: [postgres] => (item=git)
2023-11-13 07:28:01,541 p=58861 u=sina n=ansible | changed: [postgres] => (item=reg)
2023-11-13 07:28:07,369 p=58861 u=sina n=ansible | changed: [postgres] => (item=pages)
2023-11-13 07:28:07,382 p=58861 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:28:12,695 p=58861 u=sina n=ansible | ok: [postgres]
2023-11-13 07:28:12,706 p=58861 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:28:18,537 p=58861 u=sina n=ansible | changed: [postgres] => (item=object)
2023-11-13 07:28:24,476 p=58861 u=sina n=ansible | changed: [postgres] => (item=io)
2023-11-13 07:28:24,488 p=58861 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-13 07:28:26,933 p=58861 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:28:29,080 p=58861 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:28:29,094 p=58861 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-13 07:40:00,199 p=58861 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "Creating minio_minio1_1 ... \nCreating minio_minio4_1 ... \nCreating minio_minio3_1 ... \nCreating minio_minio2_1 ... \nCreating minio_minio4_1 ... done\nCreating minio_minio1_1 ... done\nCreating minio_minio2_1 ... done\nCreating minio_minio3_1 ... done\nCreating minio_nginx_1  ... \nCreating minio_nginx_1  ... error\n", "module_stdout": "RELEASE.2023-09-16T01-01-47Z: Pulling from minio/minio\nDigest: sha256:ab4e5eb38d0692c55e10e0413a9d8e38311520abbf18454f6648f83928469cb1\nStatus: Downloaded newer image for quay.io/minio/minio:RELEASE.2023-09-16T01-01-47Z\n1.19.2-alpine: Pulling from library/nginx\nDigest: sha256:a97eb9ecc708c8aa715ccfb5e9338f5456e4b65575daf304f108301f3b497314\nStatus: Downloaded newer image for nginx:1.19.2-alpine\n", "msg": "Error starting project Encountered errors while bringing up the project."}
2023-11-13 07:40:00,200 p=58861 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:40:00,201 p=58861 u=sina n=ansible | postgres                   : ok=14   changed=11   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 07:40:11,667 p=59742 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:40:11,689 p=59742 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:40:15,611 p=59742 u=sina n=ansible | ok: [postgres]
2023-11-13 07:40:15,646 p=59742 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-13 07:40:17,422 p=59742 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:40:18,939 p=59742 u=sina n=ansible | ok: [postgres] => (item=/opt/services/repo)
2023-11-13 07:40:18,953 p=59742 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-13 07:40:20,481 p=59742 u=sina n=ansible | ok: [postgres] => (item=gitlab)
2023-11-13 07:40:22,015 p=59742 u=sina n=ansible | ok: [postgres] => (item=minio)
2023-11-13 07:40:23,549 p=59742 u=sina n=ansible | ok: [postgres] => (item=nexus)
2023-11-13 07:40:25,086 p=59742 u=sina n=ansible | ok: [postgres] => (item=sonar)
2023-11-13 07:40:27,027 p=59742 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-13 07:40:27,041 p=59742 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-13 07:40:28,566 p=59742 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-13 07:40:28,581 p=59742 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-13 07:40:31,744 p=59742 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:40:34,606 p=59742 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:40:34,621 p=59742 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-13 07:40:37,480 p=59742 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:40:40,344 p=59742 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:40:43,207 p=59742 u=sina n=ansible | ok: [postgres] => (item=nginx.conf.j2)
2023-11-13 07:40:43,223 p=59742 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-13 07:40:46,078 p=59742 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:40:48,942 p=59742 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:40:48,955 p=59742 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-13 07:40:51,810 p=59742 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:40:51,824 p=59742 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-13 07:40:54,687 p=59742 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:40:57,546 p=59742 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:40:57,559 p=59742 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-13 07:41:00,410 p=59742 u=sina n=ansible | ok: [postgres]
2023-11-13 07:41:00,421 p=59742 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-13 07:41:05,561 p=59742 u=sina n=ansible | ok: [postgres] => (item=git)
2023-11-13 07:41:10,248 p=59742 u=sina n=ansible | ok: [postgres] => (item=reg)
2023-11-13 07:41:15,056 p=59742 u=sina n=ansible | ok: [postgres] => (item=pages)
2023-11-13 07:41:15,066 p=59742 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:41:19,971 p=59742 u=sina n=ansible | ok: [postgres]
2023-11-13 07:41:19,982 p=59742 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:41:24,790 p=59742 u=sina n=ansible | ok: [postgres] => (item=object)
2023-11-13 07:41:29,702 p=59742 u=sina n=ansible | ok: [postgres] => (item=io)
2023-11-13 07:41:29,716 p=59742 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-13 07:41:32,160 p=59742 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:41:34,307 p=59742 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:41:34,320 p=59742 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-13 07:41:37,484 p=59742 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "errors": [], "module_stderr": "Starting minio_nginx_1 ... \nStarting minio_nginx_1 ... error\n", "module_stdout": "", "msg": "Error starting project Encountered errors while bringing up the project."}
2023-11-13 07:41:37,486 p=59742 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:41:37,487 p=59742 u=sina n=ansible | postgres                   : ok=14   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-13 07:46:45,233 p=60247 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:46:45,253 p=60247 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:46:49,983 p=60247 u=sina n=ansible | ok: [postgres]
2023-11-13 07:46:50,041 p=60247 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-13 07:46:51,865 p=60247 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:46:53,395 p=60247 u=sina n=ansible | ok: [postgres] => (item=/opt/services/repo)
2023-11-13 07:46:53,410 p=60247 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-13 07:46:54,938 p=60247 u=sina n=ansible | ok: [postgres] => (item=gitlab)
2023-11-13 07:46:56,476 p=60247 u=sina n=ansible | ok: [postgres] => (item=minio)
2023-11-13 07:46:58,007 p=60247 u=sina n=ansible | ok: [postgres] => (item=nexus)
2023-11-13 07:46:59,541 p=60247 u=sina n=ansible | ok: [postgres] => (item=sonar)
2023-11-13 07:47:01,075 p=60247 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-13 07:47:01,089 p=60247 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-13 07:47:02,821 p=60247 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-13 07:47:02,835 p=60247 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-13 07:47:05,894 p=60247 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:47:08,857 p=60247 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:47:08,870 p=60247 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-13 07:47:11,834 p=60247 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:47:14,706 p=60247 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:47:17,962 p=60247 u=sina n=ansible | changed: [postgres] => (item=nginx.conf)
2023-11-13 07:47:17,975 p=60247 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-13 07:47:20,950 p=60247 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:47:23,810 p=60247 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:47:23,826 p=60247 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-13 07:47:26,782 p=60247 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:47:26,794 p=60247 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-13 07:47:29,757 p=60247 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:47:32,821 p=60247 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:47:32,834 p=60247 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-13 07:47:36,345 p=60247 u=sina n=ansible | ok: [postgres]
2023-11-13 07:47:36,357 p=60247 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-13 07:47:41,670 p=60247 u=sina n=ansible | ok: [postgres] => (item=git)
2023-11-13 07:47:46,549 p=60247 u=sina n=ansible | ok: [postgres] => (item=reg)
2023-11-13 07:47:52,001 p=60247 u=sina n=ansible | ok: [postgres] => (item=pages)
2023-11-13 07:47:52,016 p=60247 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:48:04,472 p=60247 u=sina n=ansible | ok: [postgres]
2023-11-13 07:48:04,485 p=60247 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:48:09,497 p=60247 u=sina n=ansible | ok: [postgres] => (item=object)
2023-11-13 07:48:14,296 p=60247 u=sina n=ansible | ok: [postgres] => (item=io)
2023-11-13 07:48:14,309 p=60247 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-13 07:48:16,759 p=60247 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:48:19,007 p=60247 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:48:19,021 p=60247 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-13 07:48:21,776 p=60247 u=sina n=ansible | changed: [postgres]
2023-11-13 07:48:21,831 p=60247 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:48:21,832 p=60247 u=sina n=ansible | postgres                   : ok=15   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-13 07:53:08,134 p=60936 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-13 07:53:08,157 p=60936 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-13 07:53:13,094 p=60936 u=sina n=ansible | ok: [postgres]
2023-11-13 07:53:13,139 p=60936 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-13 07:53:14,818 p=60936 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-13 07:53:16,363 p=60936 u=sina n=ansible | ok: [postgres] => (item=/opt/services/repo)
2023-11-13 07:53:16,383 p=60936 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-13 07:53:18,012 p=60936 u=sina n=ansible | ok: [postgres] => (item=gitlab)
2023-11-13 07:53:19,651 p=60936 u=sina n=ansible | ok: [postgres] => (item=minio)
2023-11-13 07:53:21,179 p=60936 u=sina n=ansible | ok: [postgres] => (item=nexus)
2023-11-13 07:53:22,715 p=60936 u=sina n=ansible | ok: [postgres] => (item=sonar)
2023-11-13 07:53:24,691 p=60936 u=sina n=ansible | ok: [postgres] => (item=traefik)
2023-11-13 07:53:24,735 p=60936 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-13 07:53:26,414 p=60936 u=sina n=ansible | ok: [postgres] => (item=traefik/traefik)
2023-11-13 07:53:26,437 p=60936 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-13 07:53:29,682 p=60936 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:53:32,647 p=60936 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:53:32,664 p=60936 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-13 07:53:35,932 p=60936 u=sina n=ansible | changed: [postgres] => (item=compose.yml)
2023-11-13 07:53:39,406 p=60936 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:53:42,374 p=60936 u=sina n=ansible | ok: [postgres] => (item=nginx.conf)
2023-11-13 07:53:42,391 p=60936 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-13 07:53:45,349 p=60936 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:53:48,315 p=60936 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:53:48,334 p=60936 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-13 07:53:51,285 p=60936 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:53:51,304 p=60936 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-13 07:53:54,259 p=60936 u=sina n=ansible | ok: [postgres] => (item=compose.yml)
2023-11-13 07:53:57,596 p=60936 u=sina n=ansible | ok: [postgres] => (item=.env)
2023-11-13 07:53:57,621 p=60936 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-13 07:54:01,010 p=60936 u=sina n=ansible | ok: [postgres]
2023-11-13 07:54:01,025 p=60936 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-13 07:54:06,341 p=60936 u=sina n=ansible | ok: [postgres] => (item=git)
2023-11-13 07:54:11,327 p=60936 u=sina n=ansible | ok: [postgres] => (item=reg)
2023-11-13 07:54:17,839 p=60936 u=sina n=ansible | ok: [postgres] => (item=pages)
2023-11-13 07:54:17,861 p=60936 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:54:59,886 p=60936 u=sina n=ansible | ok: [postgres]
2023-11-13 07:54:59,914 p=60936 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-13 07:55:21,341 p=60936 u=sina n=ansible | ok: [postgres] => (item=object)
2023-11-13 07:56:58,778 p=60936 u=sina n=ansible | ok: [postgres] => (item=io)
2023-11-13 07:56:58,796 p=60936 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-13 07:57:01,261 p=60936 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-13 07:57:03,413 p=60936 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-13 07:57:03,435 p=60936 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-13 07:57:08,322 p=60936 u=sina n=ansible | changed: [postgres]
2023-11-13 07:57:08,394 p=60936 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-13 07:57:08,395 p=60936 u=sina n=ansible | postgres                   : ok=15   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 13:10:16,324 p=6264 u=sina n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

2023-11-15 13:10:16,374 p=6264 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.53",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.106.162",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object-storage"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object-storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-15 13:11:14,669 p=6329 u=sina n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

2023-11-15 13:11:15,032 p=6329 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 13:11:15,054 p=6329 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 13:11:16,797 p=6329 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 13:11:32,087 p=6367 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 13:11:32,109 p=6367 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 13:11:50,228 p=6367 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:11:50,278 p=6367 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-15 13:11:56,827 p=6367 u=sina n=ansible | ok: [bitmail] => (item=/opt/services)
2023-11-15 13:12:02,746 p=6367 u=sina n=ansible | changed: [bitmail] => (item=/opt/services/postgres)
2023-11-15 13:12:02,768 p=6367 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-15 13:12:13,338 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:13,350 p=6367 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-15 13:12:19,839 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:19,856 p=6367 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-15 13:12:28,429 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:28,444 p=6367 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-15 13:12:36,159 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:36,173 p=6367 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-15 13:12:47,182 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:47,199 p=6367 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-15 13:12:56,531 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:12:56,548 p=6367 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-15 13:13:07,469 p=6367 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:13:07,482 p=6367 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-15 13:13:11,629 p=6367 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 13:13:17,572 p=6367 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 13:13:17,588 p=6367 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-15 13:18:55,119 p=6367 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "15: Pulling from bitnami/postgresql-repmgr\nDigest: sha256:b57844e0b84846f4f3531a3778420af4a5d225e8f122ad8f37315aebf3519e36\nStatus: Downloaded newer image for bitnami/postgresql-repmgr:15\nStep 1/6 : FROM haproxy:latest\nlatest: Pulling from library/haproxy\nDigest: sha256:fdd14bba61bed25638503b51a9d59ee31082d71a461ec28eddb29ad522156c67\nStatus: Downloaded newer image for haproxy:latest\n ---> 77b6e95477bb\nStep 2/6 : USER root\n ---> Running in 0b4654335245\nRemoving intermediate container 0b4654335245\n ---> b5ec1b4bdbe1\nStep 3/6 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Running in 95680a4c3683\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8062 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [258 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [17.7 kB]\nFetched 8546 kB in 23s (366 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libldap-2.4-2 libldap-common libpq5 libreadline8 libsasl2-2 libsasl2-modules\n  libsasl2-modules-db netbase postgresql-client-13 postgresql-client-common\n  readline-common sensible-utils\nSuggested packages:\n  libsasl2-modules-gssapi-mit | libsasl2-modules-gssapi-heimdal\n  libsasl2-modules-ldap libsasl2-modules-otp libsasl2-modules-sql\n  postgresql-13 postgresql-doc-13 readline-doc\nThe following NEW packages will be installed:\n  libldap-2.4-2 libldap-common libpq5 libreadline8 libsasl2-2 libsasl2-modules\n  libsasl2-modules-db netbase postgresql-client postgresql-client-13\n  postgresql-client-common readline-common sensible-utils\n0 upgraded, 13 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2732 kB of archives.\nAfter this operation, 9608 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 readline-common all 8.1-1 [73.7 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libreadline8 amd64 8.1-1 [169 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 netbase all 6.3 [19.9 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 sensible-utils all 0.0.14 [14.8 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-2.1+deb11u1 [69.1 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libsasl2-2 amd64 2.1.27+dfsg-2.1+deb11u1 [106 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 libldap-2.4-2 amd64 2.4.57+dfsg-3+deb11u1 [232 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libldap-common all 2.4.57+dfsg-3+deb11u1 [95.8 kB]\nGet:9 http://deb.debian.org/debian-security bullseye-security/main amd64 libpq5 amd64 13.13-0+deb11u1 [182 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules amd64 2.1.27+dfsg-2.1+deb11u1 [104 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-common all 225 [89.3 kB]\nGet:12 http://deb.debian.org/debian-security bullseye-security/main amd64 postgresql-client-13 amd64 13.13-0+deb11u1 [1512 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 postgresql-client all 13+225 [64.8 kB]\ndebconf: delaying package configuration, since apt-utils is not installed\nFetched 2732 kB in 1s (2502 kB/s)\nSelecting previously unselected package readline-common.\n(Reading database ... \n(Reading database ... 5%\n(Reading database ... 10%\n(Reading database ... 15%\n(Reading database ... 20%\n(Reading database ... 25%\n(Reading database ... 30%\n(Reading database ... 35%\n(Reading database ... 40%\n(Reading database ... 45%\n(Reading database ... 50%\n(Reading database ... 55%\n(Reading database ... 60%\n(Reading database ... 65%\n(Reading database ... 70%\n(Reading database ... 75%\n(Reading database ... 80%\n(Reading database ... 85%\n(Reading database ... 90%\n(Reading database ... 95%\n(Reading database ... 100%\n(Reading database ... 6671 files and directories currently installed.)\nPreparing to unpack .../00-readline-common_8.1-1_all.deb ...\nUnpacking readline-common (8.1-1) ...\nSelecting previously unselected package libreadline8:amd64.\nPreparing to unpack .../01-libreadline8_8.1-1_amd64.deb ...\nUnpacking libreadline8:amd64 (8.1-1) ...\nSelecting previously unselected package netbase.\nPreparing to unpack .../02-netbase_6.3_all.deb ...\nUnpacking netbase (6.3) ...\nSelecting previously unselected package sensible-utils.\nPreparing to unpack .../03-sensible-utils_0.0.14_all.deb ...\nUnpacking sensible-utils (0.0.14) ...\nSelecting previously unselected package libsasl2-modules-db:amd64.\nPreparing to unpack .../04-libsasl2-modules-db_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package libsasl2-2:amd64.\nPreparing to unpack .../05-libsasl2-2_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package libldap-2.4-2:amd64.\nPreparing to unpack .../06-libldap-2.4-2_2.4.57+dfsg-3+deb11u1_amd64.deb ...\nUnpacking libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\nSelecting previously unselected package libldap-common.\nPreparing to unpack .../07-libldap-common_2.4.57+dfsg-3+deb11u1_all.deb ...\nUnpacking libldap-common (2.4.57+dfsg-3+deb11u1) ...\nSelecting previously unselected package libpq5:amd64.\nPreparing to unpack .../08-libpq5_13.13-0+deb11u1_amd64.deb ...\nUnpacking libpq5:amd64 (13.13-0+deb11u1) ...\nSelecting previously unselected package libsasl2-modules:amd64.\nPreparing to unpack .../09-libsasl2-modules_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\nUnpacking libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSelecting previously unselected package postgresql-client-common.\nPreparing to unpack .../10-postgresql-client-common_225_all.deb ...\nUnpacking postgresql-client-common (225) ...\nSelecting previously unselected package postgresql-client-13.\nPreparing to unpack .../11-postgresql-client-13_13.13-0+deb11u1_amd64.deb ...\nUnpacking postgresql-client-13 (13.13-0+deb11u1) ...\nSelecting previously unselected package postgresql-client.\nPreparing to unpack .../12-postgresql-client_13+225_all.deb ...\nUnpacking postgresql-client (13+225) ...\nSetting up libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up libldap-common (2.4.57+dfsg-3+deb11u1) ...\nSetting up libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\nSetting up sensible-utils (0.0.14) ...\nSetting up netbase (6.3) ...\nSetting up readline-common (8.1-1) ...\nSetting up postgresql-client-common (225) ...\nSetting up libreadline8:amd64 (8.1-1) ...\nSetting up libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\nSetting up libpq5:amd64 (13.13-0+deb11u1) ...\nSetting up postgresql-client-13 (13.13-0+deb11u1) ...\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\nSetting up postgresql-client (13+225) ...\nProcessing triggers for libc-bin (2.31-13+deb11u7) ...\nRemoving intermediate container 95680a4c3683\n ---> db7cc39c574a\nStep 4/6 : COPY standby-check.sh /opt/services/postgres\n ---> 41fa69dea583\nStep 5/6 : COPY primary-check.sh /opt/services/postgres\n ---> fc316f108fd0\nStep 6/6 : RUN chmod 777 /opt/primary-check.sh  && chmod 777  /opt/standby-check.sh\n ---> Running in 4520a0fc8496\nary-check.sh': No such file or directory\n", "msg": "Error starting project (<Service: haproxy>, \"The command '/bin/sh -c chmod 777 /opt/primary-check.sh  && chmod 777  /opt/standby-check.sh' returned a non-zero code: 1\")"}
2023-11-15 13:18:55,121 p=6367 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 13:18:55,121 p=6367 u=sina n=ansible | bitmail                    : ok=10   changed=8    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-15 13:36:51,919 p=8189 u=sina n=ansible | PLAY [run DB] *****************************************************************************************************************
2023-11-15 13:36:51,937 p=8189 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 13:37:00,060 p=8189 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:37:00,107 p=8189 u=sina n=ansible | TASK [postgres : Creates directory] *******************************************************************************************
2023-11-15 13:37:03,361 p=8189 u=sina n=ansible | ok: [bitmail] => (item=/opt/services)
2023-11-15 13:37:06,787 p=8189 u=sina n=ansible | ok: [bitmail] => (item=/opt/services/postgres)
2023-11-15 13:37:06,800 p=8189 u=sina n=ansible | TASK [postgres : copy haproxy config] *****************************************************************************************
2023-11-15 13:37:12,980 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:37:12,995 p=8189 u=sina n=ansible | TASK [postgres : copy dockerfile config] **************************************************************************************
2023-11-15 13:37:21,942 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:37:21,955 p=8189 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] ********************************************************************************
2023-11-15 13:37:33,756 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:37:33,776 p=8189 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] ********************************************************************************
2023-11-15 13:37:41,399 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:37:41,412 p=8189 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ***********************************************************************************
2023-11-15 13:37:46,976 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:37:46,989 p=8189 u=sina n=ansible | TASK [postgres : copy postgress .env] *****************************************************************************************
2023-11-15 13:37:51,997 p=8189 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:37:52,010 p=8189 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] *****************************************************
2023-11-15 13:37:59,343 p=8189 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:37:59,357 p=8189 u=sina n=ansible | TASK [postgres : create network] **********************************************************************************************
2023-11-15 13:38:04,621 p=8189 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 13:38:09,304 p=8189 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 13:38:09,323 p=8189 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] ********************************************************************************
2023-11-15 13:38:16,703 p=8189 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:38:16,767 p=8189 u=sina n=ansible | PLAY RECAP ********************************************************************************************************************
2023-11-15 13:38:16,768 p=8189 u=sina n=ansible | bitmail                    : ok=11   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 13:42:24,725 p=8784 u=sina n=ansible | bitmail | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:26,295 p=8784 u=sina n=ansible | git | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:28,613 p=8784 u=sina n=ansible | obs | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:28,647 p=8784 u=sina n=ansible | pre-product | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:29,162 p=8784 u=sina n=ansible | postgres | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:29,760 p=8784 u=sina n=ansible | gitlab-runner | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:30,426 p=8784 u=sina n=ansible | product | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:30,797 p=8784 u=sina n=ansible | minio | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:42:31,041 p=8784 u=sina n=ansible | redis | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2023-11-15 13:43:44,455 p=9003 u=sina n=ansible | PLAY [run DB] *****************************************************************************************************************
2023-11-15 13:43:44,475 p=9003 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 13:43:53,219 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:43:53,259 p=9003 u=sina n=ansible | TASK [postgres : Creates directory] *******************************************************************************************
2023-11-15 13:43:55,872 p=9003 u=sina n=ansible | ok: [bitmail] => (item=/opt/services)
2023-11-15 13:43:58,301 p=9003 u=sina n=ansible | ok: [bitmail] => (item=/opt/services/postgres)
2023-11-15 13:43:58,315 p=9003 u=sina n=ansible | TASK [postgres : copy haproxy config] *****************************************************************************************
2023-11-15 13:44:03,099 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:03,114 p=9003 u=sina n=ansible | TASK [postgres : copy dockerfile config] **************************************************************************************
2023-11-15 13:44:07,824 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:07,842 p=9003 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] ********************************************************************************
2023-11-15 13:44:12,625 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:12,639 p=9003 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] ********************************************************************************
2023-11-15 13:44:17,583 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:17,597 p=9003 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ***********************************************************************************
2023-11-15 13:44:22,503 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:22,516 p=9003 u=sina n=ansible | TASK [postgres : copy postgress .env] *****************************************************************************************
2023-11-15 13:44:27,119 p=9003 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:44:27,133 p=9003 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] *****************************************************
2023-11-15 13:44:33,367 p=9003 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 13:45:01,718 p=9207 u=sina n=ansible | PLAY [hardening server and install basic tools] *******************************************************************************
2023-11-15 13:45:01,790 p=9207 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 13:45:23,900 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 13:45:25,836 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 13:45:26,300 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 13:45:26,614 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 13:45:26,946 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:45:27,946 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 13:45:27,952 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 13:45:28,395 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 13:45:28,983 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 13:45:29,136 p=9207 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] *********************************************************************
2023-11-15 13:45:44,782 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:45:54,044 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:45:54,630 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:45:55,952 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:45:56,638 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:46:03,745 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:46:05,638 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:46:09,792 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:47:57,165 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:47:57,173 p=9207 u=sina n=ansible | TASK [preparing-server : Install basic tools] *********************************************************************************
2023-11-15 13:48:59,338 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:49:03,791 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:49:10,956 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:49:12,526 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:49:15,877 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:49:16,648 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:49:28,807 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:49:29,927 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:49:33,888 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:49:33,898 p=9207 u=sina n=ansible | TASK [preparing-server : Set hostname] ****************************************************************************************
2023-11-15 13:49:55,291 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:49:55,917 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 13:49:56,090 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 13:49:57,610 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:49:57,798 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 13:49:58,688 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:49:58,833 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:49:59,438 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:49:59,928 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:49:59,938 p=9207 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] **************************************************************************************
2023-11-15 13:50:17,714 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:50:18,075 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:50:20,884 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:50:20,921 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:50:21,262 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:50:21,554 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:50:21,896 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:50:22,101 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:50:22,139 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:50:22,153 p=9207 u=sina n=ansible | TASK [preparing-server : limits.conf] *****************************************************************************************
2023-11-15 13:50:39,179 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:50:39,980 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:50:42,043 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:50:43,158 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:50:43,271 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:50:43,341 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:50:44,167 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:50:44,338 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:50:44,718 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:50:44,730 p=9207 u=sina n=ansible | TASK [preparing-server : coredump.conf] ***************************************************************************************
2023-11-15 13:51:00,664 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:51:04,990 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:51:04,997 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:51:05,281 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:51:05,684 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:51:06,239 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:51:06,274 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:51:06,277 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:51:06,775 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:51:06,784 p=9207 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] ********************************************************
2023-11-15 13:51:16,401 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.d)
2023-11-15 13:51:16,705 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.d)
2023-11-15 13:51:17,001 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/cron.d)
2023-11-15 13:51:17,121 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/cron.d)
2023-11-15 13:51:17,253 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/cron.d)
2023-11-15 13:51:18,293 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/cron.d)
2023-11-15 13:51:19,334 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/cron.d)
2023-11-15 13:51:19,367 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.d)
2023-11-15 13:51:19,649 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.d)
2023-11-15 13:51:24,139 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.daily)
2023-11-15 13:51:26,617 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/cron.daily)
2023-11-15 13:51:27,214 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.daily)
2023-11-15 13:51:28,796 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/cron.daily)
2023-11-15 13:51:29,235 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/cron.daily)
2023-11-15 13:51:29,951 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.daily)
2023-11-15 13:51:32,950 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/cron.daily)
2023-11-15 13:51:33,929 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/cron.daily)
2023-11-15 13:51:36,846 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/cron.hourly)
2023-11-15 13:51:37,054 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.daily)
2023-11-15 13:51:37,283 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.hourly)
2023-11-15 13:51:37,901 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/cron.hourly)
2023-11-15 13:51:39,198 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.hourly)
2023-11-15 13:51:41,200 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.hourly)
2023-11-15 13:51:41,925 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/cron.hourly)
2023-11-15 13:51:44,508 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/cron.hourly)
2023-11-15 13:51:45,925 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/cron.weekly)
2023-11-15 13:51:45,933 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.weekly)
2023-11-15 13:51:47,848 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/cron.weekly)
2023-11-15 13:51:48,408 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/cron.hourly)
2023-11-15 13:51:49,413 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.hourly)
2023-11-15 13:51:51,126 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.weekly)
2023-11-15 13:51:51,363 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.weekly)
2023-11-15 13:51:52,235 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/cron.weekly)
2023-11-15 13:51:53,704 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/cron.weekly)
2023-11-15 13:51:56,610 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/cron.monthly)
2023-11-15 13:51:56,735 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/cron.monthly)
2023-11-15 13:51:57,233 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.monthly)
2023-11-15 13:52:01,894 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.monthly)
2023-11-15 13:52:02,220 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/cron.monthly)
2023-11-15 13:52:02,688 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/cron.monthly)
2023-11-15 13:52:04,115 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.monthly)
2023-11-15 13:52:04,547 p=9207 u=sina n=ansible | changed: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:04,878 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.weekly)
2023-11-15 13:52:05,955 p=9207 u=sina n=ansible | changed: [obs] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:06,382 p=9207 u=sina n=ansible | changed: [product] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:08,868 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/cron.weekly)
2023-11-15 13:52:10,671 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:14,184 p=9207 u=sina n=ansible | changed: [redis] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:14,369 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/crontab)
2023-11-15 13:52:15,195 p=9207 u=sina n=ansible | changed: [minio] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:15,498 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:15,701 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/crontab)
2023-11-15 13:52:16,860 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.monthly)
2023-11-15 13:52:18,715 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/crontab)
2023-11-15 13:52:19,989 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/crontab)
2023-11-15 13:52:20,621 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/cron.monthly)
2023-11-15 13:52:21,326 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/crontab)
2023-11-15 13:52:21,578 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/crontab)
2023-11-15 13:52:22,782 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/crontab)
2023-11-15 13:52:23,305 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:23,930 p=9207 u=sina n=ansible | changed: [git] => (item=/boot/grub/grub.cfg)
2023-11-15 13:52:26,602 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/crontab)
2023-11-15 13:52:26,811 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/crontab)
2023-11-15 13:52:26,821 p=9207 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] ******************************************************************************
2023-11-15 13:52:37,335 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/usr/bin/as)
2023-11-15 13:52:38,693 p=9207 u=sina n=ansible | changed: [obs] => (item=/usr/bin/as)
2023-11-15 13:52:40,058 p=9207 u=sina n=ansible | changed: [product] => (item=/usr/bin/as)
2023-11-15 13:52:40,100 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/usr/bin/as)
2023-11-15 13:52:41,369 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/usr/bin/as)
2023-11-15 13:52:41,608 p=9207 u=sina n=ansible | changed: [redis] => (item=/usr/bin/as)
2023-11-15 13:52:42,766 p=9207 u=sina n=ansible | changed: [git] => (item=/usr/bin/as)
2023-11-15 13:52:43,260 p=9207 u=sina n=ansible | changed: [postgres] => (item=/usr/bin/as)
2023-11-15 13:52:44,101 p=9207 u=sina n=ansible | changed: [minio] => (item=/usr/bin/as)
2023-11-15 13:52:46,494 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:47,899 p=9207 u=sina n=ansible | changed: [product] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:48,552 p=9207 u=sina n=ansible | changed: [obs] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:49,364 p=9207 u=sina n=ansible | ok: [bitmail] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:50,214 p=9207 u=sina n=ansible | changed: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:51,848 p=9207 u=sina n=ansible | changed: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:51,863 p=9207 u=sina n=ansible | changed: [minio] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:51,888 p=9207 u=sina n=ansible | changed: [git] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:51,982 p=9207 u=sina n=ansible | changed: [redis] => (item=/etc/ssh/sshd_config)
2023-11-15 13:52:51,996 p=9207 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] ********************************************************************
2023-11-15 13:53:11,218 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:53:11,424 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:53:13,830 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:53:14,379 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:53:14,683 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:53:15,979 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:53:16,273 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:53:17,102 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:53:17,984 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:53:17,996 p=9207 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] ****************************************************************************
2023-11-15 13:53:28,971 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:53:29,126 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:53:29,842 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:53:29,937 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:53:29,942 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:53:30,354 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:53:30,442 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:53:30,494 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:53:30,551 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:53:30,565 p=9207 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ***********************************************************************
2023-11-15 13:53:41,520 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:53:41,774 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:53:41,962 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:53:42,458 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:53:42,484 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:53:42,508 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:53:42,515 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:53:42,883 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:53:43,054 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:53:43,064 p=9207 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] *********************************************************************
2023-11-15 13:54:02,845 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:54:03,630 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:54:03,792 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:54:04,602 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:54:05,976 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:54:06,041 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:54:07,011 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:54:07,121 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:54:07,127 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:54:07,136 p=9207 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] *****************************************************************
2023-11-15 13:54:25,893 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:54:29,399 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:54:29,738 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:54:31,391 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:54:31,517 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:54:32,189 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:54:32,248 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:54:32,323 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:54:33,284 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:54:33,298 p=9207 u=sina n=ansible | TASK [preparing-server : config sysctl file] **********************************************************************************
2023-11-15 13:54:51,031 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:54:53,395 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:54:53,658 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:54:54,238 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:54:55,180 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:54:55,510 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:54:55,578 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:54:55,923 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:54:55,982 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:54:55,992 p=9207 u=sina n=ansible | TASK [preparing-server : sysctl reload] ***************************************************************************************
2023-11-15 13:55:04,317 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:55:05,910 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:55:06,556 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:55:06,874 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:55:07,195 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:55:07,593 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:55:07,738 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:55:07,937 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:55:07,960 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:55:07,974 p=9207 u=sina n=ansible | TASK [preparing-server : change default umask for profile] ********************************************************************
2023-11-15 13:55:25,777 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:55:28,220 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:55:29,337 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:55:29,986 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:55:30,145 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:55:30,212 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:55:31,055 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:55:31,677 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:55:31,803 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:55:31,813 p=9207 u=sina n=ansible | TASK [preparing-server : change directory premissions] ************************************************************************
2023-11-15 13:55:42,446 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:55:42,668 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:55:42,908 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:55:43,075 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:55:43,350 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:55:43,701 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:55:44,159 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:55:44,321 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:55:45,025 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:55:45,035 p=9207 u=sina n=ansible | TASK [preparing-server : change password max and min age] *********************************************************************
2023-11-15 13:56:03,683 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 13:56:06,196 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 13:56:08,186 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 13:56:08,579 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 13:56:08,770 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 13:56:09,091 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 13:56:09,581 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 13:56:09,621 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 13:56:09,775 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:56:09,784 p=9207 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] *************************************************************
2023-11-15 13:56:29,587 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:56:33,377 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:56:34,609 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:56:34,611 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:56:35,195 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:56:35,296 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:56:35,539 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:56:36,336 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:56:37,346 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:56:37,359 p=9207 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] *********************************************************
2023-11-15 13:56:57,096 p=9207 u=sina n=ansible | fatal: [obs]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:56:57,097 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:00,339 p=9207 u=sina n=ansible | fatal: [minio]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:00,339 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:00,620 p=9207 u=sina n=ansible | fatal: [redis]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:00,620 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:01,092 p=9207 u=sina n=ansible | fatal: [product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:01,092 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:02,054 p=9207 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:02,054 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:02,454 p=9207 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:02,454 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:02,901 p=9207 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:02,901 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:03,343 p=9207 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:03,344 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:03,608 p=9207 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 13:57:03,608 p=9207 u=sina n=ansible | ...ignoring
2023-11-15 13:57:03,618 p=9207 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] *********************************************************************
2023-11-15 13:57:22,514 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:57:23,597 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:57:25,158 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:57:25,307 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:57:26,370 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:57:26,558 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:57:27,809 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:57:27,815 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:57:27,830 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:57:27,849 p=9207 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] *************************************************************************
2023-11-15 13:57:38,122 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:57:39,682 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:57:39,804 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:57:39,950 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:57:40,071 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:57:40,211 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:57:40,573 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:57:41,208 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:57:41,705 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:57:41,716 p=9207 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] ******************************************************************
2023-11-15 13:57:50,558 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 13:57:53,481 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 13:57:54,869 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 13:57:54,884 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 13:57:55,990 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 13:57:56,278 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 13:57:56,362 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 13:57:56,521 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 13:57:56,530 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:57:56,546 p=9207 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] *******************************************************************************
2023-11-15 13:58:12,839 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:58:13,999 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:58:17,376 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:58:18,148 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:58:19,504 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:58:19,703 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:58:19,943 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:58:20,024 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:58:20,132 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:58:20,143 p=9207 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ***********************************************************************
2023-11-15 13:58:37,750 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:58:41,123 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:58:41,298 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:58:42,059 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:58:42,158 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:58:42,528 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:58:42,635 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:58:42,740 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:58:42,868 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:58:42,878 p=9207 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] *******************************************************************
2023-11-15 13:58:57,598 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:59:01,539 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:59:02,573 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:59:03,141 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:59:04,294 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:59:04,295 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:59:04,352 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:59:04,631 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:59:04,761 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:59:04,777 p=9207 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] ******************************************************************
2023-11-15 13:59:04,815 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:04,840 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:04,884 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:04,907 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:04,968 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:05,043 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:05,057 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:05,085 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:05,107 p=9207 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of mistake may lead the ansible controller to loose
access to the hosts and never regain it before fixing firewall rules through a serial console, or any other way except SSH.
Please set task attribute 'poll' (=15) to 0, and 'async' (=0) to a value >2 and not greater than 'ansible_timeout' (=10)
(recommended).

2023-11-15 13:59:14,910 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:59:15,534 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:59:15,557 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:59:15,662 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:59:16,556 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:59:16,600 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:59:16,723 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:59:16,783 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 13:59:17,277 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:59:17,287 p=9207 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] *******************************************************************
2023-11-15 13:59:35,452 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 13:59:38,122 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 13:59:38,276 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 13:59:39,759 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:59:40,665 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 13:59:40,783 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 13:59:40,919 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 13:59:41,370 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 13:59:41,802 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 13:59:41,816 p=9207 u=sina n=ansible | TASK [preparing-server : hosts.allow] *****************************************************************************************
2023-11-15 13:59:58,901 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 13:59:59,998 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:00:00,890 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:00:00,931 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:00:02,811 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:00:03,174 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:00:03,210 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:00:03,994 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:00:04,011 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:00:04,022 p=9207 u=sina n=ansible | TASK [preparing-server : hosts.deny] ******************************************************************************************
2023-11-15 14:00:19,979 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:00:22,007 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:00:22,902 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:00:22,919 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:00:23,764 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:00:23,818 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:00:25,468 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:00:25,546 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:00:26,242 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:00:26,253 p=9207 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ***********************************************************************
2023-11-15 14:00:35,463 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:00:36,766 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:00:37,700 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:00:37,776 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:00:37,906 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:00:37,983 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:00:38,162 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:00:38,165 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:00:38,772 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:00:38,781 p=9207 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] **************************************************************************
2023-11-15 14:00:47,848 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:00:49,550 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:00:49,650 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:00:50,286 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:00:50,430 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:00:50,544 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:00:50,608 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:00:50,788 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:00:51,279 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:00:51,290 p=9207 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] *******************************************************************
2023-11-15 14:01:01,334 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:01:02,846 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:01:03,637 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:01:03,800 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:01:03,874 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:01:03,943 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:01:04,115 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:01:04,252 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:01:04,479 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:01:04,489 p=9207 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] *************************************************************************
2023-11-15 14:01:14,635 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:01:15,140 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:01:15,261 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:01:16,001 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:01:16,567 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:01:16,675 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:01:16,708 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:01:16,711 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:01:17,732 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:01:17,741 p=9207 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] **************************************************************************
2023-11-15 14:01:24,498 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:01:27,027 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:01:27,157 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:01:28,165 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:01:28,440 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:01:28,511 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:01:29,264 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:01:29,378 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:01:29,696 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:01:29,705 p=9207 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] ******************************************************************************
2023-11-15 14:01:37,767 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:01:39,385 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:01:39,603 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:01:39,977 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:01:40,076 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:01:40,303 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:01:40,825 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:01:41,139 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:01:41,176 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:01:41,185 p=9207 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ***********************************************************************
2023-11-15 14:01:50,482 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:01:51,384 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:01:52,736 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:01:53,082 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:01:53,185 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:01:53,194 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:01:53,363 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:01:53,448 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:01:53,688 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:01:53,698 p=9207 u=sina n=ansible | TASK [preparing-server : set audit num_logs] **********************************************************************************
2023-11-15 14:02:03,057 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:02:03,066 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:02:03,791 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:02:04,066 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:02:04,170 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:02:04,731 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:02:04,915 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:02:04,954 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:02:05,164 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:02:05,175 p=9207 u=sina n=ansible | TASK [preparing-server : set audit space_left] ********************************************************************************
2023-11-15 14:02:13,454 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:02:14,008 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:02:15,665 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:02:15,885 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:02:16,084 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:02:16,136 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:02:16,442 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:02:16,458 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:02:16,519 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:02:16,529 p=9207 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] *************************************************************************
2023-11-15 14:02:25,326 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:02:26,255 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:02:26,668 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:02:26,802 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:02:27,335 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:02:27,505 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:02:27,661 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:02:27,771 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:02:28,356 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:02:28,365 p=9207 u=sina n=ansible | TASK [preparing-server : audit.rules] *****************************************************************************************
2023-11-15 14:02:44,941 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:02:46,952 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:02:47,870 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:02:48,225 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:02:48,919 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:02:49,027 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:02:49,477 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:02:49,694 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:02:51,134 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:02:51,144 p=9207 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] ******************************************************************************
2023-11-15 14:03:01,723 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:03:01,940 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:03:02,331 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:03:02,432 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:03:02,670 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:03:02,694 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:03:02,860 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:03:03,174 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:03:03,274 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:03:03,286 p=9207 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] ****************************************************************************
2023-11-15 14:03:12,589 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:03:14,047 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:03:14,831 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:03:14,839 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:03:15,123 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:03:15,620 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:03:15,882 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:03:16,178 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:03:16,446 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:03:16,459 p=9207 u=sina n=ansible | TASK [preparing-server : resolved.conf] ***************************************************************************************
2023-11-15 14:03:35,534 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:03:35,980 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:03:36,529 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:03:37,030 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:03:37,644 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:03:38,067 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:03:38,104 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:03:38,579 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:03:38,946 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:03:38,962 p=9207 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] *******************************************************************************
2023-11-15 14:03:55,530 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:03:57,119 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:03:58,844 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:03:58,932 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:03:59,146 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:03:59,955 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:04:00,277 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:04:00,386 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:04:00,425 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:04:00,440 p=9207 u=sina n=ansible | TASK [preparing-server : logrotate.conf] **************************************************************************************
2023-11-15 14:04:17,155 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:04:18,476 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:04:19,105 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:04:19,930 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:04:20,519 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:04:20,670 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:04:21,644 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:04:21,779 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:04:22,080 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:04:22,092 p=9207 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] ********************************************************************************
2023-11-15 14:04:30,688 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:04:32,569 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:04:32,574 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:04:33,511 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:04:33,550 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:04:33,637 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:04:33,687 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:04:34,159 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:04:34,371 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:04:34,380 p=9207 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ***********************************************************************************
2023-11-15 14:04:42,546 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:04:42,758 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:04:43,618 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:04:43,952 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:04:43,971 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:04:45,574 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:04:45,773 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:04:45,933 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:04:46,233 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:04:46,248 p=9207 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] *********************************************************************
2023-11-15 14:04:54,920 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:04:56,951 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:04:57,067 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:04:57,158 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:04:57,361 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:04:57,484 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:04:57,518 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:04:57,730 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:04:58,510 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:04:58,520 p=9207 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] *********************************************************************
2023-11-15 14:05:06,708 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:05:08,869 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:05:09,672 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:05:09,799 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:05:09,851 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:05:09,860 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:05:09,976 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:05:10,041 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:05:10,078 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:05:10,089 p=9207 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] ************************************************************************
2023-11-15 14:05:19,965 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:05:20,146 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:05:20,549 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:05:20,735 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:05:21,372 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:05:21,434 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:05:21,460 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:05:21,790 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:05:22,637 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:05:22,646 p=9207 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] *************************************************************************
2023-11-15 14:05:31,676 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:05:33,163 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:05:33,229 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:05:33,285 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:05:33,722 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:05:33,774 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:05:33,919 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:05:33,967 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:05:34,249 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:05:34,259 p=9207 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] **********************************************************************
2023-11-15 14:05:43,669 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:43,905 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:44,979 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:45,077 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:45,852 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:46,714 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:46,791 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:48,711 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:50,073 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 14:05:54,169 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:54,883 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:55,425 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:55,558 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:56,427 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:58,227 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:59,570 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:05:59,798 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:02,049 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:02,190 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:04,384 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:04,635 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:07,092 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:07,318 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:07,917 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:11,536 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:13,750 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:16,697 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:17,016 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:17,511 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 14:06:17,602 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:17,721 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:18,665 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:22,953 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:23,568 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:24,101 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:26,311 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:27,121 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:28,027 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:33,280 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:33,979 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:34,357 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:35,870 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 14:06:36,346 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:39,501 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:40,373 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:40,879 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:42,316 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:42,629 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:42,941 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:46,081 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:49,590 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:06:52,080 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:52,262 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:06:53,574 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:06:54,100 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 14:06:54,266 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:06:55,447 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:06:55,836 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:06:59,737 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:07:01,065 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:04,374 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:05,123 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:05,126 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:07:05,447 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:05,519 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:06,704 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 14:07:08,930 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:07:15,819 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:16,156 p=9207 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:16,479 p=9207 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:16,488 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:16,793 p=9207 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:16,902 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:16,962 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 14:07:22,184 p=9207 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:22,560 p=9207 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:22,888 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:24,701 p=9207 u=sina n=ansible | changed: [minio] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:25,937 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 14:07:27,360 p=9207 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:28,863 p=9207 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 14:07:28,877 p=9207 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] *****************************************************************
2023-11-15 14:07:40,552 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:07:41,200 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:07:42,856 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:07:43,616 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:07:43,743 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:07:43,916 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:07:43,927 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:07:44,006 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:07:44,116 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:07:44,125 p=9207 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] *****************************************************
2023-11-15 14:08:00,029 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:08:00,180 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:08:00,964 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:08:01,127 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:08:01,907 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:08:02,162 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:08:02,380 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 14:08:03,165 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:08:05,822 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:08:05,832 p=9207 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] *****************************************************************************
2023-11-15 14:08:32,478 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:08:33,384 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:08:33,510 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:08:34,829 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:08:35,094 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:08:35,936 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:08:36,020 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:08:36,095 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:08:36,600 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:08:36,613 p=9207 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] *********************************************************************
2023-11-15 14:08:46,903 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:08:47,984 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:08:48,633 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:08:48,698 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:08:48,778 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:08:48,834 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:08:48,993 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 14:08:49,184 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:08:49,277 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:08:49,515 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ssh] ******************************************************************************
2023-11-15 14:09:06,769 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:09:07,333 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:09:07,541 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:09:10,651 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:09:11,498 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:09:12,044 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:09:12,097 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:09:12,463 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:09:12,477 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart iptables] *************************************************************************
2023-11-15 14:09:32,073 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:09:32,311 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:09:32,562 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:09:34,246 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:09:34,602 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:09:35,690 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:09:36,558 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:09:37,484 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:09:38,900 p=9207 u=sina n=ansible | changed: [bitmail]
2023-11-15 14:09:38,912 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart fail2ban] *************************************************************************
2023-11-15 14:09:56,707 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:09:59,380 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:09:59,433 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:09:59,511 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:09:59,554 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:10:00,296 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:10:00,326 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:10:00,511 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:10:00,520 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ntp] ******************************************************************************
2023-11-15 14:10:18,634 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:10:20,229 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:10:20,272 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:10:20,497 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:10:21,086 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:10:21,207 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:10:21,953 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:10:21,966 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:10:21,981 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : restart auditd] ***************************************************************************
2023-11-15 14:10:30,913 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:10:31,515 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:10:31,546 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:10:31,749 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:10:32,193 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:10:32,309 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:10:32,773 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:10:32,962 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:10:32,971 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : generate auditd] **************************************************************************
2023-11-15 14:10:40,991 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:10:42,050 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:10:42,101 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:10:42,159 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:10:42,326 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:10:42,601 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:10:42,711 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:10:43,164 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:10:43,176 p=9207 u=sina n=ansible | RUNNING HANDLER [preparing-server : reload systemd] ***************************************************************************
2023-11-15 14:10:59,470 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:11:03,381 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:11:04,756 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:11:05,132 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:11:05,184 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:11:05,493 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:11:05,666 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:11:05,733 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:11:05,880 p=9207 u=sina n=ansible | PLAY [install docker] *********************************************************************************************************
2023-11-15 14:11:05,895 p=9207 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 14:11:23,652 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:11:26,246 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:11:27,366 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:11:27,527 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:11:28,813 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:11:30,286 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:11:30,907 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:11:32,505 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:11:34,528 p=9207 u=sina n=ansible | ok: [bitmail]
2023-11-15 14:11:34,678 p=9207 u=sina n=ansible | TASK [docker-installation : install dependency] *******************************************************************************
2023-11-15 14:11:52,735 p=9207 u=sina n=ansible | ok: [product] => (item=ca-certificates)
2023-11-15 14:11:56,591 p=9207 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-15 14:11:57,569 p=9207 u=sina n=ansible | ok: [gitlab-runner] => (item=ca-certificates)
2023-11-15 14:11:59,587 p=9207 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-15 14:12:00,677 p=9207 u=sina n=ansible | ok: [obs] => (item=ca-certificates)
2023-11-15 14:12:01,327 p=9207 u=sina n=ansible | ok: [minio] => (item=ca-certificates)
2023-11-15 14:12:03,128 p=9207 u=sina n=ansible | ok: [redis] => (item=ca-certificates)
2023-11-15 14:12:03,480 p=9207 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-15 14:12:06,268 p=9207 u=sina n=ansible | changed: [product] => (item=gnupg-agent)
2023-11-15 14:12:11,468 p=9207 u=sina n=ansible | changed: [pre-product] => (item=gnupg-agent)
2023-11-15 14:12:13,358 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=gnupg-agent)
2023-11-15 14:12:16,533 p=9207 u=sina n=ansible | changed: [obs] => (item=gnupg-agent)
2023-11-15 14:12:16,754 p=9207 u=sina n=ansible | ok: [product] => (item=software-properties-common)
2023-11-15 14:12:18,237 p=9207 u=sina n=ansible | changed: [postgres] => (item=gnupg-agent)
2023-11-15 14:12:19,109 p=9207 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-15 14:12:21,753 p=9207 u=sina n=ansible | ok: [gitlab-runner] => (item=software-properties-common)
2023-11-15 14:12:24,363 p=9207 u=sina n=ansible | ok: [obs] => (item=software-properties-common)
2023-11-15 14:12:26,964 p=9207 u=sina n=ansible | changed: [redis] => (item=gnupg-agent)
2023-11-15 14:12:27,163 p=9207 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-15 14:12:31,598 p=9207 u=sina n=ansible | changed: [minio] => (item=gnupg-agent)
2023-11-15 14:12:38,352 p=9207 u=sina n=ansible | ok: [redis] => (item=software-properties-common)
2023-11-15 14:12:43,076 p=9207 u=sina n=ansible | ok: [minio] => (item=software-properties-common)
2023-11-15 14:13:03,273 p=9207 u=sina n=ansible | failed: [bitmail] (item=ca-certificates) => {"ansible_loop_var": "item", "changed": false, "item": "ca-certificates", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.48 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-15 14:13:56,459 p=9207 u=sina n=ansible | changed: [git] => (item=gnupg-agent)
2023-11-15 14:14:06,914 p=9207 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-15 14:14:21,365 p=9207 u=sina n=ansible | failed: [bitmail] (item=gnupg-agent) => {"ansible_loop_var": "item", "changed": false, "item": "gnupg-agent", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.90 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-15 14:15:40,582 p=9207 u=sina n=ansible | failed: [bitmail] (item=software-properties-common) => {"ansible_loop_var": "item", "changed": false, "item": "software-properties-common", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.127 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-15 14:15:40,593 p=9207 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] **********************************************************
2023-11-15 14:16:00,781 p=9207 u=sina n=ansible | changed: [obs] => (item=docker)
2023-11-15 14:16:04,823 p=9207 u=sina n=ansible | changed: [postgres] => (item=docker)
2023-11-15 14:16:05,351 p=9207 u=sina n=ansible | changed: [pre-product] => (item=docker)
2023-11-15 14:16:07,733 p=9207 u=sina n=ansible | changed: [product] => (item=docker)
2023-11-15 14:16:07,964 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=docker)
2023-11-15 14:16:09,189 p=9207 u=sina n=ansible | changed: [minio] => (item=docker)
2023-11-15 14:16:09,628 p=9207 u=sina n=ansible | changed: [git] => (item=docker)
2023-11-15 14:16:11,363 p=9207 u=sina n=ansible | changed: [redis] => (item=docker)
2023-11-15 14:16:13,213 p=9207 u=sina n=ansible | changed: [obs] => (item=docker-compose)
2023-11-15 14:16:19,340 p=9207 u=sina n=ansible | changed: [postgres] => (item=docker-compose)
2023-11-15 14:16:22,864 p=9207 u=sina n=ansible | changed: [pre-product] => (item=docker-compose)
2023-11-15 14:16:32,151 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=docker-compose)
2023-11-15 14:16:32,846 p=9207 u=sina n=ansible | changed: [product] => (item=docker-compose)
2023-11-15 14:16:35,708 p=9207 u=sina n=ansible | changed: [git] => (item=docker-compose)
2023-11-15 14:16:36,007 p=9207 u=sina n=ansible | changed: [minio] => (item=docker-compose)
2023-11-15 14:16:38,569 p=9207 u=sina n=ansible | changed: [redis] => (item=docker-compose)
2023-11-15 14:16:38,581 p=9207 u=sina n=ansible | TASK [docker-installation : give GPG key] *************************************************************************************
2023-11-15 14:17:00,075 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:17:00,217 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:17:00,900 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:17:01,143 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:17:01,807 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:17:01,820 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:17:02,086 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:17:02,241 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:17:02,251 p=9207 u=sina n=ansible | TASK [docker-installation : add docker repo] **********************************************************************************
2023-11-15 14:17:28,957 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:17:33,139 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:17:33,984 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:17:36,004 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:17:39,995 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:17:42,324 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:17:43,338 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:18:37,279 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:18:37,288 p=9207 u=sina n=ansible | TASK [docker-installation : install docker] ***********************************************************************************
2023-11-15 14:19:35,513 p=9207 u=sina n=ansible | changed: [product] => (item=docker-ce)
2023-11-15 14:19:38,901 p=9207 u=sina n=ansible | changed: [pre-product] => (item=docker-ce)
2023-11-15 14:19:44,619 p=9207 u=sina n=ansible | changed: [gitlab-runner] => (item=docker-ce)
2023-11-15 14:19:44,731 p=9207 u=sina n=ansible | ok: [product] => (item=docker-ce-cli)
2023-11-15 14:19:47,759 p=9207 u=sina n=ansible | ok: [pre-product] => (item=docker-ce-cli)
2023-11-15 14:19:55,781 p=9207 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-ce-cli)
2023-11-15 14:19:59,437 p=9207 u=sina n=ansible | ok: [pre-product] => (item=containerd.io)
2023-11-15 14:19:59,762 p=9207 u=sina n=ansible | ok: [product] => (item=containerd.io)
2023-11-15 14:20:01,965 p=9207 u=sina n=ansible | changed: [git] => (item=docker-ce)
2023-11-15 14:20:04,995 p=9207 u=sina n=ansible | ok: [gitlab-runner] => (item=containerd.io)
2023-11-15 14:20:11,734 p=9207 u=sina n=ansible | changed: [redis] => (item=docker-ce)
2023-11-15 14:20:12,877 p=9207 u=sina n=ansible | changed: [minio] => (item=docker-ce)
2023-11-15 14:20:27,718 p=9207 u=sina n=ansible | ok: [minio] => (item=docker-ce-cli)
2023-11-15 14:20:29,683 p=9207 u=sina n=ansible | ok: [redis] => (item=docker-ce-cli)
2023-11-15 14:20:31,235 p=9207 u=sina n=ansible | changed: [obs] => (item=docker-ce)
2023-11-15 14:20:35,552 p=9207 u=sina n=ansible | changed: [postgres] => (item=docker-ce)
2023-11-15 14:20:41,814 p=9207 u=sina n=ansible | ok: [obs] => (item=docker-ce-cli)
2023-11-15 14:20:41,879 p=9207 u=sina n=ansible | ok: [minio] => (item=containerd.io)
2023-11-15 14:20:42,893 p=9207 u=sina n=ansible | ok: [redis] => (item=containerd.io)
2023-11-15 14:20:46,566 p=9207 u=sina n=ansible | ok: [postgres] => (item=docker-ce-cli)
2023-11-15 14:20:50,759 p=9207 u=sina n=ansible | ok: [obs] => (item=containerd.io)
2023-11-15 14:21:00,182 p=9207 u=sina n=ansible | ok: [postgres] => (item=containerd.io)
2023-11-15 14:21:24,137 p=9207 u=sina n=ansible | ok: [git] => (item=docker-ce-cli)
2023-11-15 14:22:05,414 p=9207 u=sina n=ansible | ok: [git] => (item=containerd.io)
2023-11-15 14:22:05,432 p=9207 u=sina n=ansible | TASK [docker-installation : start and enable docker] **************************************************************************
2023-11-15 14:22:34,901 p=9207 u=sina n=ansible | ok: [git]
2023-11-15 14:22:40,630 p=9207 u=sina n=ansible | ok: [redis]
2023-11-15 14:22:40,875 p=9207 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 14:22:41,167 p=9207 u=sina n=ansible | ok: [pre-product]
2023-11-15 14:22:42,032 p=9207 u=sina n=ansible | ok: [postgres]
2023-11-15 14:22:43,339 p=9207 u=sina n=ansible | ok: [product]
2023-11-15 14:22:44,515 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:22:45,647 p=9207 u=sina n=ansible | ok: [minio]
2023-11-15 14:22:45,658 p=9207 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] ******************************************************************
2023-11-15 14:23:10,066 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:23:10,067 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:23:11,286 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:23:11,397 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:23:11,531 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:23:11,618 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:23:12,900 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:23:13,756 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:23:13,766 p=9207 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] *******************************
2023-11-15 14:23:44,714 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:23:45,737 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:23:48,192 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:23:49,445 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:23:50,214 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:23:52,194 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:23:52,773 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:23:53,395 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:23:53,600 p=9207 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] ************************************************************************
2023-11-15 14:24:16,670 p=9207 u=sina n=ansible | changed: [redis]
2023-11-15 14:24:21,792 p=9207 u=sina n=ansible | changed: [postgres]
2023-11-15 14:24:21,853 p=9207 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 14:24:22,578 p=9207 u=sina n=ansible | changed: [pre-product]
2023-11-15 14:24:23,914 p=9207 u=sina n=ansible | changed: [product]
2023-11-15 14:24:25,394 p=9207 u=sina n=ansible | changed: [minio]
2023-11-15 14:24:26,271 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:24:27,008 p=9207 u=sina n=ansible | changed: [git]
2023-11-15 14:24:27,138 p=9207 u=sina n=ansible | PLAY [deploy observability stack] *********************************************************************************************
2023-11-15 14:24:27,165 p=9207 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 14:24:32,154 p=9207 u=sina n=ansible | ok: [obs]
2023-11-15 14:24:32,181 p=9207 u=sina n=ansible | TASK [observability : create /opt/srevices dir] *******************************************************************************
2023-11-15 14:24:34,322 p=9207 u=sina n=ansible | changed: [obs] => (item=services)
2023-11-15 14:24:34,334 p=9207 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:24:36,808 p=9207 u=sina n=ansible | changed: [obs] => (item=traefik)
2023-11-15 14:24:39,244 p=9207 u=sina n=ansible | changed: [obs] => (item=monitoring)
2023-11-15 14:24:41,593 p=9207 u=sina n=ansible | changed: [obs] => (item=logging)
2023-11-15 14:24:41,606 p=9207 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:24:44,171 p=9207 u=sina n=ansible | changed: [obs] => (item=prometheus)
2023-11-15 14:24:46,312 p=9207 u=sina n=ansible | changed: [obs] => (item=alertmanager)
2023-11-15 14:24:49,197 p=9207 u=sina n=ansible | changed: [obs] => (item=blackbox)
2023-11-15 14:24:49,209 p=9207 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] *************************************************************************
2023-11-15 14:24:52,168 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:24:52,177 p=9207 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] *******************************************************************
2023-11-15 14:25:02,661 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:25:02,678 p=9207 u=sina n=ansible | TASK [observability : copy traefik compose file to host] **********************************************************************
2023-11-15 14:25:18,696 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:25:18,707 p=9207 u=sina n=ansible | TASK [observability : copy logging compose file to host] **********************************************************************
2023-11-15 14:25:25,593 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:25:25,607 p=9207 u=sina n=ansible | TASK [observability : copy prometheus.yml] ************************************************************************************
2023-11-15 14:25:31,077 p=9207 u=sina n=ansible | changed: [obs]
2023-11-15 14:25:31,093 p=9207 u=sina n=ansible | TASK [observability : grafana-dashboard config] *******************************************************************************
2023-11-15 14:26:06,828 p=9207 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 14:26:20,301 p=18800 u=sina n=ansible | PLAY [deploy observability stack] *********************************************************************************************
2023-11-15 14:26:20,325 p=18800 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 14:26:27,325 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:26:27,359 p=18800 u=sina n=ansible | TASK [observability : create /opt/srevices dir] *******************************************************************************
2023-11-15 14:26:31,094 p=18800 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 14:26:31,108 p=18800 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:26:34,641 p=18800 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 14:26:38,793 p=18800 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 14:26:40,966 p=18800 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 14:26:40,977 p=18800 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:26:43,676 p=18800 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 14:26:46,271 p=18800 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 14:26:49,352 p=18800 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 14:26:49,364 p=18800 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] *************************************************************************
2023-11-15 14:26:51,550 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:26:51,561 p=18800 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] *******************************************************************
2023-11-15 14:26:56,541 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:26:56,555 p=18800 u=sina n=ansible | TASK [observability : copy traefik compose file to host] **********************************************************************
2023-11-15 14:27:03,501 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:27:03,510 p=18800 u=sina n=ansible | TASK [observability : copy logging compose file to host] **********************************************************************
2023-11-15 14:27:08,692 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:27:08,706 p=18800 u=sina n=ansible | TASK [observability : copy prometheus.yml] ************************************************************************************
2023-11-15 14:27:13,907 p=18800 u=sina n=ansible | ok: [obs]
2023-11-15 14:27:13,920 p=18800 u=sina n=ansible | TASK [observability : grafana-dashboard config] *******************************************************************************
2023-11-15 14:28:28,968 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:28:28,979 p=18800 u=sina n=ansible | TASK [observability : copy alertmanager config] *******************************************************************************
2023-11-15 14:28:34,606 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:28:34,616 p=18800 u=sina n=ansible | TASK [observability : create sub dir] *****************************************************************************************
2023-11-15 14:28:37,897 p=18800 u=sina n=ansible | changed: [obs] => (item=logging/promtail)
2023-11-15 14:28:40,201 p=18800 u=sina n=ansible | changed: [obs] => (item=logging/loki)
2023-11-15 14:28:42,955 p=18800 u=sina n=ansible | changed: [obs] => (item=traefik/traefik)
2023-11-15 14:28:42,965 p=18800 u=sina n=ansible | TASK [observability : loki local config] **************************************************************************************
2023-11-15 14:28:50,352 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:28:50,361 p=18800 u=sina n=ansible | TASK [observability : copy traefik conf] **************************************************************************************
2023-11-15 14:28:55,790 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:28:55,799 p=18800 u=sina n=ansible | TASK [observability : promtail config] ****************************************************************************************
2023-11-15 14:29:04,444 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:29:04,455 p=18800 u=sina n=ansible | TASK [observability : blackbox exporter config] *******************************************************************************
2023-11-15 14:29:09,179 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:29:09,190 p=18800 u=sina n=ansible | TASK [observability : copy traefik .env] **************************************************************************************
2023-11-15 14:29:13,438 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:29:13,504 p=18800 u=sina n=ansible | TASK [observability : copy logging .env] **************************************************************************************
2023-11-15 14:29:18,991 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:29:19,003 p=18800 u=sina n=ansible | TASK [observability : copy monitoring .env] ***********************************************************************************
2023-11-15 14:29:26,842 p=18800 u=sina n=ansible | changed: [obs]
2023-11-15 14:29:26,852 p=18800 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***************************************
2023-11-15 14:29:34,006 p=18800 u=sina n=ansible | changed: [obs] => (item=metrics)
2023-11-15 14:29:40,919 p=18800 u=sina n=ansible | changed: [obs] => (item=grafana)
2023-11-15 14:29:48,280 p=18800 u=sina n=ansible | changed: [obs] => (item=alerts)
2023-11-15 14:29:55,122 p=18800 u=sina n=ansible | changed: [obs] => (item=pushgw)
2023-11-15 14:30:08,181 p=18800 u=sina n=ansible | changed: [obs] => (item=loki)
2023-11-15 14:30:15,544 p=18800 u=sina n=ansible | changed: [obs] => (item=web)
2023-11-15 14:30:15,557 p=18800 u=sina n=ansible | TASK [observability : create network] *****************************************************************************************
2023-11-15 14:30:20,533 p=18800 u=sina n=ansible | changed: [obs] => (item=app_net)
2023-11-15 14:30:25,127 p=18800 u=sina n=ansible | changed: [obs] => (item=web_net)
2023-11-15 14:30:25,142 p=18800 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ***************************************************************************
2023-11-15 14:36:33,241 p=18800 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 14:43:47,827 p=20776 u=sina n=ansible | PLAY [deploy observability stack] *********************************************************************************************
2023-11-15 14:43:47,851 p=20776 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 14:43:55,121 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:43:55,147 p=20776 u=sina n=ansible | TASK [observability : create /opt/srevices dir] *******************************************************************************
2023-11-15 14:43:57,555 p=20776 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 14:43:57,567 p=20776 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:43:59,770 p=20776 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 14:44:01,902 p=20776 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 14:44:04,116 p=20776 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 14:44:04,131 p=20776 u=sina n=ansible | TASK [observability : create files] *******************************************************************************************
2023-11-15 14:44:06,659 p=20776 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 14:44:09,262 p=20776 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 14:44:11,495 p=20776 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 14:44:11,509 p=20776 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] *************************************************************************
2023-11-15 14:44:13,697 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:44:13,708 p=20776 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] *******************************************************************
2023-11-15 14:44:18,381 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:44:18,392 p=20776 u=sina n=ansible | TASK [observability : copy traefik compose file to host] **********************************************************************
2023-11-15 14:44:23,013 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:44:23,023 p=20776 u=sina n=ansible | TASK [observability : copy logging compose file to host] **********************************************************************
2023-11-15 14:44:27,648 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:44:27,659 p=20776 u=sina n=ansible | TASK [observability : copy prometheus.yml] ************************************************************************************
2023-11-15 14:44:32,275 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:44:32,285 p=20776 u=sina n=ansible | TASK [observability : grafana-dashboard config] *******************************************************************************
2023-11-15 14:45:16,430 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:16,439 p=20776 u=sina n=ansible | TASK [observability : copy alertmanager config] *******************************************************************************
2023-11-15 14:45:20,951 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:20,967 p=20776 u=sina n=ansible | TASK [observability : create sub dir] *****************************************************************************************
2023-11-15 14:45:23,467 p=20776 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 14:45:25,827 p=20776 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 14:45:28,398 p=20776 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 14:45:28,410 p=20776 u=sina n=ansible | TASK [observability : loki local config] **************************************************************************************
2023-11-15 14:45:37,473 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:37,483 p=20776 u=sina n=ansible | TASK [observability : copy traefik conf] **************************************************************************************
2023-11-15 14:45:42,438 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:42,453 p=20776 u=sina n=ansible | TASK [observability : promtail config] ****************************************************************************************
2023-11-15 14:45:48,557 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:48,570 p=20776 u=sina n=ansible | TASK [observability : blackbox exporter config] *******************************************************************************
2023-11-15 14:45:52,790 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:52,800 p=20776 u=sina n=ansible | TASK [observability : copy traefik .env] **************************************************************************************
2023-11-15 14:45:56,958 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:45:56,970 p=20776 u=sina n=ansible | TASK [observability : copy logging .env] **************************************************************************************
2023-11-15 14:46:01,355 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:46:01,366 p=20776 u=sina n=ansible | TASK [observability : copy monitoring .env] ***********************************************************************************
2023-11-15 14:46:05,594 p=20776 u=sina n=ansible | ok: [obs]
2023-11-15 14:46:05,608 p=20776 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***************************************
2023-11-15 14:46:11,911 p=20776 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 14:46:17,521 p=20776 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 14:46:23,743 p=20776 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 14:46:29,520 p=20776 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 14:46:35,273 p=20776 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 14:46:40,950 p=20776 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 14:46:40,964 p=20776 u=sina n=ansible | TASK [observability : create network] *****************************************************************************************
2023-11-15 14:46:44,599 p=20776 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 14:46:47,753 p=20776 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 14:46:47,765 p=20776 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ***************************************************************************
2023-11-15 14:55:11,858 p=20776 u=sina n=ansible | changed: [obs]
2023-11-15 14:55:11,873 p=20776 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] ************************************************************************
2023-11-15 15:22:21,432 p=20776 u=sina n=ansible | changed: [obs]
2023-11-15 15:22:21,446 p=20776 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ***************************************************************************
2023-11-15 15:28:49,780 p=20776 u=sina n=ansible | changed: [obs]
2023-11-15 15:28:49,835 p=20776 u=sina n=ansible | PLAY [deploy gitlab] **********************************************************************************************************
2023-11-15 15:28:49,854 p=20776 u=sina n=ansible | TASK [Gathering Facts] ********************************************************************************************************
2023-11-15 15:28:55,843 p=20776 u=sina n=ansible | ok: [git]
2023-11-15 15:28:55,868 p=20776 u=sina n=ansible | TASK [repo : create dir] ******************************************************************************************************
2023-11-15 15:28:58,701 p=20776 u=sina n=ansible | changed: [git] => (item=/opt/services)
2023-11-15 15:29:01,314 p=20776 u=sina n=ansible | changed: [git] => (item=/opt/services/repo)
2023-11-15 15:29:01,326 p=20776 u=sina n=ansible | TASK [repo : create sub dir] **************************************************************************************************
2023-11-15 15:29:03,547 p=20776 u=sina n=ansible | changed: [git] => (item=gitlab)
2023-11-15 15:29:06,248 p=20776 u=sina n=ansible | changed: [git] => (item=minio)
2023-11-15 15:29:08,835 p=20776 u=sina n=ansible | changed: [git] => (item=nexus)
2023-11-15 15:29:11,386 p=20776 u=sina n=ansible | changed: [git] => (item=sonar)
2023-11-15 15:29:14,281 p=20776 u=sina n=ansible | changed: [git] => (item=traefik)
2023-11-15 15:29:14,294 p=20776 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] **********************************************************************************
2023-11-15 15:29:16,503 p=20776 u=sina n=ansible | changed: [git] => (item=traefik/traefik)
2023-11-15 15:29:16,514 p=20776 u=sina n=ansible | TASK [repo : gitlab compose file] *********************************************************************************************
2023-11-15 15:29:22,021 p=20776 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 15:29:26,708 p=20776 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 15:29:26,723 p=20776 u=sina n=ansible | TASK [repo : minio compose file] **********************************************************************************************
2023-11-15 15:29:31,324 p=20776 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 15:29:35,790 p=20776 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 15:29:40,721 p=20776 u=sina n=ansible | changed: [git] => (item=nginx.conf)
2023-11-15 15:29:40,737 p=20776 u=sina n=ansible | TASK [repo : nexus compose file] **********************************************************************************************
2023-11-15 15:29:45,314 p=20776 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 15:29:49,332 p=20776 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 15:29:49,344 p=20776 u=sina n=ansible | TASK [repo : sonar compose file] **********************************************************************************************
2023-11-15 15:29:54,262 p=20776 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 15:29:54,275 p=20776 u=sina n=ansible | TASK [repo : traefik compose file] ********************************************************************************************
2023-11-15 15:29:59,676 p=20776 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 15:30:05,055 p=20776 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 15:30:05,066 p=20776 u=sina n=ansible | TASK [repo : copy traefik config file] ****************************************************************************************
2023-11-15 15:30:11,020 p=20776 u=sina n=ansible | changed: [git]
2023-11-15 15:30:11,031 p=20776 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] *******************************************************
2023-11-15 15:30:20,301 p=20776 u=sina n=ansible | changed: [git] => (item=git)
2023-11-15 15:30:28,769 p=20776 u=sina n=ansible | changed: [git] => (item=reg)
2023-11-15 15:30:36,793 p=20776 u=sina n=ansible | changed: [git] => (item=pages)
2023-11-15 15:30:36,818 p=20776 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] *********************************************
2023-11-15 15:30:45,801 p=20776 u=sina n=ansible | changed: [git]
2023-11-15 15:30:45,811 p=20776 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***********************************************
2023-11-15 15:30:53,951 p=20776 u=sina n=ansible | changed: [git] => (item=object)
2023-11-15 15:31:01,487 p=20776 u=sina n=ansible | changed: [git] => (item=io)
2023-11-15 15:31:01,499 p=20776 u=sina n=ansible | TASK [repo : create network] **************************************************************************************************
2023-11-15 15:31:06,943 p=20776 u=sina n=ansible | changed: [git] => (item=app_net)
2023-11-15 15:31:10,926 p=20776 u=sina n=ansible | changed: [git] => (item=web_net)
2023-11-15 15:31:10,944 p=20776 u=sina n=ansible | TASK [repo : deploty minio Compose stack] *************************************************************************************
2023-11-15 16:35:21,414 p=25918 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 16:35:21,443 p=25918 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:35:27,638 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:35:27,682 p=25918 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 16:35:29,899 p=25918 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 16:35:29,918 p=25918 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:35:32,976 p=25918 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 16:35:35,451 p=25918 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 16:35:37,338 p=25918 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 16:35:37,355 p=25918 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:35:39,327 p=25918 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 16:35:41,252 p=25918 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 16:35:43,145 p=25918 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 16:35:43,161 p=25918 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 16:35:45,139 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:35:45,154 p=25918 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 16:35:49,396 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:35:49,413 p=25918 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 16:35:53,403 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:35:53,419 p=25918 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 16:35:57,714 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:35:57,730 p=25918 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 16:36:01,638 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:36:01,655 p=25918 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 16:36:41,490 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:36:41,507 p=25918 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 16:36:45,820 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:36:45,835 p=25918 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 16:36:47,891 p=25918 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 16:36:49,951 p=25918 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 16:36:51,970 p=25918 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 16:36:51,985 p=25918 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 16:36:58,491 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:36:58,507 p=25918 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 16:37:02,933 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:02,950 p=25918 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 16:37:09,037 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:09,054 p=25918 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 16:37:13,156 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:13,174 p=25918 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 16:37:17,563 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:17,578 p=25918 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 16:37:21,416 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:21,431 p=25918 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 16:37:25,402 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:37:25,423 p=25918 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 16:37:31,386 p=25918 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 16:37:37,141 p=25918 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 16:37:43,118 p=25918 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 16:37:48,818 p=25918 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 16:37:54,397 p=25918 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 16:38:00,006 p=25918 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 16:38:00,030 p=25918 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 16:38:03,556 p=25918 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 16:38:06,990 p=25918 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 16:38:07,008 p=25918 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 16:38:09,818 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:38:09,837 p=25918 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 16:38:12,884 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:38:12,899 p=25918 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 16:38:15,810 p=25918 u=sina n=ansible | ok: [obs]
2023-11-15 16:38:15,885 p=25918 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 16:38:15,906 p=25918 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:41:22,554 p=25918 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 16:41:25,710 p=26545 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 16:41:25,736 p=26545 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:41:32,238 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:41:32,278 p=26545 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 16:41:34,626 p=26545 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 16:41:34,642 p=26545 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:41:36,745 p=26545 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 16:41:39,135 p=26545 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 16:41:41,201 p=26545 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 16:41:41,218 p=26545 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:41:43,305 p=26545 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 16:41:46,345 p=26545 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 16:41:49,400 p=26545 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 16:41:49,415 p=26545 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 16:41:51,489 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:41:51,507 p=26545 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 16:41:55,782 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:41:55,799 p=26545 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 16:41:59,985 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:42:00,001 p=26545 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 16:42:04,011 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:42:04,030 p=26545 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 16:42:08,014 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:42:08,033 p=26545 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 16:42:48,795 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:42:48,809 p=26545 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 16:42:53,573 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:42:53,590 p=26545 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 16:42:55,887 p=26545 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 16:42:58,373 p=26545 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 16:43:00,904 p=26545 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 16:43:00,922 p=26545 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 16:43:07,498 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:07,516 p=26545 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 16:43:11,556 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:11,575 p=26545 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 16:43:17,789 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:17,803 p=26545 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 16:43:21,984 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:22,003 p=26545 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 16:43:26,616 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:26,631 p=26545 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 16:43:31,220 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:31,234 p=26545 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 16:43:35,657 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:43:35,672 p=26545 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 16:43:42,198 p=26545 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 16:43:48,454 p=26545 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 16:43:54,071 p=26545 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 16:43:59,692 p=26545 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 16:44:05,430 p=26545 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 16:44:11,089 p=26545 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 16:44:11,109 p=26545 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 16:44:14,819 p=26545 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 16:44:18,011 p=26545 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 16:44:18,029 p=26545 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 16:44:21,230 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:44:21,247 p=26545 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 16:44:24,380 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:44:24,401 p=26545 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 16:44:27,948 p=26545 u=sina n=ansible | ok: [obs]
2023-11-15 16:44:28,021 p=26545 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 16:44:28,043 p=26545 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:46:37,365 p=26545 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 16:48:02,819 p=3208 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 16:48:02,850 p=3208 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:48:09,029 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:09,067 p=3208 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 16:48:11,177 p=3208 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 16:48:11,191 p=3208 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:48:13,171 p=3208 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 16:48:15,198 p=3208 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 16:48:17,230 p=3208 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 16:48:17,246 p=3208 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 16:48:19,278 p=3208 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 16:48:21,314 p=3208 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 16:48:23,455 p=3208 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 16:48:23,470 p=3208 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 16:48:25,502 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:25,520 p=3208 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 16:48:29,612 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:29,626 p=3208 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 16:48:33,480 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:33,494 p=3208 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 16:48:37,475 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:37,488 p=3208 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 16:48:41,368 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:48:41,379 p=3208 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 16:49:26,747 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:26,759 p=3208 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 16:49:30,539 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:30,551 p=3208 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 16:49:32,590 p=3208 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 16:49:34,551 p=3208 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 16:49:36,475 p=3208 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 16:49:36,489 p=3208 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 16:49:42,058 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:42,072 p=3208 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 16:49:45,921 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:45,934 p=3208 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 16:49:51,565 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:51,578 p=3208 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 16:49:55,367 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:55,380 p=3208 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 16:49:59,571 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:49:59,587 p=3208 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 16:50:03,465 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:50:03,478 p=3208 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 16:50:07,357 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:50:07,370 p=3208 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 16:50:14,290 p=3208 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 16:50:20,071 p=3208 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 16:50:25,608 p=3208 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 16:50:31,216 p=3208 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 16:50:36,781 p=3208 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 16:50:45,747 p=3208 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 16:50:45,761 p=3208 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 16:50:56,375 p=3208 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 16:51:00,231 p=3208 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 16:51:00,245 p=3208 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 16:51:02,895 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:51:02,907 p=3208 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 16:51:06,005 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:51:06,017 p=3208 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 16:51:08,741 p=3208 u=sina n=ansible | ok: [obs]
2023-11-15 16:51:08,801 p=3208 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 16:51:08,818 p=3208 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:51:15,552 p=3208 u=sina n=ansible | ok: [git]
2023-11-15 16:51:15,580 p=3208 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 16:51:17,532 p=3208 u=sina n=ansible | ok: [git] => (item=/opt/services)
2023-11-15 16:51:19,369 p=3208 u=sina n=ansible | ok: [git] => (item=/opt/services/repo)
2023-11-15 16:51:19,381 p=3208 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 16:51:21,324 p=3208 u=sina n=ansible | ok: [git] => (item=gitlab)
2023-11-15 16:51:23,269 p=3208 u=sina n=ansible | ok: [git] => (item=minio)
2023-11-15 16:51:25,728 p=3208 u=sina n=ansible | ok: [git] => (item=nexus)
2023-11-15 16:51:27,575 p=3208 u=sina n=ansible | ok: [git] => (item=sonar)
2023-11-15 16:51:29,510 p=3208 u=sina n=ansible | ok: [git] => (item=traefik)
2023-11-15 16:51:29,522 p=3208 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 16:51:31,562 p=3208 u=sina n=ansible | ok: [git] => (item=traefik/traefik)
2023-11-15 16:51:31,574 p=3208 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 16:51:35,356 p=3208 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 16:51:39,245 p=3208 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 16:51:39,259 p=3208 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 16:51:42,937 p=3208 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 16:51:49,108 p=3208 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 16:51:54,725 p=3208 u=sina n=ansible | ok: [git] => (item=nginx.conf)
2023-11-15 16:51:54,736 p=3208 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 16:52:00,048 p=3208 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 16:52:03,735 p=3208 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 16:52:03,748 p=3208 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 16:52:07,424 p=3208 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 16:52:07,436 p=3208 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 16:52:11,224 p=3208 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 16:52:15,001 p=3208 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 16:52:15,013 p=3208 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 16:52:18,586 p=3208 u=sina n=ansible | ok: [git]
2023-11-15 16:52:18,596 p=3208 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 16:52:24,228 p=3208 u=sina n=ansible | ok: [git] => (item=git)
2023-11-15 16:52:29,669 p=3208 u=sina n=ansible | ok: [git] => (item=reg)
2023-11-15 16:52:35,187 p=3208 u=sina n=ansible | ok: [git] => (item=pages)
2023-11-15 16:52:35,199 p=3208 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 16:52:40,617 p=3208 u=sina n=ansible | ok: [git]
2023-11-15 16:52:40,632 p=3208 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 16:52:46,157 p=3208 u=sina n=ansible | ok: [git] => (item=object)
2023-11-15 16:52:51,593 p=3208 u=sina n=ansible | ok: [git] => (item=io)
2023-11-15 16:52:51,607 p=3208 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 16:52:54,569 p=3208 u=sina n=ansible | ok: [git] => (item=app_net)
2023-11-15 16:52:57,876 p=3208 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 16:52:57,888 p=3208 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-15 16:53:07,486 p=3208 u=sina n=ansible | ok: [git]
2023-11-15 16:53:07,507 p=3208 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 16:53:14,101 p=3208 u=sina n=ansible | changed: [git] => (item=cad)
2023-11-15 16:53:21,187 p=3208 u=sina n=ansible | changed: [git] => (item=nod)
2023-11-15 16:53:21,200 p=3208 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 16:53:23,325 p=3208 u=sina n=ansible | ok: [git] => (item=services)
2023-11-15 16:53:23,338 p=3208 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 16:53:25,270 p=3208 u=sina n=ansible | changed: [git] => (item=agents)
2023-11-15 16:53:27,414 p=3208 u=sina n=ansible | changed: [git] => (item=agents/promtail)
2023-11-15 16:53:27,427 p=3208 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 16:53:31,289 p=3208 u=sina n=ansible | changed: [git]
2023-11-15 16:53:31,304 p=3208 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 16:53:35,380 p=3208 u=sina n=ansible | changed: [git]
2023-11-15 16:53:35,392 p=3208 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 16:53:39,577 p=3208 u=sina n=ansible | changed: [git]
2023-11-15 16:53:39,588 p=3208 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 16:53:43,578 p=3208 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 16:53:43,591 p=3208 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 16:58:48,618 p=3208 u=sina n=ansible | changed: [git]
2023-11-15 16:58:48,666 p=3208 u=sina n=ansible | PLAY [deploy mail-server , bitwarden , agents] *********************************
2023-11-15 16:58:48,688 p=3208 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 16:58:56,753 p=3208 u=sina n=ansible | ok: [bitmail]
2023-11-15 16:58:56,783 p=3208 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 16:58:58,987 p=3208 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 16:58:59,001 p=3208 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 16:59:01,956 p=3208 u=sina n=ansible | ok: [bitmail] => (item=traefik)
2023-11-15 16:59:01,969 p=3208 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 16:59:06,455 p=3208 u=sina n=ansible | ok: [bitmail]
2023-11-15 16:59:06,467 p=3208 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 16:59:08,922 p=3208 u=sina n=ansible | ok: [bitmail] => (item=traefik/traefik)
2023-11-15 16:59:08,935 p=3208 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 16:59:13,436 p=3208 u=sina n=ansible | ok: [bitmail]
2023-11-15 16:59:13,447 p=3208 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 16:59:18,302 p=3208 u=sina n=ansible | changed: [bitmail]
2023-11-15 16:59:18,313 p=3208 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 16:59:25,929 p=3208 u=sina n=ansible | changed: [bitmail]
2023-11-15 16:59:25,940 p=3208 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 16:59:29,513 p=3208 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 16:59:33,197 p=3208 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 16:59:33,211 p=3208 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 16:59:39,311 p=3208 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "errors": [], "module_stderr": "Recreating traefik ... \nHost is already in use by another container\nRecreating traefik ... error\n", "module_stdout": "", "msg": "Error starting project Encountered errors while bringing up the project."}
2023-11-15 16:59:39,313 p=3208 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 16:59:39,313 p=3208 u=sina n=ansible | bitmail                    : ok=9    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-15 16:59:39,313 p=3208 u=sina n=ansible | git                        : ok=23   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 16:59:39,313 p=3208 u=sina n=ansible | obs                        : ok=24   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:03:27,684 p=4666 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 17:03:27,705 p=4666 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:03:34,025 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:03:34,070 p=4666 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 17:03:36,458 p=4666 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 17:03:36,483 p=4666 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:03:38,560 p=4666 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 17:03:40,578 p=4666 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 17:03:42,541 p=4666 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 17:03:42,561 p=4666 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:03:44,649 p=4666 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 17:03:46,621 p=4666 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 17:03:48,641 p=4666 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 17:03:48,658 p=4666 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 17:03:50,695 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:03:50,722 p=4666 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 17:03:54,789 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:03:54,816 p=4666 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 17:03:58,839 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:03:58,859 p=4666 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 17:04:02,999 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:04:03,012 p=4666 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 17:04:07,384 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:04:07,399 p=4666 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 17:04:45,365 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:04:45,378 p=4666 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 17:04:49,268 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:04:49,281 p=4666 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 17:04:51,314 p=4666 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 17:04:53,281 p=4666 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 17:04:55,287 p=4666 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 17:04:55,302 p=4666 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 17:05:01,041 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:01,067 p=4666 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 17:05:04,930 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:04,946 p=4666 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 17:05:12,666 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:12,697 p=4666 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 17:05:16,926 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:16,951 p=4666 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 17:05:21,413 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:21,426 p=4666 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 17:05:25,304 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:25,317 p=4666 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 17:05:29,195 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:05:29,210 p=4666 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 17:05:35,163 p=4666 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 17:05:40,673 p=4666 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 17:05:46,407 p=4666 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 17:05:51,938 p=4666 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 17:05:57,633 p=4666 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 17:06:03,264 p=4666 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 17:06:03,277 p=4666 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 17:06:06,579 p=4666 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 17:06:09,545 p=4666 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 17:06:09,560 p=4666 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 17:06:12,210 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:06:12,223 p=4666 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 17:06:15,414 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:06:15,427 p=4666 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 17:06:18,046 p=4666 u=sina n=ansible | ok: [obs]
2023-11-15 17:06:18,108 p=4666 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 17:06:18,125 p=4666 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:06:24,681 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:06:24,733 p=4666 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 17:06:26,621 p=4666 u=sina n=ansible | ok: [git] => (item=/opt/services)
2023-11-15 17:06:28,463 p=4666 u=sina n=ansible | ok: [git] => (item=/opt/services/repo)
2023-11-15 17:06:28,475 p=4666 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 17:06:30,825 p=4666 u=sina n=ansible | ok: [git] => (item=gitlab)
2023-11-15 17:06:32,663 p=4666 u=sina n=ansible | ok: [git] => (item=minio)
2023-11-15 17:06:34,509 p=4666 u=sina n=ansible | ok: [git] => (item=nexus)
2023-11-15 17:06:36,453 p=4666 u=sina n=ansible | ok: [git] => (item=sonar)
2023-11-15 17:06:38,398 p=4666 u=sina n=ansible | ok: [git] => (item=traefik)
2023-11-15 17:06:38,413 p=4666 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 17:06:40,349 p=4666 u=sina n=ansible | ok: [git] => (item=traefik/traefik)
2023-11-15 17:06:40,373 p=4666 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 17:06:44,475 p=4666 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:06:48,442 p=4666 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:06:48,466 p=4666 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 17:06:52,643 p=4666 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:06:57,107 p=4666 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:07:00,826 p=4666 u=sina n=ansible | ok: [git] => (item=nginx.conf)
2023-11-15 17:07:00,840 p=4666 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 17:07:04,582 p=4666 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:07:08,274 p=4666 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:07:08,302 p=4666 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 17:07:12,047 p=4666 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:07:12,071 p=4666 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 17:07:16,000 p=4666 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:07:19,679 p=4666 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:07:19,692 p=4666 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 17:07:23,268 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:07:23,279 p=4666 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 17:07:28,812 p=4666 u=sina n=ansible | ok: [git] => (item=git)
2023-11-15 17:07:34,239 p=4666 u=sina n=ansible | ok: [git] => (item=reg)
2023-11-15 17:07:39,595 p=4666 u=sina n=ansible | ok: [git] => (item=pages)
2023-11-15 17:07:39,608 p=4666 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:07:44,997 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:07:45,010 p=4666 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:07:50,744 p=4666 u=sina n=ansible | ok: [git] => (item=object)
2023-11-15 17:07:56,166 p=4666 u=sina n=ansible | ok: [git] => (item=io)
2023-11-15 17:07:56,179 p=4666 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 17:07:59,030 p=4666 u=sina n=ansible | ok: [git] => (item=app_net)
2023-11-15 17:08:01,900 p=4666 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 17:08:01,913 p=4666 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-15 17:08:04,614 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:08:04,635 p=4666 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 17:08:10,109 p=4666 u=sina n=ansible | ok: [git] => (item=cad)
2023-11-15 17:08:15,385 p=4666 u=sina n=ansible | ok: [git] => (item=nod)
2023-11-15 17:08:15,398 p=4666 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 17:08:17,367 p=4666 u=sina n=ansible | ok: [git] => (item=services)
2023-11-15 17:08:17,380 p=4666 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 17:08:19,316 p=4666 u=sina n=ansible | ok: [git] => (item=agents)
2023-11-15 17:08:21,229 p=4666 u=sina n=ansible | ok: [git] => (item=agents/promtail)
2023-11-15 17:08:21,245 p=4666 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 17:08:25,031 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:08:25,043 p=4666 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 17:08:29,257 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:08:29,269 p=4666 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 17:08:32,845 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:08:32,856 p=4666 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 17:08:35,807 p=4666 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 17:08:35,820 p=4666 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 17:08:38,382 p=4666 u=sina n=ansible | ok: [git]
2023-11-15 17:08:38,437 p=4666 u=sina n=ansible | PLAY [deploy mail-server , bitwarden , agents] *********************************
2023-11-15 17:08:38,461 p=4666 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:08:45,539 p=4666 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:08:45,564 p=4666 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 17:08:47,826 p=4666 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 17:08:47,838 p=4666 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 17:08:50,090 p=4666 u=sina n=ansible | ok: [bitmail] => (item=traefik)
2023-11-15 17:08:50,101 p=4666 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 17:08:54,481 p=4666 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:08:54,491 p=4666 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 17:08:56,736 p=4666 u=sina n=ansible | ok: [bitmail] => (item=traefik/traefik)
2023-11-15 17:08:56,748 p=4666 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 17:09:01,343 p=4666 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:09:01,351 p=4666 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 17:09:06,054 p=4666 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:09:06,063 p=4666 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 17:09:12,104 p=4666 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:09:12,114 p=4666 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 17:09:15,277 p=4666 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 17:09:18,551 p=4666 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 17:09:18,562 p=4666 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 17:09:23,234 p=4666 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "errors": [], "module_stderr": "Recreating 23edf115055b_traefik ... \nHost is already in use by another container\nRecreating 23edf115055b_traefik ... error\n", "module_stdout": "", "msg": "Error starting project Encountered errors while bringing up the project."}
2023-11-15 17:09:23,236 p=4666 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 17:09:23,236 p=4666 u=sina n=ansible | bitmail                    : ok=9    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-15 17:09:23,236 p=4666 u=sina n=ansible | git                        : ok=23   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:09:23,236 p=4666 u=sina n=ansible | obs                        : ok=24   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:15:05,802 p=6372 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 17:15:05,825 p=6372 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:15:12,208 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:12,252 p=6372 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 17:15:15,058 p=6372 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 17:15:15,077 p=6372 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:15:17,039 p=6372 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 17:15:19,051 p=6372 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 17:15:21,398 p=6372 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 17:15:21,414 p=6372 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:15:23,397 p=6372 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 17:15:25,398 p=6372 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 17:15:27,461 p=6372 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 17:15:27,475 p=6372 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 17:15:29,512 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:29,530 p=6372 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 17:15:34,054 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:34,073 p=6372 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 17:15:37,988 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:38,001 p=6372 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 17:15:41,779 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:41,794 p=6372 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 17:15:45,980 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:15:45,994 p=6372 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 17:16:22,336 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:22,347 p=6372 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 17:16:26,231 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:26,245 p=6372 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 17:16:28,831 p=6372 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 17:16:30,741 p=6372 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 17:16:32,681 p=6372 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 17:16:32,696 p=6372 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 17:16:38,315 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:38,328 p=6372 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 17:16:42,620 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:42,632 p=6372 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 17:16:48,979 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:48,991 p=6372 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 17:16:53,780 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:53,792 p=6372 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 17:16:57,569 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:16:57,584 p=6372 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 17:17:01,872 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:17:01,885 p=6372 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 17:17:05,661 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:17:05,674 p=6372 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 17:17:11,517 p=6372 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 17:17:16,529 p=6372 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 17:17:21,540 p=6372 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 17:17:27,176 p=6372 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 17:17:32,703 p=6372 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 17:17:38,075 p=6372 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 17:17:38,089 p=6372 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 17:17:41,305 p=6372 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 17:17:44,279 p=6372 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 17:17:44,296 p=6372 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 17:17:47,369 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:17:47,395 p=6372 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 17:17:50,144 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:17:50,156 p=6372 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 17:17:52,944 p=6372 u=sina n=ansible | ok: [obs]
2023-11-15 17:17:53,004 p=6372 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 17:17:53,023 p=6372 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:17:59,164 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:17:59,235 p=6372 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 17:18:01,177 p=6372 u=sina n=ansible | ok: [git] => (item=/opt/services)
2023-11-15 17:18:03,095 p=6372 u=sina n=ansible | ok: [git] => (item=/opt/services/repo)
2023-11-15 17:18:03,108 p=6372 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 17:18:05,050 p=6372 u=sina n=ansible | ok: [git] => (item=gitlab)
2023-11-15 17:18:06,891 p=6372 u=sina n=ansible | ok: [git] => (item=minio)
2023-11-15 17:18:08,733 p=6372 u=sina n=ansible | ok: [git] => (item=nexus)
2023-11-15 17:18:10,679 p=6372 u=sina n=ansible | ok: [git] => (item=sonar)
2023-11-15 17:18:12,622 p=6372 u=sina n=ansible | ok: [git] => (item=traefik)
2023-11-15 17:18:12,636 p=6372 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 17:18:14,523 p=6372 u=sina n=ansible | ok: [git] => (item=traefik/traefik)
2023-11-15 17:18:14,538 p=6372 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 17:18:18,566 p=6372 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:18:22,144 p=6372 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:18:22,156 p=6372 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 17:18:26,042 p=6372 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:18:29,738 p=6372 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:18:33,411 p=6372 u=sina n=ansible | ok: [git] => (item=nginx.conf)
2023-11-15 17:18:33,425 p=6372 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 17:18:37,012 p=6372 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:18:40,685 p=6372 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:18:40,699 p=6372 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 17:18:44,479 p=6372 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:18:44,493 p=6372 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 17:18:48,277 p=6372 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:18:51,946 p=6372 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:18:51,961 p=6372 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 17:18:55,736 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:18:55,750 p=6372 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 17:19:01,379 p=6372 u=sina n=ansible | ok: [git] => (item=git)
2023-11-15 17:19:06,805 p=6372 u=sina n=ansible | ok: [git] => (item=reg)
2023-11-15 17:19:12,202 p=6372 u=sina n=ansible | ok: [git] => (item=pages)
2023-11-15 17:19:12,228 p=6372 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:19:17,608 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:19:17,639 p=6372 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:19:23,022 p=6372 u=sina n=ansible | ok: [git] => (item=object)
2023-11-15 17:19:28,336 p=6372 u=sina n=ansible | ok: [git] => (item=io)
2023-11-15 17:19:28,349 p=6372 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 17:19:31,585 p=6372 u=sina n=ansible | ok: [git] => (item=app_net)
2023-11-15 17:19:34,551 p=6372 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 17:19:34,566 p=6372 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-15 17:19:37,233 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:19:37,255 p=6372 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 17:19:42,750 p=6372 u=sina n=ansible | ok: [git] => (item=cad)
2023-11-15 17:19:48,271 p=6372 u=sina n=ansible | ok: [git] => (item=nod)
2023-11-15 17:19:48,286 p=6372 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 17:19:50,205 p=6372 u=sina n=ansible | ok: [git] => (item=services)
2023-11-15 17:19:50,233 p=6372 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 17:19:52,173 p=6372 u=sina n=ansible | ok: [git] => (item=agents)
2023-11-15 17:19:54,065 p=6372 u=sina n=ansible | ok: [git] => (item=agents/promtail)
2023-11-15 17:19:54,092 p=6372 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 17:19:57,904 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:19:57,916 p=6372 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 17:20:01,698 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:20:01,729 p=6372 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 17:20:05,479 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:20:05,493 p=6372 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 17:20:08,869 p=6372 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 17:20:08,885 p=6372 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 17:20:11,461 p=6372 u=sina n=ansible | ok: [git]
2023-11-15 17:20:11,587 p=6372 u=sina n=ansible | PLAY [deploy mail-server , bitwarden , agents] *********************************
2023-11-15 17:20:11,638 p=6372 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:20:20,290 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:20:20,355 p=6372 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 17:20:22,832 p=6372 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 17:20:22,858 p=6372 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 17:20:25,199 p=6372 u=sina n=ansible | ok: [bitmail] => (item=traefik)
2023-11-15 17:20:25,238 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 17:20:29,920 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:20:29,933 p=6372 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 17:20:32,807 p=6372 u=sina n=ansible | ok: [bitmail] => (item=traefik/traefik)
2023-11-15 17:20:32,839 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 17:20:37,173 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:20:37,212 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 17:20:41,581 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:20:41,592 p=6372 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 17:20:48,063 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:20:48,085 p=6372 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 17:20:51,537 p=6372 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 17:20:54,893 p=6372 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 17:20:54,914 p=6372 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 17:21:00,166 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:00,219 p=6372 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-15 17:21:02,776 p=6372 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 17:21:02,807 p=6372 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-15 17:21:05,235 p=6372 u=sina n=ansible | ok: [bitmail] => (item=bitwarden)
2023-11-15 17:21:07,689 p=6372 u=sina n=ansible | ok: [bitmail] => (item=mailserver)
2023-11-15 17:21:07,719 p=6372 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-15 17:21:12,108 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:21:12,139 p=6372 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-15 17:21:16,408 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:21:16,421 p=6372 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-15 17:21:20,687 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:21:20,707 p=6372 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-15 17:21:25,069 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:21:25,095 p=6372 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-15 17:21:32,084 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:32,094 p=6372 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-15 17:21:38,946 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:38,956 p=6372 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-15 17:21:45,684 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:45,695 p=6372 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-15 17:21:52,681 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:52,692 p=6372 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-15 17:21:59,741 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:21:59,756 p=6372 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-15 17:22:06,884 p=6372 u=sina n=ansible | changed: [bitmail]
2023-11-15 17:22:06,897 p=6372 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-15 17:22:10,600 p=6372 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 17:22:14,145 p=6372 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 17:22:14,158 p=6372 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-15 17:22:18,165 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:22:18,186 p=6372 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 17:22:25,320 p=6372 u=sina n=ansible | changed: [bitmail] => (item=cad)
2023-11-15 17:22:32,214 p=6372 u=sina n=ansible | changed: [bitmail] => (item=nod)
2023-11-15 17:22:32,226 p=6372 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 17:22:34,545 p=6372 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 17:22:34,558 p=6372 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 17:22:36,878 p=6372 u=sina n=ansible | ok: [bitmail] => (item=agents)
2023-11-15 17:22:39,244 p=6372 u=sina n=ansible | ok: [bitmail] => (item=agents/promtail)
2023-11-15 17:22:39,256 p=6372 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 17:22:44,047 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:22:44,058 p=6372 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 17:22:48,343 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:22:48,354 p=6372 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 17:22:52,856 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:22:52,867 p=6372 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 17:22:56,127 p=6372 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 17:22:56,141 p=6372 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 17:22:59,279 p=6372 u=sina n=ansible | ok: [bitmail]
2023-11-15 17:22:59,328 p=6372 u=sina n=ansible | PLAY [deploy agents on ci|cd stages] *******************************************
2023-11-15 17:22:59,345 p=6372 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:23:06,783 p=6372 u=sina n=ansible | ok: [pre-product]
2023-11-15 17:23:07,844 p=6372 u=sina n=ansible | ok: [product]
2023-11-15 17:23:07,917 p=6372 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 17:23:10,997 p=6372 u=sina n=ansible | changed: [product] => (item=services)
2023-11-15 17:23:11,472 p=6372 u=sina n=ansible | changed: [pre-product] => (item=services)
2023-11-15 17:23:11,481 p=6372 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 17:23:14,373 p=6372 u=sina n=ansible | changed: [product] => (item=traefik)
2023-11-15 17:23:14,757 p=6372 u=sina n=ansible | changed: [pre-product] => (item=traefik)
2023-11-15 17:23:14,766 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 17:23:20,650 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:23:21,091 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:23:21,101 p=6372 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 17:23:24,387 p=6372 u=sina n=ansible | changed: [pre-product] => (item=traefik/traefik)
2023-11-15 17:23:24,401 p=6372 u=sina n=ansible | changed: [product] => (item=traefik/traefik)
2023-11-15 17:23:24,412 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 17:23:29,489 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:23:30,520 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:23:30,528 p=6372 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 17:23:36,081 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:23:36,965 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:23:36,975 p=6372 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 17:23:44,561 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:23:45,160 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:23:45,170 p=6372 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 17:23:50,396 p=6372 u=sina n=ansible | changed: [pre-product] => (item=app_net)
2023-11-15 17:23:50,408 p=6372 u=sina n=ansible | changed: [product] => (item=app_net)
2023-11-15 17:23:55,736 p=6372 u=sina n=ansible | changed: [product] => (item=web_net)
2023-11-15 17:23:55,877 p=6372 u=sina n=ansible | changed: [pre-product] => (item=web_net)
2023-11-15 17:23:55,887 p=6372 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 17:24:15,835 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:24:17,020 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:24:17,045 p=6372 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 17:24:25,074 p=6372 u=sina n=ansible | changed: [product] => (item=cad)
2023-11-15 17:24:25,202 p=6372 u=sina n=ansible | changed: [pre-product] => (item=cad)
2023-11-15 17:24:33,296 p=6372 u=sina n=ansible | changed: [pre-product] => (item=nod)
2023-11-15 17:24:33,342 p=6372 u=sina n=ansible | changed: [product] => (item=nod)
2023-11-15 17:24:33,353 p=6372 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 17:24:36,763 p=6372 u=sina n=ansible | ok: [product] => (item=services)
2023-11-15 17:24:37,278 p=6372 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-15 17:24:37,287 p=6372 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 17:24:40,909 p=6372 u=sina n=ansible | changed: [pre-product] => (item=agents)
2023-11-15 17:24:41,069 p=6372 u=sina n=ansible | changed: [product] => (item=agents)
2023-11-15 17:24:44,446 p=6372 u=sina n=ansible | changed: [product] => (item=agents/promtail)
2023-11-15 17:24:44,594 p=6372 u=sina n=ansible | changed: [pre-product] => (item=agents/promtail)
2023-11-15 17:24:44,604 p=6372 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 17:24:52,078 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:24:52,093 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:24:52,103 p=6372 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 17:24:57,813 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:24:59,388 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:24:59,398 p=6372 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 17:25:05,376 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:25:06,242 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:25:06,250 p=6372 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 17:25:10,951 p=6372 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-15 17:25:11,356 p=6372 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-15 17:25:11,366 p=6372 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 17:40:25,809 p=6372 u=sina n=ansible | changed: [pre-product]
2023-11-15 17:40:36,329 p=6372 u=sina n=ansible | changed: [product]
2023-11-15 17:40:36,402 p=6372 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 17:40:36,402 p=6372 u=sina n=ansible | bitmail                    : ok=32   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:40:36,402 p=6372 u=sina n=ansible | git                        : ok=23   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:40:36,402 p=6372 u=sina n=ansible | obs                        : ok=24   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:40:36,402 p=6372 u=sina n=ansible | pre-product                : ok=18   changed=15   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:40:36,403 p=6372 u=sina n=ansible | product                    : ok=18   changed=15   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 17:46:51,159 p=9547 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-15 17:46:51,182 p=9547 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:47:42,452 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:47:42,513 p=9547 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-15 17:47:45,007 p=9547 u=sina n=ansible | ok: [obs] => (item=services)
2023-11-15 17:47:45,028 p=9547 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:47:47,155 p=9547 u=sina n=ansible | ok: [obs] => (item=traefik)
2023-11-15 17:47:49,219 p=9547 u=sina n=ansible | ok: [obs] => (item=monitoring)
2023-11-15 17:47:51,254 p=9547 u=sina n=ansible | ok: [obs] => (item=logging)
2023-11-15 17:47:51,281 p=9547 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-15 17:47:53,366 p=9547 u=sina n=ansible | ok: [obs] => (item=prometheus)
2023-11-15 17:47:55,460 p=9547 u=sina n=ansible | ok: [obs] => (item=alertmanager)
2023-11-15 17:47:58,200 p=9547 u=sina n=ansible | ok: [obs] => (item=blackbox)
2023-11-15 17:47:58,216 p=9547 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-15 17:48:00,899 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:00,914 p=9547 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-15 17:48:05,074 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:05,091 p=9547 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-15 17:48:08,983 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:09,003 p=9547 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-15 17:48:12,872 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:12,891 p=9547 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-15 17:48:16,938 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:16,956 p=9547 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-15 17:48:55,354 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:55,376 p=9547 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-15 17:48:59,356 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:48:59,381 p=9547 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-15 17:49:01,425 p=9547 u=sina n=ansible | ok: [obs] => (item=logging/promtail)
2023-11-15 17:49:03,747 p=9547 u=sina n=ansible | ok: [obs] => (item=logging/loki)
2023-11-15 17:49:05,791 p=9547 u=sina n=ansible | ok: [obs] => (item=traefik/traefik)
2023-11-15 17:49:05,822 p=9547 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-15 17:49:12,166 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:12,179 p=9547 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-15 17:49:16,075 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:16,092 p=9547 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-15 17:49:21,902 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:21,916 p=9547 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-15 17:49:25,977 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:26,011 p=9547 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-15 17:49:30,019 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:30,032 p=9547 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-15 17:49:34,280 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:34,292 p=9547 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-15 17:49:38,917 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:49:38,940 p=9547 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-15 17:49:44,898 p=9547 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-15 17:49:50,461 p=9547 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-15 17:49:56,095 p=9547 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-15 17:50:05,917 p=9547 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-15 17:50:11,662 p=9547 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-15 17:50:17,181 p=9547 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-15 17:50:17,197 p=9547 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-15 17:50:20,559 p=9547 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-15 17:50:23,523 p=9547 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-15 17:50:23,542 p=9547 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-15 17:50:26,925 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:50:26,944 p=9547 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-15 17:50:29,705 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:50:29,718 p=9547 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-15 17:50:32,450 p=9547 u=sina n=ansible | ok: [obs]
2023-11-15 17:50:32,512 p=9547 u=sina n=ansible | PLAY [deploy gitlab] ***********************************************************
2023-11-15 17:50:32,532 p=9547 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 17:50:39,067 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 17:50:39,147 p=9547 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 17:50:41,086 p=9547 u=sina n=ansible | ok: [git] => (item=/opt/services)
2023-11-15 17:50:43,220 p=9547 u=sina n=ansible | ok: [git] => (item=/opt/services/repo)
2023-11-15 17:50:43,250 p=9547 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 17:50:45,311 p=9547 u=sina n=ansible | ok: [git] => (item=gitlab)
2023-11-15 17:50:47,263 p=9547 u=sina n=ansible | ok: [git] => (item=minio)
2023-11-15 17:50:49,200 p=9547 u=sina n=ansible | ok: [git] => (item=nexus)
2023-11-15 17:50:51,117 p=9547 u=sina n=ansible | ok: [git] => (item=sonar)
2023-11-15 17:50:53,089 p=9547 u=sina n=ansible | ok: [git] => (item=traefik)
2023-11-15 17:50:53,113 p=9547 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 17:50:55,145 p=9547 u=sina n=ansible | ok: [git] => (item=traefik/traefik)
2023-11-15 17:50:55,177 p=9547 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 17:50:59,009 p=9547 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:51:02,638 p=9547 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:51:02,653 p=9547 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 17:51:06,716 p=9547 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:51:10,560 p=9547 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:51:14,294 p=9547 u=sina n=ansible | ok: [git] => (item=nginx.conf)
2023-11-15 17:51:14,320 p=9547 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 17:51:18,044 p=9547 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:51:21,852 p=9547 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:51:21,880 p=9547 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 17:51:25,859 p=9547 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:51:25,881 p=9547 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 17:51:29,649 p=9547 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 17:51:33,741 p=9547 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 17:51:33,755 p=9547 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 17:51:37,337 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 17:51:37,351 p=9547 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 17:51:43,011 p=9547 u=sina n=ansible | ok: [git] => (item=git)
2023-11-15 17:51:48,646 p=9547 u=sina n=ansible | ok: [git] => (item=reg)
2023-11-15 17:51:54,229 p=9547 u=sina n=ansible | ok: [git] => (item=pages)
2023-11-15 17:51:54,249 p=9547 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:51:59,634 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 17:51:59,651 p=9547 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 17:52:05,240 p=9547 u=sina n=ansible | ok: [git] => (item=object)
2023-11-15 17:52:10,762 p=9547 u=sina n=ansible | ok: [git] => (item=io)
2023-11-15 17:52:10,786 p=9547 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 17:52:14,416 p=9547 u=sina n=ansible | ok: [git] => (item=app_net)
2023-11-15 17:52:17,486 p=9547 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 17:52:17,508 p=9547 u=sina n=ansible | TASK [repo : deploty traefik Compose stack] ************************************
2023-11-15 17:52:39,487 p=9547 u=sina n=ansible | changed: [git]
2023-11-15 17:52:39,507 p=9547 u=sina n=ansible | TASK [repo : deploty gitlab Compose stack] *************************************
2023-11-15 17:59:59,304 p=9547 u=sina n=ansible | changed: [git]
2023-11-15 17:59:59,317 p=9547 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-15 18:00:02,190 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 18:00:02,232 p=9547 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 18:00:10,262 p=9547 u=sina n=ansible | ok: [git] => (item=cad)
2023-11-15 18:00:15,793 p=9547 u=sina n=ansible | ok: [git] => (item=nod)
2023-11-15 18:00:15,811 p=9547 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 18:00:17,754 p=9547 u=sina n=ansible | ok: [git] => (item=services)
2023-11-15 18:00:17,767 p=9547 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 18:00:19,783 p=9547 u=sina n=ansible | ok: [git] => (item=agents)
2023-11-15 18:00:21,678 p=9547 u=sina n=ansible | ok: [git] => (item=agents/promtail)
2023-11-15 18:00:21,691 p=9547 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 18:00:27,358 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 18:00:27,378 p=9547 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 18:00:31,119 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 18:00:31,132 p=9547 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 18:00:35,037 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 18:00:35,060 p=9547 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 18:00:38,005 p=9547 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 18:00:38,019 p=9547 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 18:00:40,645 p=9547 u=sina n=ansible | ok: [git]
2023-11-15 18:00:40,735 p=9547 u=sina n=ansible | PLAY [deploy mail-server , bitwarden , agents] *********************************
2023-11-15 18:00:40,768 p=9547 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:00:49,154 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:00:49,182 p=9547 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 18:00:51,430 p=9547 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 18:00:51,442 p=9547 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 18:00:53,672 p=9547 u=sina n=ansible | ok: [bitmail] => (item=traefik)
2023-11-15 18:00:53,685 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 18:00:57,897 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:00:57,909 p=9547 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 18:01:00,149 p=9547 u=sina n=ansible | ok: [bitmail] => (item=traefik/traefik)
2023-11-15 18:01:00,162 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 18:01:04,343 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:04,354 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 18:01:08,686 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:08,696 p=9547 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 18:01:14,898 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:14,913 p=9547 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 18:01:18,583 p=9547 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 18:01:21,934 p=9547 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 18:01:21,947 p=9547 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 18:01:24,952 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:24,974 p=9547 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-15 18:01:27,345 p=9547 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 18:01:27,359 p=9547 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-15 18:01:29,735 p=9547 u=sina n=ansible | ok: [bitmail] => (item=bitwarden)
2023-11-15 18:01:31,982 p=9547 u=sina n=ansible | ok: [bitmail] => (item=mailserver)
2023-11-15 18:01:31,995 p=9547 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-15 18:01:36,290 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:36,300 p=9547 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-15 18:01:40,654 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:40,667 p=9547 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-15 18:01:45,203 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:45,213 p=9547 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-15 18:01:49,576 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:49,587 p=9547 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-15 18:01:55,602 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:01:55,612 p=9547 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-15 18:02:01,483 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:01,504 p=9547 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-15 18:02:07,317 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:07,329 p=9547 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-15 18:02:13,427 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:13,438 p=9547 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-15 18:02:19,534 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:19,546 p=9547 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-15 18:02:25,986 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:25,999 p=9547 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-15 18:02:29,340 p=9547 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-15 18:02:32,617 p=9547 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 18:02:32,627 p=9547 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-15 18:02:35,520 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:35,541 p=9547 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 18:02:41,323 p=9547 u=sina n=ansible | ok: [bitmail] => (item=cad)
2023-11-15 18:02:47,147 p=9547 u=sina n=ansible | ok: [bitmail] => (item=nod)
2023-11-15 18:02:47,161 p=9547 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 18:02:49,511 p=9547 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-15 18:02:49,523 p=9547 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 18:02:51,762 p=9547 u=sina n=ansible | ok: [bitmail] => (item=agents)
2023-11-15 18:02:54,012 p=9547 u=sina n=ansible | ok: [bitmail] => (item=agents/promtail)
2023-11-15 18:02:54,027 p=9547 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 18:02:58,413 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:02:58,425 p=9547 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 18:03:02,720 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:03:02,731 p=9547 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 18:03:07,016 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:03:07,027 p=9547 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 18:03:10,398 p=9547 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-15 18:03:10,411 p=9547 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 18:03:13,266 p=9547 u=sina n=ansible | ok: [bitmail]
2023-11-15 18:03:13,316 p=9547 u=sina n=ansible | PLAY [deploy agents on ci|cd stages] *******************************************
2023-11-15 18:03:13,333 p=9547 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:03:21,380 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:03:21,860 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:03:21,905 p=9547 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 18:03:25,120 p=9547 u=sina n=ansible | ok: [product] => (item=services)
2023-11-15 18:03:25,239 p=9547 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-15 18:03:25,259 p=9547 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 18:03:28,490 p=9547 u=sina n=ansible | ok: [product] => (item=traefik)
2023-11-15 18:03:28,549 p=9547 u=sina n=ansible | ok: [pre-product] => (item=traefik)
2023-11-15 18:03:28,561 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 18:03:34,277 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:03:34,858 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:03:34,869 p=9547 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 18:03:38,140 p=9547 u=sina n=ansible | ok: [product] => (item=traefik/traefik)
2023-11-15 18:03:38,168 p=9547 u=sina n=ansible | ok: [pre-product] => (item=traefik/traefik)
2023-11-15 18:03:38,182 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 18:03:44,563 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:03:44,620 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:03:44,634 p=9547 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 18:03:50,546 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:03:50,753 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:03:50,765 p=9547 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 18:03:58,108 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:03:58,119 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:03:58,139 p=9547 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 18:04:02,619 p=9547 u=sina n=ansible | ok: [product] => (item=app_net)
2023-11-15 18:04:03,305 p=9547 u=sina n=ansible | ok: [pre-product] => (item=app_net)
2023-11-15 18:04:06,553 p=9547 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-15 18:04:07,848 p=9547 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-15 18:04:07,860 p=9547 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 18:04:12,033 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:04:12,039 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:04:12,073 p=9547 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 18:04:19,189 p=9547 u=sina n=ansible | ok: [product] => (item=cad)
2023-11-15 18:04:19,204 p=9547 u=sina n=ansible | ok: [pre-product] => (item=cad)
2023-11-15 18:04:25,958 p=9547 u=sina n=ansible | ok: [pre-product] => (item=nod)
2023-11-15 18:04:26,473 p=9547 u=sina n=ansible | ok: [product] => (item=nod)
2023-11-15 18:04:26,493 p=9547 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 18:04:29,489 p=9547 u=sina n=ansible | ok: [product] => (item=services)
2023-11-15 18:04:29,979 p=9547 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-15 18:04:29,991 p=9547 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 18:04:32,965 p=9547 u=sina n=ansible | ok: [product] => (item=agents)
2023-11-15 18:04:33,598 p=9547 u=sina n=ansible | ok: [pre-product] => (item=agents)
2023-11-15 18:04:35,618 p=9547 u=sina n=ansible | ok: [product] => (item=agents/promtail)
2023-11-15 18:04:36,402 p=9547 u=sina n=ansible | ok: [pre-product] => (item=agents/promtail)
2023-11-15 18:04:36,417 p=9547 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 18:04:42,587 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:04:42,645 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:04:42,662 p=9547 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 18:04:48,539 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:04:48,994 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:04:49,004 p=9547 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 18:04:54,857 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:04:55,333 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:04:55,344 p=9547 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 18:05:00,437 p=9547 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-15 18:05:00,667 p=9547 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-15 18:05:00,688 p=9547 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 18:05:04,223 p=9547 u=sina n=ansible | ok: [product]
2023-11-15 18:05:04,769 p=9547 u=sina n=ansible | ok: [pre-product]
2023-11-15 18:05:04,913 p=9547 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 18:05:04,914 p=9547 u=sina n=ansible | bitmail                    : ok=32   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:05:04,914 p=9547 u=sina n=ansible | git                        : ok=25   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:05:04,914 p=9547 u=sina n=ansible | obs                        : ok=24   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:05:04,914 p=9547 u=sina n=ansible | pre-product                : ok=18   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:05:04,914 p=9547 u=sina n=ansible | product                    : ok=18   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:35:30,934 p=13693 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.53",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.106.162",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_PASS": "{SHA}SRSnWnVykgo0vO7Ojo6Ulr2pIzA=",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-15 18:36:24,126 p=13897 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:36:24,176 p=13897 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:36:24,438 p=13897 u=sina n=ansible | fatal: [git]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '188.213.199.200' (ED25519) to the list of known hosts.\r\n\"System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8).\"\nConnection closed by 188.213.199.200 port 22", "unreachable": true}
2023-11-15 18:36:24,440 p=13897 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 18:36:24,440 p=13897 u=sina n=ansible | git                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:37:19,098 p=14058 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:37:19,165 p=14058 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:37:19,427 p=14058 u=sina n=ansible | fatal: [git]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '188.213.199.200' (ED25519) to the list of known hosts.\r\n\"System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8).\"\nConnection closed by 188.213.199.200 port 22", "unreachable": true}
2023-11-15 18:37:19,429 p=14058 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 18:37:19,429 p=14058 u=sina n=ansible | git                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:37:29,065 p=14073 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:37:29,127 p=14073 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:37:29,371 p=14073 u=sina n=ansible | fatal: [git]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '188.213.199.200' (ED25519) to the list of known hosts.\r\n\"System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8).\"\nConnection closed by 188.213.199.200 port 22", "unreachable": true}
2023-11-15 18:37:29,373 p=14073 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 18:37:29,374 p=14073 u=sina n=ansible | git                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:37:31,421 p=14087 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:37:31,487 p=14087 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:37:31,807 p=14087 u=sina n=ansible | fatal: [git]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '188.213.199.200' (ED25519) to the list of known hosts.\r\n\"System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8).\"\nConnection closed by 188.213.199.200 port 22", "unreachable": true}
2023-11-15 18:37:31,809 p=14087 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 18:37:31,809 p=14087 u=sina n=ansible | git                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 18:38:14,604 p=14178 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:38:14,671 p=14178 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:38:20,460 p=14178 u=sina n=ansible | ok: [git]
2023-11-15 18:38:20,490 p=14178 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-15 18:39:07,278 p=14178 u=sina n=ansible | changed: [git]
2023-11-15 18:39:07,291 p=14178 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-15 18:40:05,338 p=14178 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 18:40:31,134 p=14408 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:40:31,196 p=14408 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:40:36,500 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:40:36,525 p=14408 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-15 18:40:39,213 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:40:39,234 p=14408 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-15 18:42:02,123 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:02,138 p=14408 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-15 18:42:06,738 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:06,755 p=14408 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-15 18:42:10,834 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:10,846 p=14408 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-15 18:42:14,164 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:14,174 p=14408 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-15 18:42:17,646 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:17,666 p=14408 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-15 18:42:19,718 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/cron.d)
2023-11-15 18:42:21,541 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/cron.daily)
2023-11-15 18:42:23,247 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/cron.hourly)
2023-11-15 18:42:25,061 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/cron.weekly)
2023-11-15 18:42:27,875 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/cron.monthly)
2023-11-15 18:42:29,535 p=14408 u=sina n=ansible | changed: [git] => (item=/boot/grub/grub.cfg)
2023-11-15 18:42:31,563 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/crontab)
2023-11-15 18:42:31,579 p=14408 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-15 18:42:34,071 p=14408 u=sina n=ansible | changed: [git] => (item=/usr/bin/as)
2023-11-15 18:42:35,909 p=14408 u=sina n=ansible | changed: [git] => (item=/etc/ssh/sshd_config)
2023-11-15 18:42:35,924 p=14408 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-15 18:42:39,316 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:39,330 p=14408 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-15 18:42:41,346 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:41,363 p=14408 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-15 18:42:43,150 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:43,174 p=14408 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-15 18:42:46,649 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:46,659 p=14408 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-15 18:42:50,497 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:50,506 p=14408 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-15 18:42:54,169 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:54,187 p=14408 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-15 18:42:56,051 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:56,065 p=14408 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-15 18:42:59,269 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:42:59,284 p=14408 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-15 18:43:01,296 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:01,317 p=14408 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-15 18:43:04,570 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:43:04,600 p=14408 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-15 18:43:10,047 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:10,058 p=14408 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-15 18:43:14,196 p=14408 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 18:43:14,196 p=14408 u=sina n=ansible | ...ignoring
2023-11-15 18:43:14,206 p=14408 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-15 18:43:18,671 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:18,683 p=14408 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-15 18:43:20,806 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:20,826 p=14408 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-15 18:43:23,373 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:43:23,394 p=14408 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-15 18:43:27,572 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:27,588 p=14408 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-15 18:43:31,480 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:31,509 p=14408 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-15 18:43:35,021 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:35,048 p=14408 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-15 18:43:35,071 p=14408 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-15 18:43:37,591 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:37,601 p=14408 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-15 18:43:41,205 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:41,216 p=14408 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-15 18:43:45,133 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:45,148 p=14408 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-15 18:43:49,650 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:49,661 p=14408 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-15 18:43:51,239 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:51,249 p=14408 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-15 18:43:52,879 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:43:52,892 p=14408 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-15 18:43:54,656 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:54,672 p=14408 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-15 18:43:56,692 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:56,705 p=14408 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-15 18:43:58,302 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:43:58,315 p=14408 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-15 18:44:00,200 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:00,212 p=14408 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-15 18:44:02,141 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:02,158 p=14408 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-15 18:44:03,869 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:03,882 p=14408 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-15 18:44:05,754 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:05,766 p=14408 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-15 18:44:07,368 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:07,384 p=14408 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-15 18:44:11,743 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:11,755 p=14408 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-15 18:44:14,051 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:14,065 p=14408 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-15 18:44:16,777 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:16,792 p=14408 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-15 18:44:21,608 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:21,618 p=14408 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-15 18:44:25,304 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:25,318 p=14408 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-15 18:44:29,134 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:29,144 p=14408 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-15 18:44:30,700 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:30,710 p=14408 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-15 18:44:32,492 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:32,502 p=14408 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-15 18:44:34,303 p=14408 u=sina n=ansible | ok: [git]
2023-11-15 18:44:34,312 p=14408 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-15 18:44:36,112 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:36,127 p=14408 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-15 18:44:37,977 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:37,997 p=14408 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-15 18:44:40,227 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:44:40,238 p=14408 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-15 18:44:42,533 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 18:44:44,141 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 18:44:45,737 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 18:44:47,416 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 18:44:49,383 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 18:44:52,353 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 18:44:54,664 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 18:44:56,681 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 18:44:58,382 p=14408 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 18:44:58,394 p=14408 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-15 18:45:00,097 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:45:00,109 p=14408 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-15 18:45:07,863 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:45:07,884 p=14408 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-15 18:45:11,824 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:45:11,833 p=14408 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-15 18:45:13,534 p=14408 u=sina n=ansible | changed: [git]
2023-11-15 18:45:13,562 p=14408 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-15 18:45:52,715 p=14408 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-15 18:47:18,753 p=14408 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 18:47:21,002 p=15503 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:47:21,069 p=15503 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 18:47:30,546 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:47:30,572 p=15503 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-15 18:47:33,775 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:47:33,790 p=15503 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-15 18:48:13,592 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:13,607 p=15503 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-15 18:48:17,214 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:17,227 p=15503 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-15 18:48:20,798 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:20,814 p=15503 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-15 18:48:25,432 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:25,443 p=15503 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-15 18:48:29,789 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:29,799 p=15503 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-15 18:48:32,070 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/cron.d)
2023-11-15 18:48:34,312 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/cron.daily)
2023-11-15 18:48:36,700 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/cron.hourly)
2023-11-15 18:48:38,678 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/cron.weekly)
2023-11-15 18:48:40,421 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/cron.monthly)
2023-11-15 18:48:42,383 p=15503 u=sina n=ansible | ok: [git] => (item=/boot/grub/grub.cfg)
2023-11-15 18:48:44,950 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/crontab)
2023-11-15 18:48:44,965 p=15503 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-15 18:48:46,796 p=15503 u=sina n=ansible | ok: [git] => (item=/usr/bin/as)
2023-11-15 18:48:48,737 p=15503 u=sina n=ansible | ok: [git] => (item=/etc/ssh/sshd_config)
2023-11-15 18:48:48,755 p=15503 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-15 18:48:51,842 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:51,852 p=15503 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-15 18:48:53,779 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:53,788 p=15503 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-15 18:48:55,767 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:48:55,781 p=15503 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-15 18:49:00,277 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:00,290 p=15503 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-15 18:49:03,833 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:03,843 p=15503 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-15 18:49:07,634 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:07,645 p=15503 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-15 18:49:09,380 p=15503 u=sina n=ansible | changed: [git]
2023-11-15 18:49:09,395 p=15503 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-15 18:49:12,864 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:12,874 p=15503 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-15 18:49:14,616 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:14,625 p=15503 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-15 18:49:17,858 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:17,868 p=15503 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-15 18:49:21,759 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:21,769 p=15503 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-15 18:49:25,541 p=15503 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 18:49:25,542 p=15503 u=sina n=ansible | ...ignoring
2023-11-15 18:49:25,554 p=15503 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-15 18:49:28,704 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:28,714 p=15503 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-15 18:49:30,861 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:30,875 p=15503 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-15 18:49:33,496 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:33,506 p=15503 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-15 18:49:37,640 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:37,650 p=15503 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-15 18:49:41,895 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:41,905 p=15503 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-15 18:49:45,110 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:45,121 p=15503 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-15 18:49:45,156 p=15503 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-15 18:49:47,128 p=15503 u=sina n=ansible | changed: [git]
2023-11-15 18:49:47,137 p=15503 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-15 18:49:50,953 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:50,965 p=15503 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-15 18:49:54,518 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:54,528 p=15503 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-15 18:49:57,729 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:57,740 p=15503 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-15 18:49:59,508 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:49:59,517 p=15503 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-15 18:50:01,161 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:01,175 p=15503 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-15 18:50:03,077 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:03,087 p=15503 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-15 18:50:04,705 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:04,715 p=15503 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-15 18:50:06,338 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:06,356 p=15503 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-15 18:50:08,183 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:08,194 p=15503 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-15 18:50:10,095 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:10,110 p=15503 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-15 18:50:11,669 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:11,679 p=15503 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-15 18:50:13,263 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:13,272 p=15503 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-15 18:50:14,956 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:14,969 p=15503 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-15 18:50:18,186 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:18,197 p=15503 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-15 18:50:20,237 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:20,258 p=15503 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-15 18:50:22,147 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:22,162 p=15503 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-15 18:50:25,365 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:25,374 p=15503 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-15 18:50:28,665 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:28,676 p=15503 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-15 18:50:32,075 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:32,086 p=15503 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-15 18:50:33,646 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:33,656 p=15503 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-15 18:50:35,681 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:35,689 p=15503 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-15 18:50:37,965 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:37,978 p=15503 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-15 18:50:40,375 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:40,392 p=15503 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-15 18:50:42,104 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:42,115 p=15503 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-15 18:50:44,186 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:50:44,199 p=15503 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-15 18:50:46,150 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 18:50:47,731 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 18:50:49,797 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 18:50:51,717 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 18:50:53,252 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 18:50:55,253 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 18:50:58,126 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 18:50:59,806 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 18:51:01,582 p=15503 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 18:51:01,598 p=15503 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-15 18:51:03,149 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:51:03,160 p=15503 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-15 18:51:07,579 p=15503 u=sina n=ansible | changed: [git]
2023-11-15 18:51:07,589 p=15503 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-15 18:51:12,608 p=15503 u=sina n=ansible | ok: [git]
2023-11-15 18:51:12,630 p=15503 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-15 18:53:05,680 p=15503 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 18:53:07,501 p=16617 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 18:53:07,559 p=16617 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 19:00:08,350 p=4244 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 19:00:08,604 p=4244 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 19:00:15,283 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:15,462 p=4244 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-15 19:00:19,873 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:19,922 p=4244 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-15 19:00:30,232 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:30,311 p=4244 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-15 19:00:38,488 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:38,506 p=4244 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-15 19:00:44,147 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:44,175 p=4244 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-15 19:00:47,523 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:47,542 p=4244 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-15 19:00:53,170 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:00:53,207 p=4244 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-15 19:00:55,431 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/cron.d)
2023-11-15 19:00:57,483 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/cron.daily)
2023-11-15 19:00:59,525 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/cron.hourly)
2023-11-15 19:01:03,253 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/cron.weekly)
2023-11-15 19:01:05,236 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/cron.monthly)
2023-11-15 19:01:07,233 p=4244 u=sina n=ansible | ok: [git] => (item=/boot/grub/grub.cfg)
2023-11-15 19:01:09,178 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/crontab)
2023-11-15 19:01:09,202 p=4244 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-15 19:01:11,402 p=4244 u=sina n=ansible | ok: [git] => (item=/usr/bin/as)
2023-11-15 19:01:13,244 p=4244 u=sina n=ansible | ok: [git] => (item=/etc/ssh/sshd_config)
2023-11-15 19:01:13,260 p=4244 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-15 19:01:17,154 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:17,168 p=4244 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-15 19:01:19,610 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:19,635 p=4244 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-15 19:01:21,652 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:21,678 p=4244 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-15 19:01:26,701 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:26,725 p=4244 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-15 19:01:32,099 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:32,132 p=4244 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-15 19:01:36,180 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:36,193 p=4244 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-15 19:01:38,008 p=4244 u=sina n=ansible | changed: [git]
2023-11-15 19:01:38,021 p=4244 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-15 19:01:41,539 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:41,554 p=4244 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-15 19:01:43,288 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:43,320 p=4244 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-15 19:01:46,740 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:46,772 p=4244 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-15 19:01:50,578 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:50,611 p=4244 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-15 19:01:53,949 p=4244 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 19:01:53,950 p=4244 u=sina n=ansible | ...ignoring
2023-11-15 19:01:53,972 p=4244 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-15 19:01:56,914 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:01:56,924 p=4244 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-15 19:02:00,041 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:00,076 p=4244 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-15 19:02:02,242 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:02,259 p=4244 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-15 19:02:05,703 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:05,728 p=4244 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-15 19:02:08,842 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:08,860 p=4244 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-15 19:02:12,744 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:12,773 p=4244 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-15 19:02:12,854 p=4244 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-15 19:02:15,667 p=4244 u=sina n=ansible | changed: [git]
2023-11-15 19:02:15,710 p=4244 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-15 19:02:20,390 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:20,428 p=4244 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-15 19:02:27,361 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:27,370 p=4244 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-15 19:02:33,390 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:33,420 p=4244 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-15 19:02:35,329 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:35,339 p=4244 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-15 19:02:37,402 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:37,446 p=4244 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-15 19:02:39,751 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:39,762 p=4244 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-15 19:02:41,689 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:41,710 p=4244 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-15 19:02:43,669 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:43,704 p=4244 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-15 19:02:45,455 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:45,474 p=4244 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-15 19:02:47,276 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:47,293 p=4244 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-15 19:02:48,906 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:48,915 p=4244 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-15 19:02:50,638 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:50,658 p=4244 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-15 19:02:52,324 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:52,337 p=4244 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-15 19:02:55,825 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:55,841 p=4244 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-15 19:02:58,137 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:02:58,164 p=4244 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-15 19:03:00,124 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:00,145 p=4244 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-15 19:03:03,807 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:03,825 p=4244 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-15 19:03:07,202 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:07,214 p=4244 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-15 19:03:11,315 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:11,325 p=4244 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-15 19:03:13,200 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:13,215 p=4244 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-15 19:03:15,702 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:15,739 p=4244 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-15 19:03:19,689 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:19,711 p=4244 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-15 19:03:23,607 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:23,630 p=4244 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-15 19:03:27,453 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:27,463 p=4244 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-15 19:03:30,886 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:03:30,933 p=4244 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-15 19:03:34,333 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 19:03:37,680 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 19:03:40,241 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 19:03:45,190 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 19:03:49,849 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 19:03:53,963 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 19:03:57,671 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 19:04:02,363 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 19:04:06,185 p=4244 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 19:04:06,202 p=4244 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-15 19:04:09,097 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:04:09,107 p=4244 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-15 19:04:17,951 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:04:17,974 p=4244 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-15 19:04:22,056 p=4244 u=sina n=ansible | ok: [git]
2023-11-15 19:04:22,067 p=4244 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-15 19:04:24,184 p=4244 u=sina n=ansible | changed: [git]
2023-11-15 19:04:24,233 p=4244 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-15 19:06:03,258 p=4244 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-15 19:08:29,208 p=4244 u=sina n=ansible | changed: [git] => (item=gnupg-agent)
2023-11-15 19:08:40,123 p=4244 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-15 19:08:40,153 p=4244 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-15 19:09:50,607 p=4244 u=sina n=ansible | changed: [git] => (item=docker)
2023-11-15 19:11:02,741 p=4244 u=sina n=ansible | changed: [git] => (item=docker-compose)
2023-11-15 19:11:02,762 p=4244 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-15 19:11:06,305 p=4244 u=sina n=ansible | changed: [git]
2023-11-15 19:11:06,327 p=4244 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-15 19:11:53,716 p=4244 u=sina n=ansible | changed: [git]
2023-11-15 19:11:53,729 p=4244 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-15 19:14:46,541 p=4244 u=sina n=ansible | changed: [git] => (item=docker-ce)
2023-11-15 19:15:24,884 p=4244 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-15 19:30:26,342 p=5089 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 19:30:26,409 p=5089 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 19:30:31,649 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:30:31,678 p=5089 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-15 19:30:34,370 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:30:34,382 p=5089 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-15 19:31:44,421 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:31:44,433 p=5089 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-15 19:31:47,917 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:31:47,933 p=5089 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-15 19:31:51,237 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:31:51,248 p=5089 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-15 19:31:54,129 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:31:54,141 p=5089 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-15 19:31:57,126 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:31:57,139 p=5089 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-15 19:31:58,847 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/cron.d)
2023-11-15 19:32:00,664 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/cron.daily)
2023-11-15 19:32:02,294 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/cron.hourly)
2023-11-15 19:32:03,989 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/cron.weekly)
2023-11-15 19:32:05,627 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/cron.monthly)
2023-11-15 19:32:07,223 p=5089 u=sina n=ansible | ok: [git] => (item=/boot/grub/grub.cfg)
2023-11-15 19:32:08,846 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/crontab)
2023-11-15 19:32:08,859 p=5089 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-15 19:32:10,478 p=5089 u=sina n=ansible | ok: [git] => (item=/usr/bin/as)
2023-11-15 19:32:12,111 p=5089 u=sina n=ansible | ok: [git] => (item=/etc/ssh/sshd_config)
2023-11-15 19:32:12,127 p=5089 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-15 19:32:16,102 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:16,112 p=5089 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-15 19:32:17,887 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:17,902 p=5089 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-15 19:32:19,478 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:19,490 p=5089 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-15 19:32:22,603 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:22,617 p=5089 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-15 19:32:25,605 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:25,622 p=5089 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-15 19:32:28,655 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:28,673 p=5089 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-15 19:32:30,551 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:32:30,564 p=5089 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-15 19:32:34,116 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:34,131 p=5089 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-15 19:32:35,765 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:35,778 p=5089 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-15 19:32:38,865 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:38,886 p=5089 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-15 19:32:42,555 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:42,569 p=5089 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-15 19:32:45,788 p=5089 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-15 19:32:45,788 p=5089 u=sina n=ansible | ...ignoring
2023-11-15 19:32:45,798 p=5089 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-15 19:32:48,980 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:48,997 p=5089 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-15 19:32:51,009 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:51,023 p=5089 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-15 19:32:53,198 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:53,208 p=5089 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-15 19:32:56,208 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:56,220 p=5089 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-15 19:32:59,454 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:32:59,466 p=5089 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-15 19:33:03,014 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:03,035 p=5089 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-15 19:33:03,063 p=5089 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-15 19:33:05,010 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:33:05,023 p=5089 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-15 19:33:08,110 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:08,123 p=5089 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-15 19:33:11,180 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:11,190 p=5089 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-15 19:33:14,264 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:14,275 p=5089 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-15 19:33:15,775 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:15,786 p=5089 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-15 19:33:17,421 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:17,432 p=5089 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-15 19:33:19,032 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:19,043 p=5089 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-15 19:33:20,624 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:20,636 p=5089 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-15 19:33:22,160 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:22,169 p=5089 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-15 19:33:23,672 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:23,687 p=5089 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-15 19:33:25,265 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:25,276 p=5089 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-15 19:33:26,927 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:26,938 p=5089 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-15 19:33:28,566 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:28,579 p=5089 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-15 19:33:30,255 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:30,268 p=5089 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-15 19:33:33,996 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:34,010 p=5089 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-15 19:33:36,473 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:36,484 p=5089 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-15 19:33:38,225 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:38,236 p=5089 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-15 19:33:41,328 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:41,345 p=5089 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-15 19:33:44,506 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:44,515 p=5089 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-15 19:33:47,510 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:47,532 p=5089 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-15 19:33:49,147 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:49,167 p=5089 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-15 19:33:50,707 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:50,718 p=5089 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-15 19:33:52,282 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:52,313 p=5089 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-15 19:33:53,943 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:53,966 p=5089 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-15 19:33:55,536 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:55,562 p=5089 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-15 19:33:57,676 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:33:57,705 p=5089 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-15 19:33:59,633 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-15 19:34:01,111 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-15 19:34:02,647 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-15 19:34:04,382 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-15 19:34:05,904 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-15 19:34:07,567 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-15 19:34:10,581 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-15 19:34:12,107 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-15 19:34:13,692 p=5089 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-15 19:34:13,714 p=5089 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-15 19:34:15,301 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:34:15,325 p=5089 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-15 19:34:19,721 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:34:19,738 p=5089 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-15 19:34:23,414 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:34:23,426 p=5089 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-15 19:34:24,999 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:34:25,022 p=5089 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-15 19:36:41,261 p=5089 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-15 19:38:21,148 p=5089 u=sina n=ansible | ok: [git] => (item=gnupg-agent)
2023-11-15 19:41:01,718 p=5089 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-15 19:41:01,737 p=5089 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-15 19:41:16,169 p=5089 u=sina n=ansible | ok: [git] => (item=docker)
2023-11-15 19:41:19,182 p=5089 u=sina n=ansible | ok: [git] => (item=docker-compose)
2023-11-15 19:41:19,194 p=5089 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-15 19:41:23,420 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:41:23,434 p=5089 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-15 19:41:33,142 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:41:33,156 p=5089 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-15 19:41:48,204 p=5089 u=sina n=ansible | ok: [git] => (item=docker-ce)
2023-11-15 19:42:58,330 p=5089 u=sina n=ansible | ok: [git] => (item=docker-ce-cli)
2023-11-15 19:43:39,969 p=5089 u=sina n=ansible | ok: [git] => (item=containerd.io)
2023-11-15 19:43:39,994 p=5089 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-15 19:43:57,020 p=5089 u=sina n=ansible | ok: [git]
2023-11-15 19:43:57,036 p=5089 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-15 19:44:11,087 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:44:11,100 p=5089 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-15 19:44:16,481 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:44:16,515 p=5089 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 19:44:18,266 p=5089 u=sina n=ansible | changed: [git] => (item=/opt/services)
2023-11-15 19:44:19,789 p=5089 u=sina n=ansible | changed: [git] => (item=/opt/services/repo)
2023-11-15 19:44:19,807 p=5089 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 19:44:21,496 p=5089 u=sina n=ansible | changed: [git] => (item=gitlab)
2023-11-15 19:44:23,143 p=5089 u=sina n=ansible | changed: [git] => (item=minio)
2023-11-15 19:44:24,732 p=5089 u=sina n=ansible | changed: [git] => (item=nexus)
2023-11-15 19:44:26,285 p=5089 u=sina n=ansible | changed: [git] => (item=sonar)
2023-11-15 19:44:27,885 p=5089 u=sina n=ansible | changed: [git] => (item=traefik)
2023-11-15 19:44:27,906 p=5089 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 19:44:29,588 p=5089 u=sina n=ansible | changed: [git] => (item=traefik/traefik)
2023-11-15 19:44:29,606 p=5089 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 19:44:33,120 p=5089 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 19:44:36,239 p=5089 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 19:44:36,255 p=5089 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 19:44:39,321 p=5089 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 19:44:42,446 p=5089 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 19:44:45,620 p=5089 u=sina n=ansible | changed: [git] => (item=nginx.conf)
2023-11-15 19:44:45,637 p=5089 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 19:44:48,931 p=5089 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 19:44:52,259 p=5089 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 19:44:52,272 p=5089 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 19:44:55,428 p=5089 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 19:44:55,442 p=5089 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 19:44:58,616 p=5089 u=sina n=ansible | changed: [git] => (item=compose.yml)
2023-11-15 19:45:01,804 p=5089 u=sina n=ansible | changed: [git] => (item=.env)
2023-11-15 19:45:01,818 p=5089 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 19:45:05,045 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:45:05,056 p=5089 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 19:45:11,685 p=5089 u=sina n=ansible | changed: [git] => (item=git)
2023-11-15 19:45:18,194 p=5089 u=sina n=ansible | changed: [git] => (item=reg)
2023-11-15 19:45:25,814 p=5089 u=sina n=ansible | changed: [git] => (item=pages)
2023-11-15 19:45:25,831 p=5089 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 19:45:33,205 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:45:33,242 p=5089 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 19:45:39,695 p=5089 u=sina n=ansible | changed: [git] => (item=object)
2023-11-15 19:45:45,585 p=5089 u=sina n=ansible | changed: [git] => (item=io)
2023-11-15 19:45:45,600 p=5089 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 19:45:48,475 p=5089 u=sina n=ansible | changed: [git] => (item=app_net)
2023-11-15 19:45:50,964 p=5089 u=sina n=ansible | changed: [git] => (item=web_net)
2023-11-15 19:45:50,978 p=5089 u=sina n=ansible | TASK [repo : deploty traefik Compose stack] ************************************
2023-11-15 19:46:12,469 p=5089 u=sina n=ansible | changed: [git]
2023-11-15 19:46:12,486 p=5089 u=sina n=ansible | TASK [repo : deploty gitlab Compose stack] *************************************
2023-11-15 19:52:13,368 p=5089 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "errors": [], "module_stderr": "Creating gitlab ... \n", "module_stdout": "16.4.0-ce.0: Pulling from gitlab/gitlab-ce\nDigest: sha256:62ffb301cf9da4bbd913501bed7f9a31f037c6fdb4427ca8cfabf5b2aac7e3a6\nStatus: Downloaded newer image for gitlab/gitlab-ce:16.4.0-ce.0\n", "msg": "Error starting project UnixHTTPConnectionPool(host='localhost', port=None): Read timed out. (read timeout=60)"}
2023-11-15 19:52:13,370 p=5089 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 19:52:13,370 p=5089 u=sina n=ansible | git                        : ok=80   changed=20   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-15 19:56:51,782 p=10755 u=sina n=ansible | PLAY [run DB] ******************************************************************
2023-11-15 19:56:51,814 p=10755 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 19:56:57,189 p=10755 u=sina n=ansible | ok: [git]
2023-11-15 19:56:57,227 p=10755 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-15 19:57:01,499 p=10755 u=sina n=ansible | ok: [git] => (item=/opt/services)
2023-11-15 19:57:03,198 p=10755 u=sina n=ansible | ok: [git] => (item=/opt/services/repo)
2023-11-15 19:57:03,214 p=10755 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-15 19:57:05,222 p=10755 u=sina n=ansible | ok: [git] => (item=gitlab)
2023-11-15 19:57:06,903 p=10755 u=sina n=ansible | ok: [git] => (item=minio)
2023-11-15 19:57:08,606 p=10755 u=sina n=ansible | ok: [git] => (item=nexus)
2023-11-15 19:57:10,345 p=10755 u=sina n=ansible | ok: [git] => (item=sonar)
2023-11-15 19:57:12,054 p=10755 u=sina n=ansible | ok: [git] => (item=traefik)
2023-11-15 19:57:12,072 p=10755 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-15 19:57:13,625 p=10755 u=sina n=ansible | ok: [git] => (item=traefik/traefik)
2023-11-15 19:57:13,646 p=10755 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-15 19:57:17,259 p=10755 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 19:57:20,491 p=10755 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 19:57:20,508 p=10755 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-15 19:57:23,767 p=10755 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 19:57:26,829 p=10755 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 19:57:31,051 p=10755 u=sina n=ansible | ok: [git] => (item=nginx.conf)
2023-11-15 19:57:31,070 p=10755 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-15 19:57:34,619 p=10755 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 19:57:37,720 p=10755 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 19:57:37,738 p=10755 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-15 19:57:40,857 p=10755 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 19:57:40,879 p=10755 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-15 19:57:44,309 p=10755 u=sina n=ansible | ok: [git] => (item=compose.yml)
2023-11-15 19:57:47,386 p=10755 u=sina n=ansible | ok: [git] => (item=.env)
2023-11-15 19:57:47,405 p=10755 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-15 19:57:50,430 p=10755 u=sina n=ansible | ok: [git]
2023-11-15 19:57:50,447 p=10755 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-15 19:57:56,133 p=10755 u=sina n=ansible | ok: [git] => (item=git)
2023-11-15 19:58:01,565 p=10755 u=sina n=ansible | ok: [git] => (item=reg)
2023-11-15 19:58:06,704 p=10755 u=sina n=ansible | ok: [git] => (item=pages)
2023-11-15 19:58:06,721 p=10755 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 19:58:11,754 p=10755 u=sina n=ansible | ok: [git]
2023-11-15 19:58:11,768 p=10755 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-15 19:58:16,877 p=10755 u=sina n=ansible | ok: [git] => (item=object)
2023-11-15 19:58:22,450 p=10755 u=sina n=ansible | ok: [git] => (item=io)
2023-11-15 19:58:22,470 p=10755 u=sina n=ansible | TASK [repo : create network] ***************************************************
2023-11-15 19:58:25,606 p=10755 u=sina n=ansible | ok: [git] => (item=app_net)
2023-11-15 19:58:28,458 p=10755 u=sina n=ansible | ok: [git] => (item=web_net)
2023-11-15 19:58:28,475 p=10755 u=sina n=ansible | TASK [repo : deploty traefik Compose stack] ************************************
2023-11-15 19:58:30,816 p=10755 u=sina n=ansible | ok: [git]
2023-11-15 19:58:30,832 p=10755 u=sina n=ansible | TASK [repo : deploty gitlab Compose stack] *************************************
2023-11-15 19:58:33,432 p=10755 u=sina n=ansible | changed: [git]
2023-11-15 19:58:33,449 p=10755 u=sina n=ansible | TASK [repo : deploty minio Compose stack] **************************************
2023-11-15 19:59:59,565 p=10755 u=sina n=ansible | changed: [git]
2023-11-15 19:59:59,636 p=10755 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-15 19:59:59,670 p=10755 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 20:00:08,922 p=10755 u=sina n=ansible | ok: [postgres]
2023-11-15 20:00:08,958 p=10755 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 20:00:15,651 p=10755 u=sina n=ansible | changed: [postgres] => (item=services)
2023-11-15 20:00:15,670 p=10755 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 20:00:17,984 p=10755 u=sina n=ansible | changed: [postgres] => (item=traefik)
2023-11-15 20:00:18,002 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 20:00:22,630 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:00:22,644 p=10755 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 20:00:25,482 p=10755 u=sina n=ansible | changed: [postgres] => (item=traefik/traefik)
2023-11-15 20:00:25,501 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 20:00:30,422 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:00:30,441 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 20:00:34,877 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:00:34,894 p=10755 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 20:00:41,707 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:00:41,722 p=10755 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 20:00:45,749 p=10755 u=sina n=ansible | changed: [postgres] => (item=app_net)
2023-11-15 20:00:49,042 p=10755 u=sina n=ansible | changed: [postgres] => (item=web_net)
2023-11-15 20:00:49,063 p=10755 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 20:01:11,482 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:01:11,511 p=10755 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 20:01:18,043 p=10755 u=sina n=ansible | changed: [postgres] => (item=cad)
2023-11-15 20:01:24,534 p=10755 u=sina n=ansible | changed: [postgres] => (item=nod)
2023-11-15 20:01:24,554 p=10755 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 20:01:26,574 p=10755 u=sina n=ansible | ok: [postgres] => (item=services)
2023-11-15 20:01:26,592 p=10755 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 20:01:28,621 p=10755 u=sina n=ansible | changed: [postgres] => (item=agents)
2023-11-15 20:01:30,562 p=10755 u=sina n=ansible | changed: [postgres] => (item=agents/promtail)
2023-11-15 20:01:30,580 p=10755 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 20:01:34,743 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:01:34,762 p=10755 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 20:01:39,084 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:01:39,095 p=10755 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 20:01:43,487 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:01:43,502 p=10755 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 20:01:46,551 p=10755 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-15 20:01:46,571 p=10755 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 20:07:10,929 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:10,967 p=10755 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-15 20:07:13,186 p=10755 u=sina n=ansible | ok: [postgres] => (item=/opt/services)
2023-11-15 20:07:15,773 p=10755 u=sina n=ansible | changed: [postgres] => (item=/opt/services/postgres)
2023-11-15 20:07:15,797 p=10755 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-15 20:07:20,099 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:20,122 p=10755 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-15 20:07:24,526 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:24,550 p=10755 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-15 20:07:28,963 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:28,979 p=10755 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-15 20:07:33,208 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:33,225 p=10755 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-15 20:07:37,642 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:37,658 p=10755 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-15 20:07:41,918 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:41,936 p=10755 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-15 20:07:49,137 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:07:49,167 p=10755 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-15 20:07:52,269 p=10755 u=sina n=ansible | ok: [postgres] => (item=app_net)
2023-11-15 20:07:55,577 p=10755 u=sina n=ansible | ok: [postgres] => (item=web_net)
2023-11-15 20:07:55,599 p=10755 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-15 20:10:45,607 p=10755 u=sina n=ansible | changed: [postgres]
2023-11-15 20:10:45,679 p=10755 u=sina n=ansible | PLAY [deploy] ******************************************************************
2023-11-15 20:10:45,723 p=10755 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 20:10:53,080 p=10755 u=sina n=ansible | ok: [redis]
2023-11-15 20:10:53,133 p=10755 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 20:10:55,573 p=10755 u=sina n=ansible | changed: [redis] => (item=services)
2023-11-15 20:10:55,596 p=10755 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 20:10:58,062 p=10755 u=sina n=ansible | changed: [redis] => (item=traefik)
2023-11-15 20:10:58,082 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 20:11:02,852 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:11:02,869 p=10755 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 20:11:05,331 p=10755 u=sina n=ansible | changed: [redis] => (item=traefik/traefik)
2023-11-15 20:11:05,353 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 20:11:10,220 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:11:10,243 p=10755 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 20:11:15,045 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:11:15,063 p=10755 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 20:11:22,241 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:11:22,263 p=10755 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 20:11:26,008 p=10755 u=sina n=ansible | changed: [redis] => (item=app_net)
2023-11-15 20:11:29,610 p=10755 u=sina n=ansible | changed: [redis] => (item=web_net)
2023-11-15 20:11:29,633 p=10755 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 20:11:54,187 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:11:54,227 p=10755 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 20:12:01,630 p=10755 u=sina n=ansible | changed: [redis] => (item=cad)
2023-11-15 20:12:08,639 p=10755 u=sina n=ansible | changed: [redis] => (item=nod)
2023-11-15 20:12:08,661 p=10755 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 20:12:11,101 p=10755 u=sina n=ansible | ok: [redis] => (item=services)
2023-11-15 20:12:11,126 p=10755 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 20:12:13,562 p=10755 u=sina n=ansible | changed: [redis] => (item=agents)
2023-11-15 20:12:15,951 p=10755 u=sina n=ansible | changed: [redis] => (item=agents/promtail)
2023-11-15 20:12:15,970 p=10755 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 20:12:20,694 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:12:20,709 p=10755 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 20:12:25,476 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:12:25,491 p=10755 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 20:12:30,140 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:12:30,157 p=10755 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 20:12:33,824 p=10755 u=sina n=ansible | ok: [redis] => (item=web_net)
2023-11-15 20:12:33,847 p=10755 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 20:30:53,249 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:30:53,289 p=10755 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-15 20:30:56,318 p=10755 u=sina n=ansible | ok: [redis] => (item=/opt/services)
2023-11-15 20:30:58,794 p=10755 u=sina n=ansible | changed: [redis] => (item=/opt/services/redis)
2023-11-15 20:30:58,822 p=10755 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-15 20:31:04,002 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:31:04,021 p=10755 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-15 20:31:08,666 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:31:08,684 p=10755 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-15 20:31:13,304 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:31:13,327 p=10755 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-15 20:31:17,835 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:31:17,859 p=10755 u=sina n=ansible | TASK [redis : Create a redis.archidev.ir A record to point to host] ************
2023-11-15 20:31:25,356 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:31:25,376 p=10755 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-15 20:31:29,017 p=10755 u=sina n=ansible | ok: [redis] => (item=app_net)
2023-11-15 20:31:32,213 p=10755 u=sina n=ansible | ok: [redis] => (item=web_net)
2023-11-15 20:31:32,235 p=10755 u=sina n=ansible | TASK [redis : deploy redis Compose stack] **************************************
2023-11-15 20:35:17,325 p=10755 u=sina n=ansible | changed: [redis]
2023-11-15 20:35:17,401 p=10755 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 20:35:17,401 p=10755 u=sina n=ansible | git                        : ok=17   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 20:35:17,401 p=10755 u=sina n=ansible | postgres                   : ok=28   changed=24   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 20:35:17,401 p=10755 u=sina n=ansible | redis                      : ok=26   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-15 20:55:33,222 p=14442 u=sina n=ansible | PLAY [deploy gitlab-runner] ****************************************************
2023-11-15 20:55:33,257 p=14442 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-15 20:55:40,231 p=14442 u=sina n=ansible | ok: [gitlab-runner]
2023-11-15 20:55:40,282 p=14442 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-15 20:55:42,935 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=services)
2023-11-15 20:55:42,962 p=14442 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-15 20:55:45,190 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=traefik)
2023-11-15 20:55:45,210 p=14442 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-15 20:55:49,984 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:55:49,993 p=14442 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-15 20:55:52,183 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=traefik/traefik)
2023-11-15 20:55:52,194 p=14442 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-15 20:55:56,383 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:55:56,394 p=14442 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-15 20:56:00,591 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:56:00,603 p=14442 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-15 20:56:08,148 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:56:08,168 p=14442 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-15 20:56:11,747 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=app_net)
2023-11-15 20:56:15,269 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=web_net)
2023-11-15 20:56:15,292 p=14442 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-15 20:56:35,711 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:56:35,755 p=14442 u=sina n=ansible | TASK [gitlab-runner : create /opt/services dir] ********************************
2023-11-15 20:56:38,069 p=14442 u=sina n=ansible | ok: [gitlab-runner] => (item=services)
2023-11-15 20:56:38,087 p=14442 u=sina n=ansible | TASK [gitlab-runner : create files] ********************************************
2023-11-15 20:56:40,990 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=runner)
2023-11-15 20:56:41,018 p=14442 u=sina n=ansible | TASK [gitlab-runner : copy runner compose file to host] ************************
2023-11-15 20:56:46,071 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:56:46,088 p=14442 u=sina n=ansible | TASK [gitlab-runner : copy runner register script] *****************************
2023-11-15 20:56:51,335 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:56:51,354 p=14442 u=sina n=ansible | TASK [gitlab-runner : Create a pre-product.archidev.ir A record to point to host] ***
2023-11-15 20:57:00,633 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:57:00,653 p=14442 u=sina n=ansible | TASK [gitlab-runner : Create a product.archidev.ir A record to point to host] ***
2023-11-15 20:57:10,877 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 20:57:10,886 p=14442 u=sina n=ansible | TASK [gitlab-runner : create network] ******************************************
2023-11-15 20:57:14,451 p=14442 u=sina n=ansible | ok: [gitlab-runner] => (item=app_net)
2023-11-15 20:57:18,436 p=14442 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-15 20:57:18,451 p=14442 u=sina n=ansible | TASK [gitlab-runner : deploy runner Compose stack] *****************************
2023-11-15 21:00:42,752 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:00:42,764 p=14442 u=sina n=ansible | TASK [gitlab-runner : Execute the script] **************************************
2023-11-15 21:00:45,994 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:00:46,035 p=14442 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-15 21:00:52,949 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=cad)
2023-11-15 21:00:59,550 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=nod)
2023-11-15 21:00:59,567 p=14442 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-15 21:01:01,593 p=14442 u=sina n=ansible | ok: [gitlab-runner] => (item=services)
2023-11-15 21:01:01,605 p=14442 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-15 21:01:03,961 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=agents)
2023-11-15 21:01:06,006 p=14442 u=sina n=ansible | changed: [gitlab-runner] => (item=agents/promtail)
2023-11-15 21:01:06,020 p=14442 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-15 21:01:10,109 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:01:10,119 p=14442 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-15 21:01:15,413 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:01:15,426 p=14442 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-15 21:01:19,823 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:01:19,851 p=14442 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-15 21:01:22,912 p=14442 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-15 21:01:22,927 p=14442 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-15 21:09:39,934 p=14442 u=sina n=ansible | changed: [gitlab-runner]
2023-11-15 21:09:39,984 p=14442 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-15 21:09:39,985 p=14442 u=sina n=ansible | gitlab-runner              : ok=27   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-16 15:27:03,213 p=22439 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.200",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.104.26",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.173",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-16 15:28:39,950 p=22563 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-16 15:28:40,022 p=22563 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-16 15:28:50,313 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:28:51,182 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:28:51,224 p=22563 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-16 15:29:05,477 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:29:05,543 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:29:05,552 p=22563 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-16 15:30:03,735 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:30:05,774 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:30:05,787 p=22563 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-16 15:30:11,748 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:30:11,808 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:30:11,821 p=22563 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-16 15:30:17,833 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:30:18,251 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:30:18,265 p=22563 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-16 15:30:23,470 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:30:23,471 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:30:23,499 p=22563 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-16 15:30:30,563 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:30:31,333 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:30:31,361 p=22563 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-16 15:30:34,452 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/cron.d)
2023-11-16 15:30:34,908 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.d)
2023-11-16 15:30:37,024 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/cron.daily)
2023-11-16 15:30:37,581 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.daily)
2023-11-16 15:30:39,752 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.hourly)
2023-11-16 15:30:39,796 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/cron.hourly)
2023-11-16 15:30:42,317 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/cron.weekly)
2023-11-16 15:30:42,670 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.weekly)
2023-11-16 15:30:44,676 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/cron.monthly)
2023-11-16 15:30:45,125 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.monthly)
2023-11-16 15:30:47,351 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-16 15:30:47,471 p=22563 u=sina n=ansible | changed: [product] => (item=/boot/grub/grub.cfg)
2023-11-16 15:30:49,664 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/crontab)
2023-11-16 15:30:50,214 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/crontab)
2023-11-16 15:30:50,232 p=22563 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-16 15:30:53,092 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/usr/bin/as)
2023-11-16 15:30:53,435 p=22563 u=sina n=ansible | changed: [product] => (item=/usr/bin/as)
2023-11-16 15:30:55,807 p=22563 u=sina n=ansible | changed: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-16 15:30:56,754 p=22563 u=sina n=ansible | changed: [product] => (item=/etc/ssh/sshd_config)
2023-11-16 15:30:56,768 p=22563 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-16 15:31:02,221 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:02,410 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:02,431 p=22563 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-16 15:31:05,182 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:05,497 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:05,507 p=22563 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-16 15:31:07,809 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:08,100 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:08,123 p=22563 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-16 15:31:12,397 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:13,372 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:13,387 p=22563 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-16 15:31:19,896 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:21,030 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:21,054 p=22563 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-16 15:31:27,514 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:27,524 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:27,541 p=22563 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-16 15:31:30,513 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:30,669 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:30,679 p=22563 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-16 15:31:35,797 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:35,828 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:35,839 p=22563 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-16 15:31:39,024 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:39,389 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:39,402 p=22563 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-16 15:31:45,387 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:31:45,598 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:31:45,608 p=22563 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-16 15:31:52,691 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:31:52,699 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:31:52,713 p=22563 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-16 15:31:58,415 p=22563 u=sina n=ansible | fatal: [product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-16 15:31:58,415 p=22563 u=sina n=ansible | ...ignoring
2023-11-16 15:31:58,420 p=22563 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-16 15:31:58,420 p=22563 u=sina n=ansible | ...ignoring
2023-11-16 15:31:58,433 p=22563 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-16 15:32:04,837 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:05,253 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:05,264 p=22563 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-16 15:32:09,072 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:09,127 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:09,145 p=22563 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-16 15:32:13,310 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:32:13,330 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:32:13,346 p=22563 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-16 15:32:19,543 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:19,628 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:19,641 p=22563 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-16 15:32:26,520 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:26,594 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:26,612 p=22563 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-16 15:32:31,990 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:32,152 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:32,165 p=22563 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-16 15:32:32,197 p=22563 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-16 15:32:32,218 p=22563 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-16 15:32:35,588 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:35,748 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:35,761 p=22563 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-16 15:32:40,498 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:40,907 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:40,923 p=22563 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-16 15:32:46,185 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:46,509 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:46,526 p=22563 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-16 15:32:52,165 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:52,260 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:52,271 p=22563 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-16 15:32:55,004 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:32:55,050 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:32:55,062 p=22563 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-16 15:32:57,581 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:32:57,787 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:32:57,800 p=22563 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-16 15:33:00,490 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:00,798 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:00,810 p=22563 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-16 15:33:03,621 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:03,624 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:03,635 p=22563 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-16 15:33:06,512 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:06,553 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:06,567 p=22563 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-16 15:33:09,127 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:09,435 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:09,446 p=22563 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-16 15:33:12,308 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:12,775 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:12,786 p=22563 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-16 15:33:15,077 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:15,646 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:15,658 p=22563 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-16 15:33:18,283 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:18,463 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:18,476 p=22563 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-16 15:33:21,588 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:21,622 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:21,635 p=22563 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-16 15:33:26,821 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:27,236 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:27,249 p=22563 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-16 15:33:29,858 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:30,293 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:30,306 p=22563 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-16 15:33:33,300 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:33,460 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:33,474 p=22563 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-16 15:33:39,557 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:39,560 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:39,572 p=22563 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-16 15:33:46,264 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:46,296 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:46,331 p=22563 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-16 15:33:52,259 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:52,851 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:52,882 p=22563 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-16 15:33:55,348 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:33:55,579 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:33:55,594 p=22563 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-16 15:33:58,417 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:33:58,431 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:33:58,450 p=22563 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-16 15:34:01,219 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:34:01,252 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:34:01,265 p=22563 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-16 15:34:03,817 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:03,979 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:03,994 p=22563 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-16 15:34:07,542 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:07,663 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:07,685 p=22563 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-16 15:34:10,665 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:10,706 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:10,720 p=22563 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-16 15:34:14,165 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-16 15:34:14,648 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-16 15:34:17,259 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-16 15:34:17,378 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-16 15:34:20,032 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-16 15:34:20,716 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-16 15:34:22,595 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-16 15:34:23,121 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-16 15:34:25,173 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-16 15:34:25,240 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-16 15:34:27,590 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-16 15:34:27,623 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-16 15:34:30,787 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-16 15:34:31,134 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-16 15:34:34,038 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-16 15:34:34,681 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-16 15:34:36,801 p=22563 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-16 15:34:38,522 p=22563 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-16 15:34:38,536 p=22563 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-16 15:34:41,013 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:41,112 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:41,124 p=22563 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-16 15:34:45,834 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:47,476 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:47,489 p=22563 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-16 15:34:54,237 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:54,426 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:54,439 p=22563 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-16 15:34:57,360 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:34:57,548 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:34:57,578 p=22563 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-16 15:35:08,217 p=22563 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-16 15:35:14,012 p=22563 u=sina n=ansible | ok: [product] => (item=ca-certificates)
2023-11-16 15:35:21,790 p=22563 u=sina n=ansible | changed: [pre-product] => (item=gnupg-agent)
2023-11-16 15:35:31,898 p=22563 u=sina n=ansible | changed: [product] => (item=gnupg-agent)
2023-11-16 15:35:41,317 p=22563 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-16 15:35:47,616 p=22563 u=sina n=ansible | ok: [product] => (item=software-properties-common)
2023-11-16 15:35:47,638 p=22563 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-16 15:36:00,656 p=22563 u=sina n=ansible | changed: [product] => (item=docker)
2023-11-16 15:36:00,829 p=22563 u=sina n=ansible | changed: [pre-product] => (item=docker)
2023-11-16 15:36:13,698 p=22563 u=sina n=ansible | changed: [product] => (item=docker-compose)
2023-11-16 15:36:14,553 p=22563 u=sina n=ansible | changed: [pre-product] => (item=docker-compose)
2023-11-16 15:36:14,586 p=22563 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-16 15:36:24,917 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:36:28,230 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:36:28,246 p=22563 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-16 15:36:45,782 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:36:45,996 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:36:46,012 p=22563 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-16 15:37:26,561 p=22563 u=sina n=ansible | changed: [pre-product] => (item=docker-ce)
2023-11-16 15:37:35,403 p=22563 u=sina n=ansible | ok: [pre-product] => (item=docker-ce-cli)
2023-11-16 15:37:49,432 p=22563 u=sina n=ansible | ok: [pre-product] => (item=containerd.io)
2023-11-16 15:38:05,550 p=22563 u=sina n=ansible | changed: [product] => (item=docker-ce)
2023-11-16 15:39:08,888 p=22563 u=sina n=ansible | ok: [product] => (item=docker-ce-cli)
2023-11-16 15:39:25,024 p=22563 u=sina n=ansible | ok: [product] => (item=containerd.io)
2023-11-16 15:39:25,049 p=22563 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-16 15:39:29,955 p=22563 u=sina n=ansible | ok: [product]
2023-11-16 15:39:31,476 p=22563 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:39:31,506 p=22563 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-16 15:39:37,005 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:39:37,029 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:39:37,050 p=22563 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-16 15:39:44,439 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:39:44,736 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:39:44,783 p=22563 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-16 15:39:47,058 p=22563 u=sina n=ansible | changed: [product] => (item=services)
2023-11-16 15:39:48,165 p=22563 u=sina n=ansible | changed: [pre-product] => (item=services)
2023-11-16 15:39:48,183 p=22563 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-16 15:39:50,950 p=22563 u=sina n=ansible | changed: [product] => (item=traefik)
2023-11-16 15:39:51,100 p=22563 u=sina n=ansible | changed: [pre-product] => (item=traefik)
2023-11-16 15:39:51,119 p=22563 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-16 15:39:58,381 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:39:58,478 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:39:58,491 p=22563 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-16 15:40:01,101 p=22563 u=sina n=ansible | changed: [product] => (item=traefik/traefik)
2023-11-16 15:40:01,205 p=22563 u=sina n=ansible | changed: [pre-product] => (item=traefik/traefik)
2023-11-16 15:40:01,222 p=22563 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-16 15:40:06,827 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:40:07,276 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:40:07,294 p=22563 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-16 15:40:11,800 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:40:12,576 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:40:12,601 p=22563 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-16 15:40:21,135 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:40:21,421 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:40:21,439 p=22563 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-16 15:40:25,537 p=22563 u=sina n=ansible | changed: [product] => (item=app_net)
2023-11-16 15:40:26,402 p=22563 u=sina n=ansible | changed: [pre-product] => (item=app_net)
2023-11-16 15:40:31,190 p=22563 u=sina n=ansible | changed: [product] => (item=web_net)
2023-11-16 15:40:33,249 p=22563 u=sina n=ansible | changed: [pre-product] => (item=web_net)
2023-11-16 15:40:33,268 p=22563 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-16 15:41:06,619 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:41:07,500 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:41:07,541 p=22563 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-16 15:41:14,451 p=22563 u=sina n=ansible | changed: [product] => (item=cad)
2023-11-16 15:41:15,284 p=22563 u=sina n=ansible | changed: [pre-product] => (item=cad)
2023-11-16 15:41:20,818 p=22563 u=sina n=ansible | changed: [product] => (item=nod)
2023-11-16 15:41:21,784 p=22563 u=sina n=ansible | changed: [pre-product] => (item=nod)
2023-11-16 15:41:21,801 p=22563 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-16 15:41:24,238 p=22563 u=sina n=ansible | ok: [product] => (item=services)
2023-11-16 15:41:24,483 p=22563 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-16 15:41:24,502 p=22563 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-16 15:41:27,030 p=22563 u=sina n=ansible | changed: [pre-product] => (item=agents)
2023-11-16 15:41:27,229 p=22563 u=sina n=ansible | changed: [product] => (item=agents)
2023-11-16 15:41:29,359 p=22563 u=sina n=ansible | changed: [pre-product] => (item=agents/promtail)
2023-11-16 15:41:30,435 p=22563 u=sina n=ansible | changed: [product] => (item=agents/promtail)
2023-11-16 15:41:30,465 p=22563 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-16 15:41:35,022 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:41:35,901 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:41:35,922 p=22563 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-16 15:41:40,474 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:41:41,361 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:41:41,379 p=22563 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-16 15:41:46,227 p=22563 u=sina n=ansible | changed: [product]
2023-11-16 15:41:46,623 p=22563 u=sina n=ansible | changed: [pre-product]
2023-11-16 15:41:46,644 p=22563 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-16 15:41:50,777 p=22563 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-16 15:41:50,927 p=22563 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-16 15:41:50,945 p=22563 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-16 15:41:55,742 p=22563 u=sina n=ansible | fatal: [product]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "", "msg": "Error starting project 500 Server Error for http+docker://localhost/v1.43/images/create?tag=latest&fromImage=gcr.io%2Fcadvisor%2Fcadvisor: Internal Server Error (\"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \"<!DOCTYPE html>\\n<html lang=en>\\n  <meta charset=utf-8>\\n  <meta name=viewport content=\\\"initial-scale=1, minimum-scale=1, width=device-width\\\">\\n  <title>Error 403 (Forbidden)!!1</title>\\n  <style>\\n    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\\n  </style>\\n  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>\\n  <p><b>403.</b> <ins>That’s an error.</ins>\\n  <p>Your client does not have permission to get URL <code>/v2/cadvisor/cadvisor/manifests/latest</code> from this server.  <ins>That’s all we know.</ins>\\n\"\")"}
2023-11-16 15:41:55,861 p=22563 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "", "msg": "Error starting project 500 Server Error for http+docker://localhost/v1.43/images/create?tag=latest&fromImage=gcr.io%2Fcadvisor%2Fcadvisor: Internal Server Error (\"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \"<!DOCTYPE html>\\n<html lang=en>\\n  <meta charset=utf-8>\\n  <meta name=viewport content=\\\"initial-scale=1, minimum-scale=1, width=device-width\\\">\\n  <title>Error 403 (Forbidden)!!1</title>\\n  <style>\\n    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\\n  </style>\\n  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>\\n  <p><b>403.</b> <ins>That’s an error.</ins>\\n  <p>Your client does not have permission to get URL <code>/v2/cadvisor/cadvisor/manifests/latest</code> from this server.  <ins>That’s all we know.</ins>\\n\"\")"}
2023-11-16 15:41:55,865 p=22563 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-16 15:41:55,866 p=22563 u=sina n=ansible | pre-product                : ok=82   changed=66   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-16 15:41:55,867 p=22563 u=sina n=ansible | product                    : ok=82   changed=66   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-16 15:51:02,583 p=26128 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-16 15:51:02,610 p=26128 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-16 15:51:08,568 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:09,890 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:09,960 p=26128 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-16 15:51:12,860 p=26128 u=sina n=ansible | ok: [product] => (item=services)
2023-11-16 15:51:12,899 p=26128 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-16 15:51:12,927 p=26128 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-16 15:51:15,343 p=26128 u=sina n=ansible | ok: [product] => (item=traefik)
2023-11-16 15:51:16,006 p=26128 u=sina n=ansible | ok: [pre-product] => (item=traefik)
2023-11-16 15:51:16,031 p=26128 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-16 15:51:21,258 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:21,713 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:21,737 p=26128 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-16 15:51:24,418 p=26128 u=sina n=ansible | ok: [product] => (item=traefik/traefik)
2023-11-16 15:51:24,655 p=26128 u=sina n=ansible | ok: [pre-product] => (item=traefik/traefik)
2023-11-16 15:51:24,675 p=26128 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-16 15:51:30,039 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:30,598 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:30,612 p=26128 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-16 15:51:35,702 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:35,823 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:35,835 p=26128 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-16 15:51:42,664 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:42,896 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:42,909 p=26128 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-16 15:51:46,716 p=26128 u=sina n=ansible | ok: [product] => (item=app_net)
2023-11-16 15:51:47,305 p=26128 u=sina n=ansible | ok: [pre-product] => (item=app_net)
2023-11-16 15:51:49,913 p=26128 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-16 15:51:50,848 p=26128 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-16 15:51:50,877 p=26128 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-16 15:51:54,261 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:51:54,313 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:51:54,372 p=26128 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-16 15:52:00,098 p=26128 u=sina n=ansible | ok: [product] => (item=cad)
2023-11-16 15:52:00,895 p=26128 u=sina n=ansible | ok: [pre-product] => (item=cad)
2023-11-16 15:52:05,775 p=26128 u=sina n=ansible | ok: [product] => (item=nod)
2023-11-16 15:52:06,706 p=26128 u=sina n=ansible | ok: [pre-product] => (item=nod)
2023-11-16 15:52:06,721 p=26128 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-16 15:52:09,737 p=26128 u=sina n=ansible | ok: [pre-product] => (item=services)
2023-11-16 15:52:09,751 p=26128 u=sina n=ansible | ok: [product] => (item=services)
2023-11-16 15:52:09,767 p=26128 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-16 15:52:12,225 p=26128 u=sina n=ansible | ok: [product] => (item=agents)
2023-11-16 15:52:12,765 p=26128 u=sina n=ansible | ok: [pre-product] => (item=agents)
2023-11-16 15:52:14,091 p=26128 u=sina n=ansible | ok: [product] => (item=agents/promtail)
2023-11-16 15:52:15,136 p=26128 u=sina n=ansible | ok: [pre-product] => (item=agents/promtail)
2023-11-16 15:52:15,159 p=26128 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-16 15:52:20,259 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:52:20,451 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:52:20,464 p=26128 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-16 15:52:24,517 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:52:25,387 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:52:25,404 p=26128 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-16 15:52:30,641 p=26128 u=sina n=ansible | ok: [product]
2023-11-16 15:52:31,553 p=26128 u=sina n=ansible | ok: [pre-product]
2023-11-16 15:52:31,566 p=26128 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-16 15:52:36,006 p=26128 u=sina n=ansible | ok: [product] => (item=web_net)
2023-11-16 15:52:36,010 p=26128 u=sina n=ansible | ok: [pre-product] => (item=web_net)
2023-11-16 15:52:36,028 p=26128 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-16 16:00:28,685 p=26128 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:07:03,312 p=26128 u=sina n=ansible | changed: [product]
2023-11-16 16:07:03,414 p=26128 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-16 16:07:03,415 p=26128 u=sina n=ansible | pre-product                : ok=18   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-16 16:07:03,416 p=26128 u=sina n=ansible | product                    : ok=18   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-16 16:39:43,668 p=29751 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-16 16:39:43,735 p=29751 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-16 16:39:54,770 p=29751 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:39:55,026 p=29751 u=sina n=ansible | ok: [product]
2023-11-16 16:39:55,075 p=29751 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-16 16:40:08,324 p=29751 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-16 16:40:10,182 p=29827 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-16 16:40:10,243 p=29827 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-16 16:40:17,121 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:40:18,238 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:40:18,284 p=29827 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-16 16:40:23,274 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:40:24,257 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:40:24,267 p=29827 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-16 16:41:34,837 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:41:36,908 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:41:36,920 p=29827 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-16 16:41:43,247 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:41:45,026 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:41:45,041 p=29827 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-16 16:42:00,149 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:42:00,194 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:42:00,203 p=29827 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-16 16:42:05,675 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:42:06,462 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:42:06,476 p=29827 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-16 16:42:14,149 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:42:14,233 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:42:14,251 p=29827 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-16 16:42:17,406 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.d)
2023-11-16 16:42:17,504 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/cron.d)
2023-11-16 16:42:20,134 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/cron.daily)
2023-11-16 16:42:20,308 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.daily)
2023-11-16 16:42:22,874 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/cron.hourly)
2023-11-16 16:42:23,157 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.hourly)
2023-11-16 16:42:25,723 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/cron.weekly)
2023-11-16 16:42:26,164 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.weekly)
2023-11-16 16:42:28,259 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/cron.monthly)
2023-11-16 16:42:29,032 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.monthly)
2023-11-16 16:42:30,417 p=29827 u=sina n=ansible | changed: [product] => (item=/boot/grub/grub.cfg)
2023-11-16 16:42:31,850 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-16 16:42:34,486 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/crontab)
2023-11-16 16:42:37,088 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/crontab)
2023-11-16 16:42:37,099 p=29827 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-16 16:42:40,435 p=29827 u=sina n=ansible | changed: [product] => (item=/usr/bin/as)
2023-11-16 16:42:41,702 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/usr/bin/as)
2023-11-16 16:42:45,387 p=29827 u=sina n=ansible | changed: [product] => (item=/etc/ssh/sshd_config)
2023-11-16 16:42:48,535 p=29827 u=sina n=ansible | changed: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-16 16:42:48,546 p=29827 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-16 16:42:57,694 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:42:57,698 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:42:57,707 p=29827 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-16 16:43:01,360 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:01,765 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:01,778 p=29827 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-16 16:43:04,396 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:04,823 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:04,834 p=29827 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-16 16:43:10,040 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:11,036 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:11,046 p=29827 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-16 16:43:17,125 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:17,870 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:17,881 p=29827 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-16 16:43:26,602 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:26,687 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:26,699 p=29827 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-16 16:43:30,014 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:30,128 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:30,147 p=29827 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-16 16:43:36,136 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:38,075 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:38,090 p=29827 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-16 16:43:41,484 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:41,807 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:41,818 p=29827 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-16 16:43:46,777 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:43:47,652 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:43:47,666 p=29827 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-16 16:43:56,592 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:43:56,883 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:43:56,898 p=29827 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-16 16:44:02,343 p=29827 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-16 16:44:02,344 p=29827 u=sina n=ansible | ...ignoring
2023-11-16 16:44:03,338 p=29827 u=sina n=ansible | fatal: [product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-16 16:44:03,339 p=29827 u=sina n=ansible | ...ignoring
2023-11-16 16:44:03,366 p=29827 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-16 16:44:09,441 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:09,901 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:09,915 p=29827 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-16 16:44:13,442 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:13,557 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:13,568 p=29827 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-16 16:44:17,758 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:44:17,828 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:44:17,845 p=29827 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-16 16:44:24,603 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:25,572 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:25,584 p=29827 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-16 16:44:35,389 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:37,368 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:37,381 p=29827 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-16 16:44:43,770 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:44,130 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:44,144 p=29827 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-16 16:44:44,183 p=29827 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-16 16:44:44,200 p=29827 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-16 16:44:48,687 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:48,724 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:48,735 p=29827 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-16 16:44:57,631 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:44:57,904 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:44:57,917 p=29827 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-16 16:45:06,886 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:07,747 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:07,774 p=29827 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-16 16:45:16,206 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:18,188 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:18,205 p=29827 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-16 16:45:28,029 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:28,195 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:28,207 p=29827 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-16 16:45:32,223 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:45:32,403 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:45:32,428 p=29827 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-16 16:45:35,333 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:35,792 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:35,803 p=29827 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-16 16:45:38,507 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:38,784 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:38,795 p=29827 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-16 16:45:42,286 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:42,506 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:42,519 p=29827 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-16 16:45:45,608 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:45:45,739 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:45:45,752 p=29827 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-16 16:45:48,515 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:49,066 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:49,089 p=29827 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-16 16:45:52,133 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:45:52,257 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:45:52,267 p=29827 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-16 16:45:54,986 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:45:55,605 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:45:55,618 p=29827 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-16 16:45:58,737 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:45:58,844 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:45:58,857 p=29827 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-16 16:46:05,248 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:46:05,475 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:46:05,487 p=29827 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-16 16:46:09,573 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:46:10,056 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:46:10,068 p=29827 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-16 16:46:20,144 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:46:25,165 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:46:25,175 p=29827 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-16 16:46:41,663 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:46:42,305 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:46:42,316 p=29827 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-16 16:46:53,795 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:46:53,838 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:46:53,852 p=29827 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-16 16:47:05,922 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:47:06,474 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:47:06,485 p=29827 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-16 16:47:10,566 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:47:12,358 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:47:12,371 p=29827 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-16 16:47:17,206 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:47:17,744 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:47:17,759 p=29827 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-16 16:47:21,811 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:47:21,890 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:47:21,903 p=29827 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-16 16:47:25,516 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:47:25,724 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:47:25,736 p=29827 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-16 16:47:29,651 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:47:29,706 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:47:29,718 p=29827 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-16 16:47:33,690 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:47:34,465 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:47:34,476 p=29827 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-16 16:47:42,515 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-16 16:47:43,063 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-16 16:47:49,051 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-16 16:47:49,959 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-16 16:47:51,671 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-16 16:47:53,513 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-16 16:47:53,996 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-16 16:47:57,486 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-16 16:47:57,673 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-16 16:48:02,462 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-16 16:48:04,201 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-16 16:48:07,614 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-16 16:48:08,982 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-16 16:48:10,344 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-16 16:48:11,496 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-16 16:48:14,238 p=29827 u=sina n=ansible | changed: [product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-16 16:48:14,806 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-16 16:48:17,369 p=29827 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-16 16:48:17,388 p=29827 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-16 16:48:20,413 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:48:21,026 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:48:21,037 p=29827 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-16 16:48:27,299 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:48:27,553 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:48:27,571 p=29827 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-16 16:48:44,065 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:48:44,689 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:48:44,699 p=29827 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-16 16:48:47,502 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:48:47,900 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:48:47,934 p=29827 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-16 16:49:00,495 p=29827 u=sina n=ansible | ok: [product] => (item=ca-certificates)
2023-11-16 16:49:01,140 p=29827 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-16 16:49:15,995 p=29827 u=sina n=ansible | changed: [product] => (item=gnupg-agent)
2023-11-16 16:49:24,177 p=29827 u=sina n=ansible | ok: [product] => (item=software-properties-common)
2023-11-16 16:49:33,862 p=29827 u=sina n=ansible | changed: [pre-product] => (item=gnupg-agent)
2023-11-16 16:49:46,851 p=29827 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-16 16:49:46,873 p=29827 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-16 16:50:02,320 p=29827 u=sina n=ansible | changed: [product] => (item=docker)
2023-11-16 16:50:03,056 p=29827 u=sina n=ansible | changed: [pre-product] => (item=docker)
2023-11-16 16:51:37,954 p=29827 u=sina n=ansible | changed: [pre-product] => (item=docker-compose)
2023-11-16 16:52:46,591 p=29827 u=sina n=ansible | changed: [product] => (item=docker-compose)
2023-11-16 16:52:46,605 p=29827 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-16 16:52:50,564 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:52:51,574 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:52:51,583 p=29827 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-16 16:53:05,730 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:53:06,863 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:53:06,873 p=29827 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-16 16:53:48,512 p=29827 u=sina n=ansible | changed: [product] => (item=docker-ce)
2023-11-16 16:53:51,665 p=29827 u=sina n=ansible | changed: [pre-product] => (item=docker-ce)
2023-11-16 16:53:57,406 p=29827 u=sina n=ansible | ok: [product] => (item=docker-ce-cli)
2023-11-16 16:54:01,219 p=29827 u=sina n=ansible | ok: [pre-product] => (item=docker-ce-cli)
2023-11-16 16:54:05,165 p=29827 u=sina n=ansible | ok: [product] => (item=containerd.io)
2023-11-16 16:54:09,127 p=29827 u=sina n=ansible | ok: [pre-product] => (item=containerd.io)
2023-11-16 16:54:09,138 p=29827 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-16 16:54:17,194 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:54:17,651 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:54:17,662 p=29827 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-16 16:54:31,500 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:54:33,872 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:54:33,886 p=29827 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-16 16:54:44,028 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:54:44,207 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:54:44,235 p=29827 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-16 16:54:46,709 p=29827 u=sina n=ansible | changed: [product] => (item=services)
2023-11-16 16:54:46,981 p=29827 u=sina n=ansible | changed: [pre-product] => (item=services)
2023-11-16 16:54:46,991 p=29827 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-16 16:54:49,758 p=29827 u=sina n=ansible | changed: [product] => (item=traefik)
2023-11-16 16:54:50,181 p=29827 u=sina n=ansible | changed: [pre-product] => (item=traefik)
2023-11-16 16:54:50,193 p=29827 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-16 16:54:56,669 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:54:56,905 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:54:56,918 p=29827 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-16 16:54:59,510 p=29827 u=sina n=ansible | changed: [product] => (item=traefik/traefik)
2023-11-16 16:54:59,595 p=29827 u=sina n=ansible | changed: [pre-product] => (item=traefik/traefik)
2023-11-16 16:54:59,608 p=29827 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-16 16:55:05,654 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:55:06,073 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:55:06,083 p=29827 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-16 16:55:12,870 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:55:12,901 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:55:12,916 p=29827 u=sina n=ansible | TASK [reverse-proxy : Create a postgres.archidev.ir A record to point to host] ***
2023-11-16 16:55:20,709 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:55:20,805 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:55:20,819 p=29827 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-16 16:55:26,378 p=29827 u=sina n=ansible | changed: [pre-product] => (item=app_net)
2023-11-16 16:55:26,956 p=29827 u=sina n=ansible | changed: [product] => (item=app_net)
2023-11-16 16:55:32,665 p=29827 u=sina n=ansible | changed: [pre-product] => (item=web_net)
2023-11-16 16:55:32,742 p=29827 u=sina n=ansible | changed: [product] => (item=web_net)
2023-11-16 16:55:32,757 p=29827 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-16 16:56:06,907 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:07,190 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:07,269 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ssh] *******************************
2023-11-16 16:56:24,575 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:24,712 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:24,721 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart iptables] **************************
2023-11-16 16:56:33,804 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:34,598 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:34,609 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart fail2ban] **************************
2023-11-16 16:56:42,316 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:43,512 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:43,522 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ntp] *******************************
2023-11-16 16:56:51,756 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:51,925 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:51,936 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : restart auditd] ****************************
2023-11-16 16:56:55,318 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:55,327 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:55,339 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : generate auditd] ***************************
2023-11-16 16:56:58,354 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:56:58,476 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:56:58,485 p=29827 u=sina n=ansible | RUNNING HANDLER [preparing-server : reload systemd] ****************************
2023-11-16 16:57:11,176 p=29827 u=sina n=ansible | ok: [product]
2023-11-16 16:57:14,971 p=29827 u=sina n=ansible | ok: [pre-product]
2023-11-16 16:57:14,980 p=29827 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] *************************
2023-11-16 16:57:47,549 p=29827 u=sina n=ansible | changed: [product]
2023-11-16 16:57:47,577 p=29827 u=sina n=ansible | changed: [pre-product]
2023-11-16 16:57:47,620 p=29827 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-16 16:57:47,620 p=29827 u=sina n=ansible | pre-product                : ok=83   changed=68   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2023-11-16 16:57:47,621 p=29827 u=sina n=ansible | product                    : ok=83   changed=68   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2023-11-19 20:36:49,281 p=63476 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-19 20:36:49,337 p=63476 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-19 20:36:59,386 p=63476 u=sina n=ansible | fatal: [product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.104.217 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:36:59,396 p=63476 u=sina n=ansible | fatal: [pre-product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.105.55 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:36:59,398 p=63476 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-19 20:36:59,398 p=63476 u=sina n=ansible | pre-product                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:36:59,398 p=63476 u=sina n=ansible | product                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:39:33,601 p=63605 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-19 20:39:33,651 p=63605 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-19 20:39:43,694 p=63605 u=sina n=ansible | fatal: [product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.104.217 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:39:43,702 p=63605 u=sina n=ansible | fatal: [pre-product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.105.55 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:39:43,703 p=63605 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-19 20:39:43,703 p=63605 u=sina n=ansible | pre-product                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:39:43,704 p=63605 u=sina n=ansible | product                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:40:56,329 p=63741 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-19 20:40:56,382 p=63741 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-19 20:41:06,422 p=63741 u=sina n=ansible | fatal: [product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.104.217 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:41:06,433 p=63741 u=sina n=ansible | fatal: [pre-product]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.105.55 port 22: Connection timed out", "unreachable": true}
2023-11-19 20:41:06,435 p=63741 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-19 20:41:06,435 p=63741 u=sina n=ansible | pre-product                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:41:06,436 p=63741 u=sina n=ansible | product                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-19 20:41:17,150 p=63788 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.200",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.104.217",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "semaphore": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.116.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage",
            "ansible"
        ]
    },
    "ansible": {
        "hosts": [
            "semaphore"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-19 20:41:27,248 p=63796 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-19 20:41:27,298 p=63796 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-19 20:41:33,153 p=63796 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:41:33,176 p=63796 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-19 20:41:44,887 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:41:44,896 p=63796 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-19 20:42:40,860 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:42:40,868 p=63796 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-19 20:42:45,959 p=63796 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:42:45,973 p=63796 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-19 20:42:49,340 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:42:49,350 p=63796 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-19 20:42:52,217 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:42:52,226 p=63796 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-19 20:42:55,298 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:42:55,306 p=63796 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-19 20:42:56,975 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.d)
2023-11-19 20:42:58,440 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.daily)
2023-11-19 20:42:59,889 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.hourly)
2023-11-19 20:43:01,309 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.weekly)
2023-11-19 20:43:02,760 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.monthly)
2023-11-19 20:43:04,301 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/boot/grub/grub.cfg)
2023-11-19 20:43:05,829 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/crontab)
2023-11-19 20:43:05,845 p=63796 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-19 20:43:07,473 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/usr/bin/as)
2023-11-19 20:43:09,004 p=63796 u=sina n=ansible | changed: [semaphore] => (item=/etc/ssh/sshd_config)
2023-11-19 20:43:09,020 p=63796 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-19 20:43:13,183 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:13,198 p=63796 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-19 20:43:15,904 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:15,913 p=63796 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-19 20:43:17,546 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:17,555 p=63796 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-19 20:43:20,567 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:20,575 p=63796 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-19 20:43:23,754 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:23,762 p=63796 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-19 20:43:26,832 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:26,847 p=63796 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-19 20:43:28,771 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:28,780 p=63796 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-19 20:43:31,807 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:31,816 p=63796 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-19 20:43:33,488 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:33,496 p=63796 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-19 20:43:36,450 p=63796 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:43:36,464 p=63796 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-19 20:43:41,436 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:41,445 p=63796 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-19 20:43:44,500 p=63796 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-19 20:43:44,500 p=63796 u=sina n=ansible | ...ignoring
2023-11-19 20:43:44,508 p=63796 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-19 20:43:48,744 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:48,752 p=63796 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-19 20:43:50,690 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:50,706 p=63796 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-19 20:43:53,043 p=63796 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:43:53,053 p=63796 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-19 20:43:56,220 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:56,232 p=63796 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-19 20:43:59,495 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:43:59,509 p=63796 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-19 20:44:02,593 p=63796 u=sina n=ansible | changed: [semaphore]
2023-11-19 20:44:02,607 p=63796 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-19 20:44:02,631 p=63796 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-19 20:44:04,315 p=63796 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"applied": false, "changed": false, "cmd": "/usr/sbin/iptables-restore --test --noflush /etc/iptables/rules.v4 --table filter", "initial_state": ["# Generated by iptables-save v1.8.7", "*mangle", ":PREROUTING ACCEPT [0:0]", ":INPUT ACCEPT [0:0]", ":FORWARD ACCEPT [0:0]", ":OUTPUT ACCEPT [0:0]", ":POSTROUTING ACCEPT [0:0]", "COMMIT", "# Completed", "# Generated by iptables-save v1.8.7", "*filter", ":INPUT ACCEPT [0:0]", ":FORWARD ACCEPT [0:0]", ":OUTPUT ACCEPT [0:0]", "COMMIT", "# Completed"], "msg": "Source /etc/iptables/rules.v4 is not suitable for input to iptables-restore", "rc": 2, "restored": ["*mangle", ":PREROUTING ACCEPT [0:0]", ":INPUT ACCEPT [0:0]", ":FORWARD ACCEPT [0:0]", ":OUTPUT ACCEPT [0:0]", ":POSTROUTING ACCEPT [0:0]", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG NONE -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN FIN,SYN -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags SYN,RST SYN,RST -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN FIN,SYN -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,RST FIN,RST -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,ACK FIN -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags ACK,URG URG -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,ACK FIN -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags PSH,ACK PSH -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,SYN,RST,PSH,ACK,URG -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG NONE -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,PSH,URG -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,SYN,PSH,URG -j DROP", "-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,PSH,ACK,URG FIN,SYN,RST,ACK,URG -j DROP", "COMMIT", "*filter", ":INPUT ACCEPT [0:0]", ":FORWARD ACCEPT [0:0]", ":OUTPUT ACCEPT [0:0]", ":CHECK_INPUT - [0:0]", ":CHECK_OUTPUT - [0:0]", "-A INPUT -j CHECK_INPUT", "-A INPUT -j DROP", "-A OUTPUT -j CHECK_OUTPUT", "-A OUTPUT -j DROP", "-A CHECK_INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT", "-A CHECK_INPUT -i lo -j ACCEPT", "-A CHECK_INPUT -p tcp -m tcp --dport 22 -j ACCEPT", "-A CHECK_INPUT -p tcp -m tcp --dport 80 -j ACCEPT", "-A CHECK_INPUT -p tcp -m tcp --dport 443 -j ACCEPT", "-A CHECK_INPUT -s  -j ACCEPT -m comment --comment \"The Trusted Server Ip\"", "-A CHECK_OUTPUT -m state --state RELATED,ESTABLISHED -j ACCEPT", "-A CHECK_OUTPUT -j ACCEPT", "COMMIT"], "stderr": "Bad argument `ACCEPT'\nError occurred at line: 37\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\n", "stderr_lines": ["Bad argument `ACCEPT'", "Error occurred at line: 37", "Try `iptables-restore -h' or 'iptables-restore --help' for more information."], "stdout": "", "stdout_lines": [], "tables": {"filter": [":INPUT ACCEPT", ":FORWARD ACCEPT", ":OUTPUT ACCEPT"], "mangle": [":PREROUTING ACCEPT", ":INPUT ACCEPT", ":FORWARD ACCEPT", ":OUTPUT ACCEPT", ":POSTROUTING ACCEPT"]}}
2023-11-19 20:44:04,318 p=63796 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-19 20:44:04,318 p=63796 u=sina n=ansible | semaphore                  : ok=27   changed=22   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-19 20:59:46,155 p=64852 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-19 20:59:46,205 p=64852 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-19 20:59:50,832 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:59:50,857 p=64852 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-19 20:59:53,746 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 20:59:53,755 p=64852 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-19 21:00:01,973 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:01,982 p=64852 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-19 21:00:03,944 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:03,956 p=64852 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-19 21:00:08,674 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:08,685 p=64852 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-19 21:00:11,851 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:11,860 p=64852 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-19 21:00:14,857 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:14,867 p=64852 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-19 21:00:16,502 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/cron.d)
2023-11-19 21:00:18,035 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/cron.daily)
2023-11-19 21:00:19,581 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/cron.hourly)
2023-11-19 21:00:22,387 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/cron.weekly)
2023-11-19 21:00:34,812 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/cron.monthly)
2023-11-19 21:00:41,905 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/boot/grub/grub.cfg)
2023-11-19 21:00:44,460 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/crontab)
2023-11-19 21:00:44,476 p=64852 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-19 21:00:46,120 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/usr/bin/as)
2023-11-19 21:00:47,800 p=64852 u=sina n=ansible | ok: [semaphore] => (item=/etc/ssh/sshd_config)
2023-11-19 21:00:47,817 p=64852 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-19 21:00:50,970 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:50,978 p=64852 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-19 21:00:52,609 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:52,623 p=64852 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-19 21:00:54,144 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:54,157 p=64852 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-19 21:00:57,109 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:00:57,116 p=64852 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-19 21:01:00,081 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:00,091 p=64852 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-19 21:01:03,123 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:03,132 p=64852 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-19 21:01:04,793 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:04,803 p=64852 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-19 21:01:08,803 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:08,812 p=64852 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-19 21:01:10,639 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:10,648 p=64852 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-19 21:01:13,809 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:13,818 p=64852 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-19 21:01:16,993 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:17,002 p=64852 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-19 21:01:19,755 p=64852 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-19 21:01:19,756 p=64852 u=sina n=ansible | ...ignoring
2023-11-19 21:01:19,764 p=64852 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-19 21:01:22,639 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:22,648 p=64852 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-19 21:01:24,442 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:24,451 p=64852 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-19 21:01:26,435 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:26,444 p=64852 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-19 21:01:29,389 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:29,403 p=64852 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-19 21:01:32,339 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:32,348 p=64852 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-19 21:01:35,843 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:35,858 p=64852 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-19 21:01:35,892 p=64852 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-19 21:01:37,790 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:37,804 p=64852 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-19 21:01:40,934 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:40,945 p=64852 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-19 21:01:44,559 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:44,567 p=64852 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-19 21:01:47,523 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:47,531 p=64852 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-19 21:01:48,976 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:48,986 p=64852 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-19 21:01:50,491 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:50,500 p=64852 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-19 21:01:52,028 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:52,035 p=64852 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-19 21:01:53,508 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:53,517 p=64852 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-19 21:01:55,206 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:55,215 p=64852 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-19 21:01:56,946 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:01:56,955 p=64852 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-19 21:01:58,790 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:01:58,799 p=64852 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-19 21:02:00,741 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:00,759 p=64852 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-19 21:02:02,605 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:02,616 p=64852 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-19 21:02:04,341 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:04,351 p=64852 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-19 21:02:08,029 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:08,038 p=64852 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-19 21:02:10,380 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:10,389 p=64852 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-19 21:02:12,756 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:12,765 p=64852 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-19 21:02:16,213 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:16,221 p=64852 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-19 21:02:19,249 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:19,258 p=64852 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-19 21:02:24,107 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:24,116 p=64852 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-19 21:02:26,575 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:26,587 p=64852 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-19 21:02:28,620 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:28,636 p=64852 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-19 21:02:31,401 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:02:31,415 p=64852 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-19 21:02:33,442 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:33,451 p=64852 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-19 21:02:34,956 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:34,964 p=64852 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-19 21:02:36,692 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:36,705 p=64852 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-19 21:02:38,608 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-19 21:02:40,183 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-19 21:02:41,636 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-19 21:02:43,047 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-19 21:02:44,588 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-19 21:02:46,072 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-19 21:02:47,964 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-19 21:02:50,744 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-19 21:02:53,299 p=64852 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-19 21:02:53,316 p=64852 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-19 21:02:55,017 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:55,029 p=64852 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-19 21:02:59,953 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:02:59,973 p=64852 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-19 21:03:04,046 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:03:04,061 p=64852 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-19 21:03:05,597 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:03:05,617 p=64852 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-19 21:03:14,058 p=64852 u=sina n=ansible | ok: [semaphore] => (item=ca-certificates)
2023-11-19 21:03:27,725 p=64852 u=sina n=ansible | changed: [semaphore] => (item=gnupg-agent)
2023-11-19 21:03:37,537 p=64852 u=sina n=ansible | ok: [semaphore] => (item=software-properties-common)
2023-11-19 21:03:37,548 p=64852 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-19 21:03:45,756 p=64852 u=sina n=ansible | changed: [semaphore] => (item=docker)
2023-11-19 21:03:56,375 p=64852 u=sina n=ansible | changed: [semaphore] => (item=docker-compose)
2023-11-19 21:03:56,386 p=64852 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-19 21:03:59,868 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:03:59,881 p=64852 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-19 21:04:19,096 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:04:19,111 p=64852 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-19 21:05:54,268 p=64852 u=sina n=ansible | changed: [semaphore] => (item=docker-ce)
2023-11-19 21:06:02,767 p=64852 u=sina n=ansible | ok: [semaphore] => (item=docker-ce-cli)
2023-11-19 21:06:15,675 p=64852 u=sina n=ansible | ok: [semaphore] => (item=containerd.io)
2023-11-19 21:06:15,691 p=64852 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-19 21:06:18,473 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:06:18,481 p=64852 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-19 21:06:21,502 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:21,511 p=64852 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-19 21:06:27,590 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:27,605 p=64852 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-19 21:06:29,518 p=64852 u=sina n=ansible | changed: [semaphore] => (item=services)
2023-11-19 21:06:29,527 p=64852 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-19 21:06:31,061 p=64852 u=sina n=ansible | changed: [semaphore] => (item=traefik)
2023-11-19 21:06:31,071 p=64852 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-19 21:06:34,104 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:34,114 p=64852 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-19 21:06:35,637 p=64852 u=sina n=ansible | changed: [semaphore] => (item=traefik/traefik)
2023-11-19 21:06:35,647 p=64852 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-19 21:06:38,815 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:38,823 p=64852 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-19 21:06:41,885 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:41,894 p=64852 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-19 21:06:48,131 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:06:48,140 p=64852 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-19 21:06:50,704 p=64852 u=sina n=ansible | changed: [semaphore] => (item=app_net)
2023-11-19 21:06:53,053 p=64852 u=sina n=ansible | changed: [semaphore] => (item=web_net)
2023-11-19 21:06:53,067 p=64852 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-19 21:07:27,675 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:27,707 p=64852 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart iptables] **************************
2023-11-19 21:07:31,260 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:31,268 p=64852 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart fail2ban] **************************
2023-11-19 21:07:34,126 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:34,135 p=64852 u=sina n=ansible | RUNNING HANDLER [preparing-server : restart auditd] ****************************
2023-11-19 21:07:35,762 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:35,771 p=64852 u=sina n=ansible | RUNNING HANDLER [preparing-server : generate auditd] ***************************
2023-11-19 21:07:37,302 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:37,313 p=64852 u=sina n=ansible | RUNNING HANDLER [preparing-server : reload systemd] ****************************
2023-11-19 21:07:40,559 p=64852 u=sina n=ansible | ok: [semaphore]
2023-11-19 21:07:40,572 p=64852 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] *************************
2023-11-19 21:07:45,189 p=64852 u=sina n=ansible | changed: [semaphore]
2023-11-19 21:07:45,215 p=64852 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-19 21:07:45,215 p=64852 u=sina n=ansible | semaphore                  : ok=81   changed=46   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2023-11-20 17:08:41,241 p=76685 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-20 17:08:41,294 p=76685 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-20 17:08:41,356 p=76685 u=sina n=ansible | fatal: [semaphore]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 188.121.105.58 port 8090: Connection refused", "unreachable": true}
2023-11-20 17:08:41,358 p=76685 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-20 17:08:41,358 p=76685 u=sina n=ansible | semaphore                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-20 17:09:50,195 p=76770 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-20 17:09:50,247 p=76770 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-20 17:09:56,904 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:09:56,926 p=76770 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-20 17:10:19,410 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:10:19,428 p=76770 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-20 17:11:35,181 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:11:35,201 p=76770 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-20 17:11:40,517 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:11:40,537 p=76770 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-20 17:11:45,629 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:11:45,639 p=76770 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-20 17:11:49,943 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:11:49,960 p=76770 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-20 17:11:53,781 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:11:53,798 p=76770 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-20 17:11:55,928 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.d)
2023-11-20 17:11:57,724 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.daily)
2023-11-20 17:11:59,629 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.hourly)
2023-11-20 17:12:01,472 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.weekly)
2023-11-20 17:12:03,308 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/cron.monthly)
2023-11-20 17:12:05,155 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/boot/grub/grub.cfg)
2023-11-20 17:12:07,110 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/crontab)
2023-11-20 17:12:07,129 p=76770 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-20 17:12:09,035 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/usr/bin/as)
2023-11-20 17:12:10,915 p=76770 u=sina n=ansible | changed: [semaphore] => (item=/etc/ssh/sshd_config)
2023-11-20 17:12:10,937 p=76770 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-20 17:12:15,238 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:15,251 p=76770 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-20 17:12:18,969 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:18,986 p=76770 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-20 17:12:20,851 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:20,882 p=76770 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-20 17:12:24,858 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:24,878 p=76770 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-20 17:12:29,383 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:29,393 p=76770 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-20 17:12:33,274 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:33,295 p=76770 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-20 17:12:35,836 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:35,860 p=76770 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-20 17:12:39,845 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:39,859 p=76770 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-20 17:12:41,849 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:41,865 p=76770 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-20 17:12:45,824 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:12:45,851 p=76770 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-20 17:12:51,901 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:51,918 p=76770 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-20 17:12:55,258 p=76770 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-20 17:12:55,259 p=76770 u=sina n=ansible | ...ignoring
2023-11-20 17:12:55,276 p=76770 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-20 17:12:59,349 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:12:59,365 p=76770 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-20 17:13:01,747 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:01,757 p=76770 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-20 17:13:04,248 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:04,266 p=76770 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-20 17:13:08,100 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:08,136 p=76770 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-20 17:13:12,665 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:12,686 p=76770 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-20 17:13:16,870 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:16,892 p=76770 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-20 17:13:16,933 p=76770 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-20 17:13:19,255 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:19,264 p=76770 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-20 17:13:23,091 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:23,107 p=76770 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-20 17:13:26,954 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:26,968 p=76770 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-20 17:13:31,003 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:31,013 p=76770 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-20 17:13:32,914 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:32,931 p=76770 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-20 17:13:34,888 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:34,898 p=76770 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-20 17:13:37,427 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:37,442 p=76770 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-20 17:13:39,594 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:39,610 p=76770 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-20 17:13:41,666 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:41,680 p=76770 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-20 17:13:43,531 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:43,544 p=76770 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-20 17:13:45,850 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:45,866 p=76770 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-20 17:13:48,243 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:48,257 p=76770 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-20 17:13:50,441 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:50,451 p=76770 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-20 17:13:52,747 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:52,764 p=76770 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-20 17:13:56,809 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:13:56,824 p=76770 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-20 17:13:59,405 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:13:59,420 p=76770 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-20 17:14:01,225 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:14:01,245 p=76770 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-20 17:14:05,205 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:05,228 p=76770 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-20 17:14:09,623 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:09,633 p=76770 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-20 17:14:13,960 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:13,984 p=76770 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-20 17:14:15,896 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:15,912 p=76770 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-20 17:14:17,795 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:14:17,808 p=76770 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-20 17:14:19,656 p=76770 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:14:19,676 p=76770 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-20 17:14:21,574 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:21,588 p=76770 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-20 17:14:23,426 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:23,443 p=76770 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-20 17:14:25,585 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:25,604 p=76770 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-20 17:14:28,354 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-20 17:14:30,132 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-20 17:14:31,940 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-20 17:14:33,789 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-20 17:14:35,727 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-20 17:14:37,584 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-20 17:14:39,380 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-20 17:14:41,205 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-20 17:14:42,994 p=76770 u=sina n=ansible | changed: [semaphore] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-20 17:14:43,011 p=76770 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-20 17:14:44,920 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:44,932 p=76770 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-20 17:14:49,363 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:49,380 p=76770 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-20 17:14:53,900 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:53,909 p=76770 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-20 17:14:55,797 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:14:55,813 p=76770 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-20 17:15:01,126 p=76770 u=sina n=ansible | ok: [semaphore] => (item=ca-certificates)
2023-11-20 17:15:14,825 p=76770 u=sina n=ansible | changed: [semaphore] => (item=gnupg-agent)
2023-11-20 17:15:20,372 p=76770 u=sina n=ansible | ok: [semaphore] => (item=software-properties-common)
2023-11-20 17:15:20,382 p=76770 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-20 17:15:31,739 p=76770 u=sina n=ansible | changed: [semaphore] => (item=docker)
2023-11-20 17:15:47,234 p=76770 u=sina n=ansible | changed: [semaphore] => (item=docker-compose)
2023-11-20 17:15:47,247 p=76770 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-20 17:15:51,372 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:15:51,381 p=76770 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-20 17:16:15,615 p=76770 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:16:15,623 p=76770 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-20 17:17:04,111 p=76770 u=sina n=ansible | failed: [semaphore] (item=docker-ce) => {"ansible_loop_var": "item", "changed": false, "item": "docker-ce", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 108.156.22.86 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-20 17:17:30,838 p=76770 u=sina n=ansible | changed: [semaphore] => (item=docker-ce-cli)
2023-11-20 17:18:09,391 p=76770 u=sina n=ansible | changed: [semaphore] => (item=containerd.io)
2023-11-20 17:18:09,395 p=76770 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-20 17:18:09,395 p=76770 u=sina n=ansible | semaphore                  : ok=62   changed=49   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-20 17:19:19,999 p=78202 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-20 17:19:20,019 p=78202 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-20 17:19:25,645 p=78202 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:19:25,667 p=78202 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-20 17:19:31,835 p=78202 u=sina n=ansible | ok: [semaphore] => (item=ca-certificates)
2023-11-20 17:19:37,367 p=78202 u=sina n=ansible | ok: [semaphore] => (item=gnupg-agent)
2023-11-20 17:19:43,149 p=78202 u=sina n=ansible | ok: [semaphore] => (item=software-properties-common)
2023-11-20 17:19:43,172 p=78202 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-20 17:19:46,811 p=78202 u=sina n=ansible | ok: [semaphore] => (item=docker)
2023-11-20 17:19:49,995 p=78202 u=sina n=ansible | ok: [semaphore] => (item=docker-compose)
2023-11-20 17:19:50,020 p=78202 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-20 17:19:53,654 p=78202 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:19:53,675 p=78202 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-20 17:19:56,383 p=78202 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:19:56,401 p=78202 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-20 17:21:57,438 p=78202 u=sina n=ansible | changed: [semaphore] => (item=docker-ce)
2023-11-20 17:22:03,465 p=78202 u=sina n=ansible | ok: [semaphore] => (item=docker-ce-cli)
2023-11-20 17:22:09,793 p=78202 u=sina n=ansible | ok: [semaphore] => (item=containerd.io)
2023-11-20 17:22:09,803 p=78202 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-20 17:22:13,305 p=78202 u=sina n=ansible | ok: [semaphore]
2023-11-20 17:22:13,319 p=78202 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-20 17:22:17,183 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:17,192 p=78202 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-20 17:22:25,490 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:25,512 p=78202 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-20 17:22:27,627 p=78202 u=sina n=ansible | changed: [semaphore] => (item=services)
2023-11-20 17:22:27,636 p=78202 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-20 17:22:29,575 p=78202 u=sina n=ansible | changed: [semaphore] => (item=traefik)
2023-11-20 17:22:29,585 p=78202 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-20 17:22:33,155 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:33,163 p=78202 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-20 17:22:34,995 p=78202 u=sina n=ansible | changed: [semaphore] => (item=traefik/traefik)
2023-11-20 17:22:35,005 p=78202 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-20 17:22:38,714 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:38,727 p=78202 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-20 17:22:42,404 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:42,426 p=78202 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-20 17:22:48,946 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:22:48,957 p=78202 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-20 17:22:51,900 p=78202 u=sina n=ansible | changed: [semaphore] => (item=app_net)
2023-11-20 17:22:54,581 p=78202 u=sina n=ansible | changed: [semaphore] => (item=web_net)
2023-11-20 17:22:54,590 p=78202 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-20 17:23:39,004 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:23:39,040 p=78202 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] *************************
2023-11-20 17:23:44,644 p=78202 u=sina n=ansible | changed: [semaphore]
2023-11-20 17:23:44,660 p=78202 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-20 17:23:44,661 p=78202 u=sina n=ansible | semaphore                  : ok=19   changed=13   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 12:51:30,408 p=9488 u=sina n=ansible | ERROR! conflicting action statements: file, mode

The error appears to be in '/home/sina/ansible-project/roles/awx/tasks/copy.yml': line 9, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: create subdir files
  ^ here

2023-11-21 12:52:37,937 p=9535 u=sina n=ansible | ERROR! conflicting action statements: file, mode

The error appears to be in '/home/sina/ansible-project/roles/awx/tasks/copy.yml': line 9, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: create subdir files
  ^ here

2023-11-21 12:53:21,776 p=9566 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 12:53:21,795 p=9566 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 12:53:27,794 p=9566 u=sina n=ansible | ok: [semaphore]
2023-11-21 12:53:27,843 p=9566 u=sina n=ansible | TASK [awx : create /opt/srevices dir] ******************************************
2023-11-21 12:53:29,971 p=9566 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 12:53:29,994 p=9566 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 12:53:30,030 p=9566 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'root_dir' is undefined. 'root_dir' is undefined\n\nThe error appears to be in '/home/sina/ansible-project/roles/awx/tasks/copy.yml': line 9, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: create subdir files\n  ^ here\n"}
2023-11-21 12:53:30,034 p=9566 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 12:53:30,034 p=9566 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 12:54:02,280 p=9631 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 12:54:02,298 p=9631 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 12:54:07,879 p=9631 u=sina n=ansible | ok: [semaphore]
2023-11-21 12:54:07,912 p=9631 u=sina n=ansible | TASK [awx : create /opt/srevices dir] ******************************************
2023-11-21 12:54:10,023 p=9631 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 12:54:10,037 p=9631 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 12:54:12,180 p=9631 u=sina n=ansible | changed: [semaphore] => (item=redis_socket)
2023-11-21 12:54:12,207 p=9631 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 12:54:16,611 p=9631 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "checksum": "aba2bec60f6454fe7d45e3e8c813bf87f1db9711", "msg": "Destination directory /opt/srevices/awxcompose does not exist"}
2023-11-21 12:54:16,615 p=9631 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 12:54:16,616 p=9631 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 12:56:16,675 p=9787 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 12:56:16,691 p=9787 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 12:56:22,662 p=9787 u=sina n=ansible | ok: [semaphore]
2023-11-21 12:56:22,695 p=9787 u=sina n=ansible | TASK [awx : create /opt/srevices dir] ******************************************
2023-11-21 12:56:24,897 p=9787 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 12:56:26,942 p=9787 u=sina n=ansible | changed: [semaphore] => (item=services/awxcompose)
2023-11-21 12:56:26,955 p=9787 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 12:56:28,991 p=9787 u=sina n=ansible | changed: [semaphore] => (item=awxcompose/redis_socket)
2023-11-21 12:56:29,007 p=9787 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 12:56:33,338 p=9787 u=sina n=ansible | changed: [semaphore]
2023-11-21 12:56:33,353 p=9787 u=sina n=ansible | TASK [awx : copy mail-server compose file to host] *****************************
2023-11-21 12:56:37,923 p=9787 u=sina n=ansible | changed: [semaphore] => (item=credentials.py)
2023-11-21 12:56:42,947 p=9787 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 12:56:47,738 p=9787 u=sina n=ansible | changed: [semaphore] => (item=environment.sh)
2023-11-21 12:56:52,441 p=9787 u=sina n=ansible | changed: [semaphore] => (item=nginx.conf)
2023-11-21 12:56:56,543 p=9787 u=sina n=ansible | changed: [semaphore] => (item=redis.conf)
2023-11-21 12:57:00,529 p=9787 u=sina n=ansible | changed: [semaphore] => (item=SECRET_KEY)
2023-11-21 12:57:00,583 p=9787 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 12:57:00,583 p=9787 u=sina n=ansible | semaphore                  : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:02:24,878 p=10146 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:02:24,896 p=10146 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:02:30,742 p=10146 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:02:30,769 p=10146 u=sina n=ansible | TASK [awx : create /opt/srevices dir] ******************************************
2023-11-21 13:02:32,806 p=10146 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:02:34,952 p=10146 u=sina n=ansible | changed: [semaphore] => (item=services/awxcompose)
2023-11-21 13:02:34,965 p=10146 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:02:37,210 p=10146 u=sina n=ansible | ok: [semaphore] => (item=awxcompose/redis_socket)
2023-11-21 13:02:37,222 p=10146 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 13:02:41,304 p=10146 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:02:41,315 p=10146 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:02:45,041 p=10146 u=sina n=ansible | ok: [semaphore] => (item=credentials.py)
2023-11-21 13:02:48,828 p=10146 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 13:02:52,522 p=10146 u=sina n=ansible | ok: [semaphore] => (item=environment.sh)
2023-11-21 13:02:56,246 p=10146 u=sina n=ansible | ok: [semaphore] => (item=nginx.conf)
2023-11-21 13:02:59,942 p=10146 u=sina n=ansible | ok: [semaphore] => (item=redis.conf)
2023-11-21 13:03:03,627 p=10146 u=sina n=ansible | ok: [semaphore] => (item=SECRET_KEY)
2023-11-21 13:03:03,671 p=10146 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:03:03,671 p=10146 u=sina n=ansible | semaphore                  : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:03:35,129 p=10319 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:03:35,146 p=10319 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:03:39,941 p=10319 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:03:39,970 p=10319 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 13:03:42,236 p=10319 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:03:44,268 p=10319 u=sina n=ansible | ok: [semaphore] => (item=services/awxcompose)
2023-11-21 13:03:44,281 p=10319 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:03:46,198 p=10319 u=sina n=ansible | changed: [semaphore] => (item=awxcompose/redis_socket)
2023-11-21 13:03:46,209 p=10319 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 13:03:50,402 p=10319 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:03:50,414 p=10319 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:03:54,285 p=10319 u=sina n=ansible | changed: [semaphore] => (item=credentials.py)
2023-11-21 13:03:58,001 p=10319 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 13:04:01,792 p=10319 u=sina n=ansible | changed: [semaphore] => (item=environment.sh)
2023-11-21 13:04:05,783 p=10319 u=sina n=ansible | changed: [semaphore] => (item=nginx.conf)
2023-11-21 13:04:10,127 p=10319 u=sina n=ansible | changed: [semaphore] => (item=redis.conf)
2023-11-21 13:04:13,871 p=10319 u=sina n=ansible | changed: [semaphore] => (item=SECRET_KEY)
2023-11-21 13:04:13,915 p=10319 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:04:13,916 p=10319 u=sina n=ansible | semaphore                  : ok=5    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:06:33,651 p=10564 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:06:33,667 p=10564 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:06:39,479 p=10564 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:06:39,510 p=10564 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 13:06:41,693 p=10564 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:06:43,687 p=10564 u=sina n=ansible | ok: [semaphore] => (item=services/awxcompose)
2023-11-21 13:06:43,699 p=10564 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:06:45,739 p=10564 u=sina n=ansible | ok: [semaphore] => (item=awxcompose/redis_socket)
2023-11-21 13:06:45,749 p=10564 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 13:06:49,936 p=10564 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:06:49,946 p=10564 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:06:53,833 p=10564 u=sina n=ansible | ok: [semaphore] => (item=credentials.py)
2023-11-21 13:06:57,620 p=10564 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 13:07:01,923 p=10564 u=sina n=ansible | ok: [semaphore] => (item=environment.sh)
2023-11-21 13:07:05,645 p=10564 u=sina n=ansible | ok: [semaphore] => (item=nginx.conf)
2023-11-21 13:07:09,806 p=10564 u=sina n=ansible | ok: [semaphore] => (item=redis.conf)
2023-11-21 13:07:13,868 p=10564 u=sina n=ansible | ok: [semaphore] => (item=SECRET_KEY)
2023-11-21 13:07:13,916 p=10564 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:07:13,916 p=10564 u=sina n=ansible | semaphore                  : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:32:35,999 p=12068 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:32:36,019 p=12068 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:32:37,061 p=12068 u=sina n=ansible | fatal: [semaphore]: UNREACHABLE! => {"changed": false, "msg": "Failed to create temporary directory. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \"/tmp\", for more error information use -vvv. Failed command was: ( umask 77 && mkdir -p \"` echo /tmp `\"&& mkdir \"` echo /tmp/ansible-tmp-1700560956.0353544-12072-136963613718826 `\" && echo ansible-tmp-1700560956.0353544-12072-136963613718826=\"` echo /tmp/ansible-tmp-1700560956.0353544-12072-136963613718826 `\" ), exited with result 254, stdout output: Welcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.15.0-86-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue Nov 21 13:32:36 +0330 2023\n\n  System load:                      0.01513671875\n  Usage of /:                       47.9% of 22.85GB\n  Memory usage:                     14%\n  Swap usage:                       0%\n  Processes:                        238\n  Users logged in:                  1\n  IPv4 address for br-12a3f9a2fc2e: 172.22.0.1\n  IPv4 address for br-40c6727fbe1e: 172.19.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            188.121.105.58\n\n * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s\n   just raised the bar for easy, resilient and secure K8s cluster deployment.\n\n   https://ubuntu.com/engage/secure-kubernetes-at-the-edge\n\nExpanded Security Maintenance for Applications is not enabled.\n\n29 updates can be applied immediately.\nTo see these additional updates run: apt list --upgradable\n\n1 additional security update can be applied with ESM Apps.\nLearn more about enabling ESM Apps service at https://ubuntu.com/esm\n\n\n*** System restart required ***\nThere were too many logins for 'ubuntu'.\n", "unreachable": true}
2023-11-21 13:32:37,062 p=12068 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:32:37,062 p=12068 u=sina n=ansible | semaphore                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:33:43,221 p=12114 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:33:43,243 p=12114 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:33:44,349 p=12114 u=sina n=ansible | fatal: [semaphore]: UNREACHABLE! => {"changed": false, "msg": "Failed to create temporary directory. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \"/tmp\", for more error information use -vvv. Failed command was: ( umask 77 && mkdir -p \"` echo /tmp `\"&& mkdir \"` echo /tmp/ansible-tmp-1700561023.261318-12125-249282531614250 `\" && echo ansible-tmp-1700561023.261318-12125-249282531614250=\"` echo /tmp/ansible-tmp-1700561023.261318-12125-249282531614250 `\" ), exited with result 254, stdout output: Welcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.15.0-86-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Tue Nov 21 13:33:43 +0330 2023\n\n  System load:                      0.00341796875\n  Usage of /:                       47.9% of 22.85GB\n  Memory usage:                     13%\n  Swap usage:                       0%\n  Processes:                        226\n  Users logged in:                  1\n  IPv4 address for br-12a3f9a2fc2e: 172.22.0.1\n  IPv4 address for br-40c6727fbe1e: 172.19.0.1\n  IPv4 address for docker0:         172.17.0.1\n  IPv4 address for eth0:            188.121.105.58\n\n * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s\n   just raised the bar for easy, resilient and secure K8s cluster deployment.\n\n   https://ubuntu.com/engage/secure-kubernetes-at-the-edge\n\nExpanded Security Maintenance for Applications is not enabled.\n\n29 updates can be applied immediately.\nTo see these additional updates run: apt list --upgradable\n\n1 additional security update can be applied with ESM Apps.\nLearn more about enabling ESM Apps service at https://ubuntu.com/esm\n\n\n*** System restart required ***\nThere were too many logins for 'ubuntu'.\n", "unreachable": true}
2023-11-21 13:33:44,351 p=12114 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:33:44,351 p=12114 u=sina n=ansible | semaphore                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 13:37:23,952 p=12279 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:37:23,976 p=12279 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:37:30,313 p=12279 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:37:30,345 p=12279 u=sina n=ansible | TASK [awx : Create /opt/services/services/awx/pgdocker directory] **************
2023-11-21 13:37:32,568 p=12279 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:37:32,583 p=12279 u=sina n=ansible | TASK [awx : Get full path of postgres data dir] ********************************
2023-11-21 13:37:34,720 p=12279 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:37:34,735 p=12279 u=sina n=ansible | TASK [awx : Register temporary docker container] *******************************
2023-11-21 13:37:34,761 p=12279 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:37:34,772 p=12279 u=sina n=ansible | TASK [awx : Check for existing Postgres data (run from inside the container for access to file)] ***
2023-11-21 13:37:36,387 p=12279 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 13:38:43,397 p=12375 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:38:43,419 p=12375 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:38:49,371 p=12375 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:38:49,401 p=12375 u=sina n=ansible | TASK [awx : Create /opt/services/awx/pgdocker directory] ***********************
2023-11-21 13:38:51,484 p=12375 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:38:51,496 p=12375 u=sina n=ansible | TASK [awx : Get full path of postgres data dir] ********************************
2023-11-21 13:38:53,767 p=12375 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:38:53,777 p=12375 u=sina n=ansible | TASK [awx : Register temporary docker container] *******************************
2023-11-21 13:38:53,802 p=12375 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:38:53,823 p=12375 u=sina n=ansible | TASK [awx : Check for existing Postgres data (run from inside the container for access to file)] ***
2023-11-21 13:39:00,014 p=12375 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": "docker run --rm -v '/opt/services/awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\"\n", "delta": "0:00:04.298749", "end": "2023-11-21 13:38:59.878156", "msg": "non-zero return code", "rc": 1, "start": "2023-11-21 13:38:55.579407", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2023-11-21 13:39:00,014 p=12375 u=sina n=ansible | ...ignoring
2023-11-21 13:39:00,023 p=12375 u=sina n=ansible | TASK [awx : Record Postgres version] *******************************************
2023-11-21 13:39:00,055 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,065 p=12375 u=sina n=ansible | TASK [awx : Determine whether to upgrade postgres] *****************************
2023-11-21 13:39:00,085 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,095 p=12375 u=sina n=ansible | TASK [awx : Set up new postgres paths pre-upgrade] *****************************
2023-11-21 13:39:00,133 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,145 p=12375 u=sina n=ansible | TASK [awx : Stop AWX before upgrading postgres] ********************************
2023-11-21 13:39:00,179 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,190 p=12375 u=sina n=ansible | TASK [awx : Upgrade Postgres] **************************************************
2023-11-21 13:39:00,224 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,238 p=12375 u=sina n=ansible | TASK [awx : Copy old pg_hba.conf] **********************************************
2023-11-21 13:39:00,271 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,282 p=12375 u=sina n=ansible | TASK [awx : Remove old data directory] *****************************************
2023-11-21 13:39:00,316 p=12375 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:39:00,329 p=12375 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 13:39:02,281 p=12375 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:39:04,214 p=12375 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 13:39:06,159 p=12375 u=sina n=ansible | changed: [semaphore] => (item=services/awx/awxcompose)
2023-11-21 13:39:06,170 p=12375 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:39:08,105 p=12375 u=sina n=ansible | changed: [semaphore] => (item=awx/awxcompose/redis_socket)
2023-11-21 13:39:08,117 p=12375 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 13:39:12,305 p=12375 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:39:12,316 p=12375 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:39:16,556 p=12375 u=sina n=ansible | changed: [semaphore] => (item=credentials.py)
2023-11-21 13:39:20,603 p=12375 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 13:39:24,799 p=12375 u=sina n=ansible | changed: [semaphore] => (item=environment.sh)
2023-11-21 13:39:29,091 p=12375 u=sina n=ansible | changed: [semaphore] => (item=nginx.conf)
2023-11-21 13:39:33,504 p=12375 u=sina n=ansible | changed: [semaphore] => (item=redis.conf)
2023-11-21 13:39:37,901 p=12375 u=sina n=ansible | changed: [semaphore] => (item=SECRET_KEY)
2023-11-21 13:39:37,912 p=12375 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:39:41,793 p=12375 u=sina n=ansible | changed: [semaphore] => (item=redis.conf)
2023-11-21 13:39:41,839 p=12375 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:39:41,840 p=12375 u=sina n=ansible | semaphore                  : ok=10   changed=8    unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2023-11-21 13:43:44,375 p=12742 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:43:44,395 p=12742 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:43:50,279 p=12742 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:43:50,314 p=12742 u=sina n=ansible | TASK [awx : Create /opt/services/awx/pgdocker directory] ***********************
2023-11-21 13:43:52,781 p=12742 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:43:52,790 p=12742 u=sina n=ansible | TASK [awx : Get full path of postgres data dir] ********************************
2023-11-21 13:43:54,823 p=12742 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:43:54,833 p=12742 u=sina n=ansible | TASK [awx : Register temporary docker container] *******************************
2023-11-21 13:43:54,861 p=12742 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:43:54,871 p=12742 u=sina n=ansible | TASK [awx : Check for existing Postgres data (run from inside the container for access to file)] ***
2023-11-21 13:43:59,601 p=12742 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": "docker run --rm -v '/opt/services/awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\"\n", "delta": "0:00:02.276263", "end": "2023-11-21 13:43:59.345747", "msg": "non-zero return code", "rc": 1, "start": "2023-11-21 13:43:57.069484", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2023-11-21 13:43:59,602 p=12742 u=sina n=ansible | ...ignoring
2023-11-21 13:43:59,616 p=12742 u=sina n=ansible | TASK [awx : Record Postgres version] *******************************************
2023-11-21 13:43:59,647 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,657 p=12742 u=sina n=ansible | TASK [awx : Determine whether to upgrade postgres] *****************************
2023-11-21 13:43:59,676 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,686 p=12742 u=sina n=ansible | TASK [awx : Set up new postgres paths pre-upgrade] *****************************
2023-11-21 13:43:59,721 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,734 p=12742 u=sina n=ansible | TASK [awx : Stop AWX before upgrading postgres] ********************************
2023-11-21 13:43:59,771 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,780 p=12742 u=sina n=ansible | TASK [awx : Upgrade Postgres] **************************************************
2023-11-21 13:43:59,815 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,824 p=12742 u=sina n=ansible | TASK [awx : Copy old pg_hba.conf] **********************************************
2023-11-21 13:43:59,862 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,873 p=12742 u=sina n=ansible | TASK [awx : Remove old data directory] *****************************************
2023-11-21 13:43:59,910 p=12742 u=sina n=ansible | skipping: [semaphore]
2023-11-21 13:43:59,921 p=12742 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 13:44:02,100 p=12742 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:44:04,043 p=12742 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 13:44:06,009 p=12742 u=sina n=ansible | ok: [semaphore] => (item=services/awx/awxcompose)
2023-11-21 13:44:06,021 p=12742 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:44:08,137 p=12742 u=sina n=ansible | ok: [semaphore] => (item=awx/awxcompose/redis_socket)
2023-11-21 13:44:08,149 p=12742 u=sina n=ansible | TASK [awx : copy awxcompose compose file to host] ******************************
2023-11-21 13:44:12,541 p=12742 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:44:12,550 p=12742 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:44:16,335 p=12742 u=sina n=ansible | ok: [semaphore] => (item=credentials.py)
2023-11-21 13:44:20,947 p=12742 u=sina n=ansible | ok: [semaphore] => (item=docker-compose.yml)
2023-11-21 13:44:25,421 p=12742 u=sina n=ansible | ok: [semaphore] => (item=environment.sh)
2023-11-21 13:44:30,179 p=12742 u=sina n=ansible | ok: [semaphore] => (item=nginx.conf)
2023-11-21 13:44:33,946 p=12742 u=sina n=ansible | ok: [semaphore] => (item=redis.conf)
2023-11-21 13:44:37,634 p=12742 u=sina n=ansible | ok: [semaphore] => (item=SECRET_KEY)
2023-11-21 13:44:37,644 p=12742 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 13:44:41,933 p=12742 u=sina n=ansible | ok: [semaphore] => (item=redis.conf)
2023-11-21 13:44:42,009 p=12742 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:44:42,009 p=12742 u=sina n=ansible | semaphore                  : ok=10   changed=3    unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2023-11-21 13:59:16,165 p=14297 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:59:16,182 p=14297 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:59:22,200 p=14297 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:59:22,232 p=14297 u=sina n=ansible | TASK [awx : Create /opt/services/awx/pgdocker directory] ***********************
2023-11-21 13:59:24,339 p=14297 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:59:24,350 p=14297 u=sina n=ansible | TASK [awx : Get full path of postgres data dir] ********************************
2023-11-21 13:59:26,530 p=14297 u=sina n=ansible | changed: [semaphore]
2023-11-21 13:59:26,545 p=14297 u=sina n=ansible | TASK [awx : Register temporary docker container] *******************************
2023-11-21 13:59:26,569 p=14297 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:59:26,581 p=14297 u=sina n=ansible | TASK [awx : Check for existing Postgres data (run from inside the container for access to file)] ***
2023-11-21 13:59:28,852 p=14297 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 13:59:45,147 p=14369 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 13:59:45,161 p=14369 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 13:59:50,280 p=14369 u=sina n=ansible | ok: [semaphore]
2023-11-21 13:59:50,327 p=14369 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 13:59:52,506 p=14369 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 13:59:54,450 p=14369 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 13:59:54,479 p=14369 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 13:59:56,511 p=14369 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "msg": "src option requires state to be 'link' or 'hard'", "path": "/opt/services/awx/installer"}
2023-11-21 13:59:56,514 p=14369 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 13:59:56,514 p=14369 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:00:26,065 p=14448 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:00:26,080 p=14448 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:00:31,517 p=14448 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:00:31,552 p=14448 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:00:33,879 p=14448 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:00:35,850 p=14448 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:00:35,862 p=14448 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:00:37,781 p=14448 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "gid": 0, "group": "root", "mode": "0750", "msg": "src option requires state to be 'link' or 'hard'", "owner": "root", "path": "/opt/services/awx", "size": 4096, "state": "directory", "uid": 0}
2023-11-21 14:00:37,783 p=14448 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:00:37,783 p=14448 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:02:54,172 p=14667 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:02:54,188 p=14667 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:03:00,399 p=14667 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:03:00,440 p=14667 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:03:02,806 p=14667 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:03:04,888 p=14667 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:03:04,921 p=14667 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:03:09,550 p=14667 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "checksum": "5af5312e44777d0cbd7e85fc6eceddb7eaacd11b", "msg": "Unsupported parameters for (ansible.legacy.copy) module: state. Supported parameters include: _original_basename, attributes, backup, checksum, content, dest, directory_mode, follow, force, group, local_follow, mode, owner, remote_src, selevel, serole, setype, seuser, src, unsafe_writes, validate (attr)."}
2023-11-21 14:03:09,552 p=14667 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:03:09,553 p=14667 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:03:42,037 p=14752 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:03:42,056 p=14752 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:03:47,391 p=14752 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:03:47,433 p=14752 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:03:49,711 p=14752 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:03:51,828 p=14752 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:03:51,861 p=14752 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:03:56,660 p=14752 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "checksum": "5af5312e44777d0cbd7e85fc6eceddb7eaacd11b", "msg": "Unsupported parameters for (ansible.legacy.copy) module: state. Supported parameters include: _original_basename, attributes, backup, checksum, content, dest, directory_mode, follow, force, group, local_follow, mode, owner, remote_src, selevel, serole, setype, seuser, src, unsafe_writes, validate (attr)."}
2023-11-21 14:03:56,664 p=14752 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:03:56,665 p=14752 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:05:10,352 p=14869 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:05:10,367 p=14869 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:05:16,538 p=14869 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:05:16,574 p=14869 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:05:18,782 p=14869 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:05:20,798 p=14869 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:05:20,811 p=14869 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:05:25,508 p=14869 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "checksum": "5af5312e44777d0cbd7e85fc6eceddb7eaacd11b", "msg": "Unsupported parameters for (ansible.legacy.copy) module: recursive. Supported parameters include: _original_basename, attributes, backup, checksum, content, dest, directory_mode, follow, force, group, local_follow, mode, owner, remote_src, selevel, serole, setype, seuser, src, unsafe_writes, validate (attr)."}
2023-11-21 14:05:25,509 p=14869 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:05:25,510 p=14869 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:06:40,757 p=15076 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:06:40,773 p=15076 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:06:46,971 p=15076 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:06:47,004 p=15076 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:06:49,276 p=15076 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:06:51,256 p=15076 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:06:51,273 p=15076 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:06:55,673 p=15076 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "checksum": "5af5312e44777d0cbd7e85fc6eceddb7eaacd11b", "msg": "Unsupported parameters for (ansible.legacy.copy) module: recursive. Supported parameters include: _original_basename, attributes, backup, checksum, content, dest, directory_mode, follow, force, group, local_follow, mode, owner, remote_src, selevel, serole, setype, seuser, src, unsafe_writes, validate (attr)."}
2023-11-21 14:06:55,676 p=15076 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:06:55,676 p=15076 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 14:08:38,247 p=15236 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:08:38,264 p=15236 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:08:44,320 p=15236 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:08:44,354 p=15236 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:11:56,796 p=15236 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 14:11:58,787 p=15899 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:11:58,810 p=15899 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:12:04,181 p=15899 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:12:04,235 p=15899 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:15:48,536 p=15899 u=sina n=ansible | changed: [semaphore]
2023-11-21 14:15:48,548 p=15899 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:15:50,593 p=15899 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:15:52,551 p=15899 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:15:52,608 p=15899 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:15:52,608 p=15899 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 14:55:50,859 p=18049 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 14:55:50,875 p=18049 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 14:55:56,704 p=18049 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:55:56,732 p=18049 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 14:59:42,087 p=18049 u=sina n=ansible | ok: [semaphore]
2023-11-21 14:59:42,096 p=18049 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 14:59:44,142 p=18049 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 14:59:46,071 p=18049 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 14:59:46,082 p=18049 u=sina n=ansible | TASK [awx : Change the working directory to somedir/ and run the command as db_owner if /path/to/database does not exist] ***
2023-11-21 14:59:59,070 p=18049 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:10.592208", "end": "2023-11-21 14:59:58.921320", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 14:59:48.329112", "stderr": "[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected\npaths (use -vvvvv to see paths)", "stderr_lines": ["[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected", "paths (use -vvvvv to see paths)"], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:03.238327\", \"end\": \"2023-11-21 14:59:58.293507\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 14:59:55.055180\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:03.238327\", \"end\": \"2023-11-21 14:59:58.293507\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 14:59:55.055180\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 14:59:59,072 p=18049 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 14:59:59,072 p=18049 u=sina n=ansible | semaphore                  : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 15:03:37,403 p=18922 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 15:03:37,417 p=18922 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 15:03:43,432 p=18922 u=sina n=ansible | ok: [semaphore]
2023-11-21 15:03:43,463 p=18922 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 15:03:45,590 p=18922 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 15:03:47,535 p=18922 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 15:03:47,547 p=18922 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 15:07:47,054 p=18922 u=sina n=ansible | ok: [semaphore]
2023-11-21 15:07:47,065 p=18922 u=sina n=ansible | TASK [awx : Change the working directory to somedir/ and run the command as db_owner if /path/to/database does not exist] ***
2023-11-21 15:07:59,189 p=18922 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:10.030916", "end": "2023-11-21 15:07:59.028857", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 15:07:48.997941", "stderr": "[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected\npaths (use -vvvvv to see paths)", "stderr_lines": ["[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected", "paths (use -vvvvv to see paths)"], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:03.378122\", \"end\": \"2023-11-21 15:07:58.407853\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 15:07:55.029731\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:03.378122\", \"end\": \"2023-11-21 15:07:58.407853\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 15:07:55.029731\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 15:07:59,191 p=18922 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 15:07:59,191 p=18922 u=sina n=ansible | semaphore                  : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 15:10:13,037 p=19649 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 15:10:13,050 p=19649 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 15:10:18,409 p=19649 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 18:28:37,329 p=22180 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 18:28:37,344 p=22180 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 18:28:44,243 p=22180 u=sina n=ansible | ok: [semaphore]
2023-11-21 18:28:44,270 p=22180 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 18:28:46,991 p=22180 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 18:28:49,098 p=22180 u=sina n=ansible | changed: [semaphore] => (item=services/awx)
2023-11-21 18:28:49,109 p=22180 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 18:33:18,252 p=22180 u=sina n=ansible | changed: [semaphore]
2023-11-21 18:33:18,263 p=22180 u=sina n=ansible | TASK [awx : Change the working directory to somedir/ and run the command as db_owner if /path/to/database does not exist] ***
2023-11-21 18:33:23,166 p=22180 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:02.733761", "end": "2023-11-21 18:33:23.417073", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 18:33:20.683312", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nfatal: [localhost]: FAILED! => {\n    \"assertion\": \"admin_password is defined and admin_password != ''\",\n    \"changed\": false,\n    \"evaluated_to\": false,\n    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "fatal: [localhost]: FAILED! => {", "    \"assertion\": \"admin_password is defined and admin_password != ''\",", "    \"changed\": false,", "    \"evaluated_to\": false,", "    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"", "}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   "]}
2023-11-21 18:33:23,174 p=22180 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 18:33:23,174 p=22180 u=sina n=ansible | semaphore                  : ok=3    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 18:35:54,549 p=23509 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 18:35:54,564 p=23509 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 18:36:00,362 p=23509 u=sina n=ansible | ok: [semaphore]
2023-11-21 18:36:00,394 p=23509 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 18:36:02,616 p=23509 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 18:36:04,656 p=23509 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 18:36:04,672 p=23509 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 18:39:48,307 p=23509 u=sina n=ansible | changed: [semaphore]
2023-11-21 18:39:48,317 p=23509 u=sina n=ansible | TASK [awx : Change the working directory to somedir/ and run the command as db_owner if /path/to/database does not exist] ***
2023-11-21 18:39:59,783 p=23509 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:09.310630", "end": "2023-11-21 18:40:00.038042", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 18:39:50.727412", "stderr": "[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected\npaths (use -vvvvv to see paths)", "stderr_lines": ["[WARNING]: Unable to find '/opt/services/awx/installer/../VERSION' in expected", "paths (use -vvvvv to see paths)"], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.359877\", \"end\": \"2023-11-21 18:39:59.336092\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 18:39:56.976215\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.359877\", \"end\": \"2023-11-21 18:39:59.336092\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 18:39:56.976215\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', playbook_dir + '/../VERSION') }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while running the lookup plugin 'file'. Error was a <class 'ansible.errors.AnsibleError'>, original message: could not locate file in lookup: /opt/services/awx/installer/../VERSION\"}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=9    changed=2    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 18:39:59,786 p=23509 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 18:39:59,786 p=23509 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 18:40:36,912 p=24272 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 18:40:36,926 p=24272 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 18:40:37,380 p=24272 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 18:49:06,710 p=24820 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 18:49:06,724 p=24820 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 18:49:12,954 p=24820 u=sina n=ansible | ok: [semaphore]
2023-11-21 18:49:12,978 p=24820 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 18:49:15,316 p=24820 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 18:49:15,329 p=24820 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 18:49:16,072 p=24820 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-21 18:49:58,362 p=24957 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 18:49:58,375 p=24957 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 18:50:03,440 p=24957 u=sina n=ansible | ok: [semaphore]
2023-11-21 18:50:03,464 p=24957 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 18:50:05,691 p=24957 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 18:50:05,704 p=24957 u=sina n=ansible | TASK [awx : create subdir files] ***********************************************
2023-11-21 19:30:55,843 p=24957 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"msg": "A vault password or secret must be specified to decrypt /home/sina/ansible-project/roles/awx/files/awx/awx/main/tests/data/ansible_utils/playbooks/valid/vault.yml"}
2023-11-21 19:30:55,844 p=24957 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 19:30:55,845 p=24957 u=sina n=ansible | semaphore                  : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:19:09,982 p=34181 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:19:10,003 p=34181 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:19:16,980 p=34181 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:19:17,023 p=34181 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:19:19,194 p=34181 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:19:21,270 p=34181 u=sina n=ansible | changed: [semaphore] => (item=services/awx)
2023-11-21 20:19:21,304 p=34181 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:19:31,132 p=34181 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:19:31,201 p=34181 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:19:31,201 p=34181 u=sina n=ansible | semaphore                  : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 20:25:57,404 p=34583 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:25:57,418 p=34583 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:26:06,119 p=34583 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:26:06,146 p=34583 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:26:08,764 p=34583 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:26:11,026 p=34583 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:26:11,042 p=34583 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:26:22,171 p=34583 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:26:22,183 p=34583 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:26:24,282 p=34583 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": false, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": null, "end": null, "msg": "Unable to change directory before execution: [Errno 2] No such file or directory: b'/opt/services/awx/*/installer'", "rc": null, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2023-11-21 20:26:24,284 p=34583 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:26:24,284 p=34583 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:27:15,453 p=34719 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:27:15,468 p=34719 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:27:20,587 p=34719 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:27:20,614 p=34719 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:27:22,839 p=34719 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:27:24,774 p=34719 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:27:24,786 p=34719 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:27:38,222 p=34719 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:27:38,244 p=34719 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:27:43,228 p=34719 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:02.669313", "end": "2023-11-21 20:27:42.950753", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 20:27:40.281440", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nfatal: [localhost]: FAILED! => {\n    \"assertion\": \"admin_password is defined and admin_password != ''\",\n    \"changed\": false,\n    \"evaluated_to\": false,\n    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "fatal: [localhost]: FAILED! => {", "    \"assertion\": \"admin_password is defined and admin_password != ''\",", "    \"changed\": false,", "    \"evaluated_to\": false,", "    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"", "}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   "]}
2023-11-21 20:27:43,236 p=34719 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:27:43,236 p=34719 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:28:09,509 p=34828 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:28:09,525 p=34828 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:28:14,559 p=34828 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:28:14,595 p=34828 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:28:16,804 p=34828 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:28:18,726 p=34828 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:28:18,739 p=34828 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:28:29,479 p=34828 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:28:29,489 p=34828 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:28:33,798 p=34828 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:02.122074", "end": "2023-11-21 20:28:33.534833", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 20:28:31.412759", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nfatal: [localhost]: FAILED! => {\n    \"assertion\": \"admin_password is defined and admin_password != ''\",\n    \"changed\": false,\n    \"evaluated_to\": false,\n    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "fatal: [localhost]: FAILED! => {", "    \"assertion\": \"admin_password is defined and admin_password != ''\",", "    \"changed\": false,", "    \"evaluated_to\": false,", "    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"", "}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   "]}
2023-11-21 20:28:33,799 p=34828 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:28:33,800 p=34828 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:29:03,720 p=34929 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:29:03,738 p=34929 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:29:08,850 p=34929 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:29:08,887 p=34929 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:29:11,122 p=34929 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:29:13,117 p=34929 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:29:13,132 p=34929 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:29:23,872 p=34929 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:29:23,884 p=34929 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:29:28,181 p=34929 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:02.129628", "end": "2023-11-21 20:29:27.941326", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 20:29:25.811698", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nfatal: [localhost]: FAILED! => {\n    \"assertion\": \"admin_password is defined and admin_password != ''\",\n    \"changed\": false,\n    \"evaluated_to\": false,\n    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "fatal: [localhost]: FAILED! => {", "    \"assertion\": \"admin_password is defined and admin_password != ''\",", "    \"changed\": false,", "    \"evaluated_to\": false,", "    \"msg\": \"Set the value of 'admin_password' in the inventory file.\"", "}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   "]}
2023-11-21 20:29:28,182 p=34929 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:29:28,183 p=34929 u=sina n=ansible | semaphore                  : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:37:03,514 p=35379 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:37:03,529 p=35379 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:37:10,157 p=35379 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:37:10,183 p=35379 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:37:12,401 p=35379 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:37:14,727 p=35379 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:37:14,739 p=35379 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:37:26,819 p=35379 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:37:26,835 p=35379 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 20:37:33,038 p=35379 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 20:37:33,050 p=35379 u=sina n=ansible | TASK [awx : copy important file to host] ***************************************
2023-11-21 20:37:37,031 p=35379 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml)
2023-11-21 20:37:37,043 p=35379 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:37:57,081 p=35379 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:17.378686", "end": "2023-11-21 20:37:56.894242", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 20:37:39.515556", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.779009\", \"end\": \"2023-11-21 20:37:48.514104\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 20:37:45.735095\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/awxcompose directory] ***********************\nok: [localhost]\n\nTASK [local_docker : Create Redis socket directory] ****************************\nok: [localhost]\n\nTASK [local_docker : Create Docker Compose Configuration] **********************\nok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})\nok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})\nok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})\n\nTASK [local_docker : Render SECRET_KEY file] ***********************************\nok: [localhost]\n\nTASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***\nchanged: [localhost]\n\nTASK [local_docker : Run migrations in task container] *************************\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:02.187975\", \"end\": \"2023-11-21 20:37:56.790977\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 20:37:54.603002\", \"stderr\": \"Creating network \\\"awxcompose_default\\\" with the default driver\\nCreating awx_redis ... \\r\\nCreating awx_postgres ... \\r\\nCreating awx_postgres ... done\\r\\nCreating awx_redis    ... done\\r\\nCreating awx_web      ... \\r\\nHost is already in use by another container\\nCreating awx_web      ... error\\r\\n\\nERROR: for awx_web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\\n\\nERROR: for web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\\nEncountered errors while bringing up the project.\", \"stderr_lines\": [\"Creating network \\\"awxcompose_default\\\" with the default driver\", \"Creating awx_redis ... \", \"Creating awx_postgres ... \", \"Creating awx_postgres ... done\", \"Creating awx_redis    ... done\", \"Creating awx_web      ... \", \"Host is already in use by another container\", \"Creating awx_web      ... error\", \"\", \"ERROR: for awx_web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\", \"\", \"ERROR: for web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\", \"Encountered errors while bringing up the project.\"], \"stdout\": \"\", \"stdout_lines\": []}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=15   changed=4    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.779009\", \"end\": \"2023-11-21 20:37:48.514104\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 20:37:45.735095\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/awxcompose directory] ***********************", "ok: [localhost]", "", "TASK [local_docker : Create Redis socket directory] ****************************", "ok: [localhost]", "", "TASK [local_docker : Create Docker Compose Configuration] **********************", "ok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})", "", "TASK [local_docker : Render SECRET_KEY file] ***********************************", "ok: [localhost]", "", "TASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***", "changed: [localhost]", "", "TASK [local_docker : Run migrations in task container] *************************", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:02.187975\", \"end\": \"2023-11-21 20:37:56.790977\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 20:37:54.603002\", \"stderr\": \"Creating network \\\"awxcompose_default\\\" with the default driver\\nCreating awx_redis ... \\r\\nCreating awx_postgres ... \\r\\nCreating awx_postgres ... done\\r\\nCreating awx_redis    ... done\\r\\nCreating awx_web      ... \\r\\nHost is already in use by another container\\nCreating awx_web      ... error\\r\\n\\nERROR: for awx_web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\\n\\nERROR: for web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\\nEncountered errors while bringing up the project.\", \"stderr_lines\": [\"Creating network \\\"awxcompose_default\\\" with the default driver\", \"Creating awx_redis ... \", \"Creating awx_postgres ... \", \"Creating awx_postgres ... done\", \"Creating awx_redis    ... done\", \"Creating awx_web      ... \", \"Host is already in use by another container\", \"Creating awx_web      ... error\", \"\", \"ERROR: for awx_web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\", \"\", \"ERROR: for web  Cannot start service web: driver failed programming external connectivity on endpoint awx_web (9082f260f619e2888c4182292d53bbf4d2cd71385504e52556af76f1a521cb5d): Bind for 0.0.0.0:80 failed: port is already allocated\", \"Encountered errors while bringing up the project.\"], \"stdout\": \"\", \"stdout_lines\": []}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=15   changed=4    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 20:37:57,083 p=35379 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:37:57,083 p=35379 u=sina n=ansible | semaphore                  : ok=5    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 20:45:01,866 p=35870 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:45:01,880 p=35870 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:45:08,081 p=35870 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:45:08,133 p=35870 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:45:10,373 p=35870 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:45:12,824 p=35870 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:45:12,838 p=35870 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:45:22,725 p=35870 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:45:22,736 p=35870 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-21 20:45:29,214 p=35870 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 20:45:29,226 p=35870 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-21 20:45:33,215 p=35870 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml.j2)
2023-11-21 20:45:33,227 p=35870 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:46:23,829 p=35870 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:46:23,916 p=35870 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:46:23,916 p=35870 u=sina n=ansible | semaphore                  : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 20:50:37,397 p=36256 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 20:50:37,416 p=36256 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 20:50:43,509 p=36256 u=sina n=ansible | ok: [semaphore]
2023-11-21 20:50:43,536 p=36256 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 20:50:46,160 p=36256 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 20:50:48,530 p=36256 u=sina n=ansible | ok: [semaphore] => (item=services/awx)
2023-11-21 20:50:48,543 p=36256 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 20:51:00,601 p=36256 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:51:00,611 p=36256 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-21 20:51:09,303 p=36256 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 20:51:09,314 p=36256 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-21 20:51:17,241 p=36256 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml.j2)
2023-11-21 20:51:17,255 p=36256 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 20:52:11,659 p=36256 u=sina n=ansible | changed: [semaphore]
2023-11-21 20:52:11,702 p=36256 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 20:52:11,702 p=36256 u=sina n=ansible | semaphore                  : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 21:27:31,451 p=37744 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 21:27:31,471 p=37744 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 21:27:37,399 p=37744 u=sina n=ansible | ok: [semaphore]
2023-11-21 21:27:37,428 p=37744 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 21:27:39,696 p=37744 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 21:27:39,708 p=37744 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 21:27:49,908 p=37744 u=sina n=ansible | changed: [semaphore]
2023-11-21 21:27:49,923 p=37744 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-21 21:27:55,873 p=37744 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 21:27:55,888 p=37744 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-21 21:28:01,103 p=37744 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml.j2)
2023-11-21 21:28:01,114 p=37744 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-21 21:28:08,379 p=37744 u=sina n=ansible | changed: [semaphore]
2023-11-21 21:28:08,390 p=37744 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 21:28:29,813 p=37744 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:19.287344", "end": "2023-11-21 21:28:29.646606", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 21:28:10.359262", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.010809\", \"end\": \"2023-11-21 21:28:18.628986\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:28:16.618177\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/awxcompose directory] ***********************\nok: [localhost]\n\nTASK [local_docker : Create Redis socket directory] ****************************\nok: [localhost]\n\nTASK [local_docker : Create Docker Compose Configuration] **********************\nok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})\nok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})\nok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})\n\nTASK [local_docker : Render SECRET_KEY file] ***********************************\nok: [localhost]\n\nTASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***\nok: [localhost]\n\nTASK [local_docker : Run migrations in task container] *************************\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:05.925210\", \"end\": \"2023-11-21 21:28:29.537658\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:28:23.612448\", \"stderr\": \"Creating network \\\"app_net\\\" with the default driver\\nCreating volume \\\"awxcompose_supervisor-socket\\\" with default driver\\nCreating volume \\\"awxcompose_rsyslog-socket\\\" with default driver\\nCreating volume \\\"awxcompose_rsyslog-config\\\" with default driver\\nPulling task (ansible/awx:23.4.0)...\\nerror parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\", \"stderr_lines\": [\"Creating network \\\"app_net\\\" with the default driver\", \"Creating volume \\\"awxcompose_supervisor-socket\\\" with default driver\", \"Creating volume \\\"awxcompose_rsyslog-socket\\\" with default driver\", \"Creating volume \\\"awxcompose_rsyslog-config\\\" with default driver\", \"Pulling task (ansible/awx:23.4.0)...\", \"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\"], \"stdout\": \"\", \"stdout_lines\": []}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=15   changed=3    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.010809\", \"end\": \"2023-11-21 21:28:18.628986\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:28:16.618177\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/awxcompose directory] ***********************", "ok: [localhost]", "", "TASK [local_docker : Create Redis socket directory] ****************************", "ok: [localhost]", "", "TASK [local_docker : Create Docker Compose Configuration] **********************", "ok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})", "", "TASK [local_docker : Render SECRET_KEY file] ***********************************", "ok: [localhost]", "", "TASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***", "ok: [localhost]", "", "TASK [local_docker : Run migrations in task container] *************************", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:05.925210\", \"end\": \"2023-11-21 21:28:29.537658\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:28:23.612448\", \"stderr\": \"Creating network \\\"app_net\\\" with the default driver\\nCreating volume \\\"awxcompose_supervisor-socket\\\" with default driver\\nCreating volume \\\"awxcompose_rsyslog-socket\\\" with default driver\\nCreating volume \\\"awxcompose_rsyslog-config\\\" with default driver\\nPulling task (ansible/awx:23.4.0)...\\nerror parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\", \"stderr_lines\": [\"Creating network \\\"app_net\\\" with the default driver\", \"Creating volume \\\"awxcompose_supervisor-socket\\\" with default driver\", \"Creating volume \\\"awxcompose_rsyslog-socket\\\" with default driver\", \"Creating volume \\\"awxcompose_rsyslog-config\\\" with default driver\", \"Pulling task (ansible/awx:23.4.0)...\", \"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\"], \"stdout\": \"\", \"stdout_lines\": []}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=15   changed=3    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 21:28:29,816 p=37744 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 21:28:29,816 p=37744 u=sina n=ansible | semaphore                  : ok=6    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 21:32:42,512 p=38127 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 21:32:42,531 p=38127 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 21:32:48,903 p=38127 u=sina n=ansible | ok: [semaphore]
2023-11-21 21:32:48,961 p=38127 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 21:32:51,200 p=38127 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 21:32:51,215 p=38127 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 21:33:02,315 p=38127 u=sina n=ansible | changed: [semaphore]
2023-11-21 21:33:02,336 p=38127 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-21 21:33:09,076 p=38127 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 21:33:09,088 p=38127 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-21 21:33:13,370 p=38127 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml.j2)
2023-11-21 21:33:13,381 p=38127 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-21 21:33:19,542 p=38127 u=sina n=ansible | ok: [semaphore]
2023-11-21 21:33:19,555 p=38127 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 21:33:39,619 p=38127 u=sina n=ansible | fatal: [semaphore]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:17.979409", "end": "2023-11-21 21:33:39.380517", "msg": "non-zero return code", "rc": 2, "start": "2023-11-21 21:33:21.401108", "stderr": "", "stderr_lines": [], "stdout": "\nPLAY [Build and deploy AWX] ****************************************************\n\nTASK [Gathering Facts] *********************************************************\nok: [localhost]\n\nTASK [check_vars : admin_password should be defined] ***************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [check_vars : include_tasks] **********************************************\nskipping: [localhost]\n\nTASK [check_vars : include_tasks] **********************************************\nincluded: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost\n\nTASK [check_vars : postgres_data_dir should be defined] ************************\nok: [localhost] => {\n    \"changed\": false,\n    \"msg\": \"All assertions passed\"\n}\n\nTASK [image_build : Set global version if not provided] ************************\nskipping: [localhost]\n\nTASK [image_build : Verify awx-logos directory exists for official install] ****\nskipping: [localhost]\n\nTASK [image_build : Copy logos for inclusion in sdist] *************************\nskipping: [localhost]\n\nTASK [image_build : Set awx image name] ****************************************\nskipping: [localhost]\n\nTASK [image_build : Render Dockerfile] *****************************************\nskipping: [localhost]\n\nTASK [image_build : Build AWX image] *******************************************\nskipping: [localhost]\n\nTASK [image_build : Tag awx images as latest] **********************************\nskipping: [localhost] => (item=awx) \n\nTASK [image_push : Authenticate with Docker registry if registry password given] ***\nskipping: [localhost]\n\nTASK [image_push : Remove awx image] *******************************************\nskipping: [localhost]\n\nTASK [image_push : Tag and push awx image to registry] *************************\nskipping: [localhost]\n\nTASK [image_push : Set full image path for Registry] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Generate broadcast websocket secret] ************************\nskipping: [localhost]\n\nTASK [kubernetes : fail] *******************************************************\nskipping: [localhost]\n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=openshift_auth.yml) \nskipping: [localhost] => (item=openshift.yml) \n\nTASK [kubernetes : include_tasks] **********************************************\nskipping: [localhost] => (item=kubernetes_auth.yml) \nskipping: [localhost] => (item=kubernetes.yml) \n\nTASK [kubernetes : Use kubectl or oc] ******************************************\nskipping: [localhost]\n\nTASK [kubernetes : set_fact] ***************************************************\nskipping: [localhost]\n\nTASK [kubernetes : Record deployment size] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set expected post-deployment Replicas value] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Get Postgres Service Detail] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************\nskipping: [localhost]\n\nTASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************\nskipping: [localhost]\n\nTASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************\nskipping: [localhost]\n\nTASK [kubernetes : Remove tempfile] ********************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to activate] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Check if Postgres 10 is being used] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Set new pg image] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for pg upgrade] *********************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for change to take affect] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Set env var for new pg version] *****************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to finish upgrading] **********************\nskipping: [localhost]\n\nTASK [kubernetes : Unset upgrade env var] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for Postgres to redeploy] ******************************\nskipping: [localhost]\n\nTASK [kubernetes : Set awx image name] *****************************************\nskipping: [localhost]\n\nTASK [kubernetes : Determine Deployment api version] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Get Root CA file contents] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render Root CA template] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Apply Root CA template] *************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file name] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Set Root CA file location] **********************************\nskipping: [localhost]\n\nTASK [kubernetes : Render deployment templates] ********************************\nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost] => (item=None) \nskipping: [localhost]\n\nTASK [kubernetes : Apply Deployment] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Delete any existing management pod] *************************\nskipping: [localhost]\n\nTASK [kubernetes : Template management pod] ************************************\nskipping: [localhost]\n\nTASK [kubernetes : Create management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Wait for management pod to start] ***************************\nskipping: [localhost]\n\nTASK [kubernetes : Migrate database] *******************************************\nskipping: [localhost]\n\nTASK [kubernetes : Check for Tower Super users] ********************************\nskipping: [localhost]\n\nTASK [kubernetes : create django super user if it does not exist] **************\nskipping: [localhost]\n\nTASK [kubernetes : update django super user password] **************************\nskipping: [localhost]\n\nTASK [kubernetes : Create the default organization if it is needed.] ***********\nskipping: [localhost]\n\nTASK [kubernetes : Delete management pod] **************************************\nskipping: [localhost]\n\nTASK [kubernetes : Scale up deployment] ****************************************\nskipping: [localhost]\n\nTASK [local_docker : Generate broadcast websocket secret] **********************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/pgdocker directory] *************************\nok: [localhost]\n\nTASK [local_docker : Get full path of postgres data dir] ***********************\nchanged: [localhost]\n\nTASK [local_docker : Register temporary docker container] **********************\nok: [localhost]\n\nTASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.314202\", \"end\": \"2023-11-21 21:33:30.084507\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:33:27.770305\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}\n...ignoring\n\nTASK [local_docker : Record Postgres version] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Determine whether to upgrade postgres] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set up new postgres paths pre-upgrade] ********************\nskipping: [localhost]\n\nTASK [local_docker : Stop AWX before upgrading postgres] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Upgrade Postgres] *****************************************\nskipping: [localhost]\n\nTASK [local_docker : Copy old pg_hba.conf] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Remove old data directory] ********************************\nskipping: [localhost]\n\nTASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***\nskipping: [localhost]\n\nTASK [local_docker : Set docker base path] *************************************\nskipping: [localhost]\n\nTASK [local_docker : Ensure directory exists] **********************************\nskipping: [localhost]\n\nTASK [local_docker : Copy awx image to docker execution] ***********************\nskipping: [localhost]\n\nTASK [local_docker : Load awx image] *******************************************\nskipping: [localhost]\n\nTASK [local_docker : Set full image path for local install] ********************\nskipping: [localhost]\n\nTASK [local_docker : Set DockerHub Image Paths] ********************************\nok: [localhost]\n\nTASK [local_docker : Create ~/.awx/awxcompose directory] ***********************\nok: [localhost]\n\nTASK [local_docker : Create Redis socket directory] ****************************\nok: [localhost]\n\nTASK [local_docker : Create Docker Compose Configuration] **********************\nok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})\nchanged: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})\nok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})\nok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})\n\nTASK [local_docker : Render SECRET_KEY file] ***********************************\nok: [localhost]\n\nTASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***\nok: [localhost]\n\nTASK [local_docker : Run migrations in task container] *************************\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:03.853262\", \"end\": \"2023-11-21 21:33:39.269114\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:33:35.415852\", \"stderr\": \"Pulling web (ansible/awx:23.4.0)...\\nerror parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\", \"stderr_lines\": [\"Pulling web (ansible/awx:23.4.0)...\", \"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\"], \"stdout\": \"\", \"stdout_lines\": []}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=15   changed=3    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   ", "stdout_lines": ["", "PLAY [Build and deploy AWX] ****************************************************", "", "TASK [Gathering Facts] *********************************************************", "ok: [localhost]", "", "TASK [check_vars : admin_password should be defined] ***************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [check_vars : include_tasks] **********************************************", "skipping: [localhost]", "", "TASK [check_vars : include_tasks] **********************************************", "included: /opt/services/awx-17.1.0/installer/roles/check_vars/tasks/check_docker.yml for localhost", "", "TASK [check_vars : postgres_data_dir should be defined] ************************", "ok: [localhost] => {", "    \"changed\": false,", "    \"msg\": \"All assertions passed\"", "}", "", "TASK [image_build : Set global version if not provided] ************************", "skipping: [localhost]", "", "TASK [image_build : Verify awx-logos directory exists for official install] ****", "skipping: [localhost]", "", "TASK [image_build : Copy logos for inclusion in sdist] *************************", "skipping: [localhost]", "", "TASK [image_build : Set awx image name] ****************************************", "skipping: [localhost]", "", "TASK [image_build : Render Dockerfile] *****************************************", "skipping: [localhost]", "", "TASK [image_build : Build AWX image] *******************************************", "skipping: [localhost]", "", "TASK [image_build : Tag awx images as latest] **********************************", "skipping: [localhost] => (item=awx) ", "", "TASK [image_push : Authenticate with Docker registry if registry password given] ***", "skipping: [localhost]", "", "TASK [image_push : Remove awx image] *******************************************", "skipping: [localhost]", "", "TASK [image_push : Tag and push awx image to registry] *************************", "skipping: [localhost]", "", "TASK [image_push : Set full image path for Registry] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Generate broadcast websocket secret] ************************", "skipping: [localhost]", "", "TASK [kubernetes : fail] *******************************************************", "skipping: [localhost]", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=openshift_auth.yml) ", "skipping: [localhost] => (item=openshift.yml) ", "", "TASK [kubernetes : include_tasks] **********************************************", "skipping: [localhost] => (item=kubernetes_auth.yml) ", "skipping: [localhost] => (item=kubernetes.yml) ", "", "TASK [kubernetes : Use kubectl or oc] ******************************************", "skipping: [localhost]", "", "TASK [kubernetes : set_fact] ***************************************************", "skipping: [localhost]", "", "TASK [kubernetes : Record deployment size] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set expected post-deployment Replicas value] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Delete existing Deployment (or StatefulSet)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Get Postgres Service Detail] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : Template PostgreSQL Deployment (OpenShift)] *****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (OpenShift)] *******************", "skipping: [localhost]", "", "TASK [kubernetes : Create Temporary Values File (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Populate Temporary Values File (Kubernetes)] ****************", "skipping: [localhost]", "", "TASK [kubernetes : Deploy and Activate Postgres (Kubernetes)] ******************", "skipping: [localhost]", "", "TASK [kubernetes : Remove tempfile] ********************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set postgresql hostname to helm package service (Kubernetes)] ***", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to activate] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Check if Postgres 10 is being used] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Set new pg image] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for pg upgrade] *********************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for change to take affect] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Set env var for new pg version] *****************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to finish upgrading] **********************", "skipping: [localhost]", "", "TASK [kubernetes : Unset upgrade env var] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for Postgres to redeploy] ******************************", "skipping: [localhost]", "", "TASK [kubernetes : Set awx image name] *****************************************", "skipping: [localhost]", "", "TASK [kubernetes : Determine Deployment api version] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Get Root CA file contents] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render Root CA template] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Apply Root CA template] *************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file name] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Set Root CA file location] **********************************", "skipping: [localhost]", "", "TASK [kubernetes : Render deployment templates] ********************************", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost] => (item=None) ", "skipping: [localhost]", "", "TASK [kubernetes : Apply Deployment] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Delete any existing management pod] *************************", "skipping: [localhost]", "", "TASK [kubernetes : Template management pod] ************************************", "skipping: [localhost]", "", "TASK [kubernetes : Create management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Wait for management pod to start] ***************************", "skipping: [localhost]", "", "TASK [kubernetes : Migrate database] *******************************************", "skipping: [localhost]", "", "TASK [kubernetes : Check for Tower Super users] ********************************", "skipping: [localhost]", "", "TASK [kubernetes : create django super user if it does not exist] **************", "skipping: [localhost]", "", "TASK [kubernetes : update django super user password] **************************", "skipping: [localhost]", "", "TASK [kubernetes : Create the default organization if it is needed.] ***********", "skipping: [localhost]", "", "TASK [kubernetes : Delete management pod] **************************************", "skipping: [localhost]", "", "TASK [kubernetes : Scale up deployment] ****************************************", "skipping: [localhost]", "", "TASK [local_docker : Generate broadcast websocket secret] **********************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/pgdocker directory] *************************", "ok: [localhost]", "", "TASK [local_docker : Get full path of postgres data dir] ***********************", "changed: [localhost]", "", "TASK [local_docker : Register temporary docker container] **********************", "ok: [localhost]", "", "TASK [local_docker : Check for existing Postgres data (run from inside the container for access to file)] ***", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker run --rm -v '/root/.awx/pgdocker:/var/lib/postgresql' centos:8 bash -c  \\\"[[ -f /var/lib/postgresql/10/data/PG_VERSION ]] && echo 'exists'\\\"\\n\", \"delta\": \"0:00:02.314202\", \"end\": \"2023-11-21 21:33:30.084507\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:33:27.770305\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"\", \"stdout_lines\": []}", "...ignoring", "", "TASK [local_docker : Record Postgres version] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Determine whether to upgrade postgres] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set up new postgres paths pre-upgrade] ********************", "skipping: [localhost]", "", "TASK [local_docker : Stop AWX before upgrading postgres] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Upgrade Postgres] *****************************************", "skipping: [localhost]", "", "TASK [local_docker : Copy old pg_hba.conf] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Remove old data directory] ********************************", "skipping: [localhost]", "", "TASK [local_docker : Export Docker awx image if it isnt local and there isnt a registry defined] ***", "skipping: [localhost]", "", "TASK [local_docker : Set docker base path] *************************************", "skipping: [localhost]", "", "TASK [local_docker : Ensure directory exists] **********************************", "skipping: [localhost]", "", "TASK [local_docker : Copy awx image to docker execution] ***********************", "skipping: [localhost]", "", "TASK [local_docker : Load awx image] *******************************************", "skipping: [localhost]", "", "TASK [local_docker : Set full image path for local install] ********************", "skipping: [localhost]", "", "TASK [local_docker : Set DockerHub Image Paths] ********************************", "ok: [localhost]", "", "TASK [local_docker : Create ~/.awx/awxcompose directory] ***********************", "ok: [localhost]", "", "TASK [local_docker : Create Redis socket directory] ****************************", "ok: [localhost]", "", "TASK [local_docker : Create Docker Compose Configuration] **********************", "ok: [localhost] => (item={'file': 'environment.sh', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'credentials.py', 'mode': '0600'})", "changed: [localhost] => (item={'file': 'docker-compose.yml', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'nginx.conf', 'mode': '0600'})", "ok: [localhost] => (item={'file': 'redis.conf', 'mode': '0664'})", "", "TASK [local_docker : Render SECRET_KEY file] ***********************************", "ok: [localhost]", "", "TASK [local_docker : Remove AWX containers before migrating postgres so that the old postgres container does not get used] ***", "ok: [localhost]", "", "TASK [local_docker : Run migrations in task container] *************************", "fatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": \"docker-compose run --rm --service-ports task awx-manage migrate --no-input\", \"delta\": \"0:00:03.853262\", \"end\": \"2023-11-21 21:33:39.269114\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2023-11-21 21:33:35.415852\", \"stderr\": \"Pulling web (ansible/awx:23.4.0)...\\nerror parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\", \"stderr_lines\": [\"Pulling web (ansible/awx:23.4.0)...\", \"error parsing HTTP 403 response body: invalid character '<' looking for beginning of value: \\\"<html><body><h1>403 Forbidden</h1>\\\\nSince Docker is a US company, we must comply with US export control regulations. In an effort to comply with these, we now block all IP addresses that are located in Cuba, Iran, North Korea, Republic of Crimea, Sudan, and Syria. If you are not in one of these cities, countries, or regions and are blocked, please reach out to https://hub.docker.com/support/contact/\\\\n</body></html>\\\\n\\\"\"], \"stdout\": \"\", \"stdout_lines\": []}", "", "PLAY RECAP *********************************************************************", "localhost                  : ok=15   changed=3    unreachable=0    failed=1    skipped=73   rescued=0    ignored=1   "]}
2023-11-21 21:33:39,621 p=38127 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 21:33:39,621 p=38127 u=sina n=ansible | semaphore                  : ok=6    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 21:39:50,676 p=38535 u=sina n=ansible | PLAY [deploy postgres] *********************************************************
2023-11-21 21:39:50,692 p=38535 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 21:39:56,796 p=38535 u=sina n=ansible | ok: [semaphore]
2023-11-21 21:39:56,860 p=38535 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-21 21:39:59,646 p=38535 u=sina n=ansible | ok: [semaphore] => (item=services)
2023-11-21 21:39:59,658 p=38535 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-21 21:41:02,277 p=38535 u=sina n=ansible | changed: [semaphore]
2023-11-21 21:41:02,292 p=38535 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-21 21:41:08,576 p=38535 u=sina n=ansible | changed: [semaphore] => (item=inventory)
2023-11-21 21:41:08,587 p=38535 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-21 21:41:12,666 p=38535 u=sina n=ansible | changed: [semaphore] => (item=docker-compose.yml.j2)
2023-11-21 21:41:12,686 p=38535 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-21 21:41:18,574 p=38535 u=sina n=ansible | ok: [semaphore]
2023-11-21 21:41:18,594 p=38535 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-21 21:42:10,965 p=38535 u=sina n=ansible | changed: [semaphore]
2023-11-21 21:42:11,010 p=38535 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 21:42:11,010 p=38535 u=sina n=ansible | semaphore                  : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 22:22:13,674 p=40952 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.194",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.200",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.104.217",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "semaphore": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.58",
                "ansible_port": 8090,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage",
            "ansible"
        ]
    },
    "ansible": {
        "hosts": [
            "semaphore"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "product",
            "pre-product"
        ]
    }
}
2023-11-21 22:23:27,031 p=41062 u=sina n=ansible | ERROR! the role 'bitmain' was not found in /home/sina/ansible-project/playbooks/roles:/home/sina/ansible-project/roles:/home/sina/ansible-project/playbooks

The error appears to be in '/home/sina/ansible-project/playbooks/test.yaml': line 8, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    # - reverse-proxy
    - bitmain
      ^ here

2023-11-21 22:23:39,965 p=41093 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-21 22:23:39,987 p=41093 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 22:23:41,129 p=41093 u=sina n=ansible | fatal: [bitmail]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '[89.107.10.152]:3031' (ED25519) to the list of known hosts.\r\nubuntu@89.107.10.152: Permission denied (publickey,password).", "unreachable": true}
2023-11-21 22:23:41,131 p=41093 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 22:23:41,131 p=41093 u=sina n=ansible | bitmail                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 22:25:33,356 p=41219 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-21 22:25:33,377 p=41219 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 22:25:42,687 p=41219 u=sina n=ansible | ok: [bitmail]
2023-11-21 22:25:42,715 p=41219 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-21 22:25:46,750 p=41219 u=sina n=ansible | changed: [bitmail] => (item=services)
2023-11-21 22:25:46,770 p=41219 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-21 22:25:50,837 p=41219 u=sina n=ansible | changed: [bitmail] => (item=bitwarden)
2023-11-21 22:25:54,614 p=41219 u=sina n=ansible | changed: [bitmail] => (item=mailserver)
2023-11-21 22:25:54,645 p=41219 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-21 22:26:06,680 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:06,694 p=41219 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-21 22:26:15,977 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:15,986 p=41219 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-21 22:26:24,552 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:24,561 p=41219 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-21 22:26:37,452 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:37,463 p=41219 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-21 22:26:48,102 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:48,113 p=41219 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-21 22:26:57,322 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:26:57,332 p=41219 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-21 22:27:06,515 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:27:06,524 p=41219 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-21 22:27:13,908 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:27:13,919 p=41219 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-21 22:27:21,587 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:27:21,598 p=41219 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-21 22:27:30,087 p=41219 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:27:30,096 p=41219 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-21 22:27:36,544 p=41219 u=sina n=ansible | changed: [bitmail] => (item=app_net)
2023-11-21 22:27:41,310 p=41219 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-21 22:27:41,323 p=41219 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-21 22:27:45,755 p=41219 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-21 22:27:45,757 p=41219 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 22:27:45,757 p=41219 u=sina n=ansible | bitmail                    : ok=14   changed=13   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 22:30:06,034 p=41630 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-21 22:30:06,061 p=41630 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 22:30:14,965 p=41630 u=sina n=ansible | ok: [bitmail]
2023-11-21 22:30:14,991 p=41630 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-21 22:30:18,254 p=41630 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-21 22:30:18,275 p=41630 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-21 22:30:22,018 p=41630 u=sina n=ansible | changed: [bitmail] => (item=traefik)
2023-11-21 22:30:22,031 p=41630 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-21 22:30:30,309 p=41630 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:30:30,319 p=41630 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-21 22:30:34,305 p=41630 u=sina n=ansible | changed: [bitmail] => (item=traefik/traefik)
2023-11-21 22:30:34,315 p=41630 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-21 22:30:44,353 p=41630 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:30:44,362 p=41630 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-21 22:30:54,168 p=41630 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:30:54,178 p=41630 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-21 22:31:01,134 p=41630 u=sina n=ansible | changed: [bitmail]
2023-11-21 22:31:01,144 p=41630 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-21 22:31:06,768 p=41630 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-21 22:31:11,882 p=41630 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-21 22:31:11,896 p=41630 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-21 22:31:16,593 p=41630 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-21 22:31:16,595 p=41630 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 22:31:16,596 p=41630 u=sina n=ansible | bitmail                    : ok=9    changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-21 23:57:15,995 p=48715 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-21 23:57:16,031 p=48715 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 23:57:18,687 p=48715 u=sina n=ansible | fatal: [bitmail]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '188.121.97.204' (ED25519) to the list of known hosts.\r\n\"System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8).\"\nConnection closed by 188.121.97.204 port 22", "unreachable": true}
2023-11-21 23:57:18,689 p=48715 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 23:57:18,689 p=48715 u=sina n=ansible | bitmail                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-21 23:57:32,631 p=48738 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-21 23:57:32,679 p=48738 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-21 23:57:53,320 p=48738 u=sina n=ansible | ok: [bitmail]
2023-11-21 23:57:53,342 p=48738 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-21 23:58:10,664 p=48738 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-21 23:58:27,665 p=48738 u=sina n=ansible | changed: [bitmail] => (item=gnupg-agent)
2023-11-21 23:58:31,960 p=48738 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-21 23:58:31,971 p=48738 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-21 23:58:47,140 p=48738 u=sina n=ansible | changed: [bitmail] => (item=docker)
2023-11-21 23:59:10,619 p=48738 u=sina n=ansible | changed: [bitmail] => (item=docker-compose)
2023-11-21 23:59:10,630 p=48738 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-21 23:59:13,332 p=48738 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Failed to download key at https://download.docker.com/linux/ubuntu/gpg: HTTP Error 403: Forbidden"}
2023-11-21 23:59:13,334 p=48738 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-21 23:59:13,334 p=48738 u=sina n=ansible | bitmail                    : ok=3    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-22 00:00:12,484 p=48963 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 00:00:12,532 p=48963 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 00:00:17,869 p=48963 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:00:17,891 p=48963 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 00:00:23,276 p=48963 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 00:00:27,982 p=48963 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-22 00:00:32,482 p=48963 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 00:00:32,497 p=48963 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 00:00:35,464 p=48963 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-22 00:00:38,114 p=48963 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-22 00:00:38,125 p=48963 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 00:00:43,341 p=48963 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:00:43,349 p=48963 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 00:00:52,861 p=48963 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:00:52,869 p=48963 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 00:05:47,932 p=48963 u=sina n=ansible | changed: [bitmail] => (item=docker-ce)
2023-11-22 00:05:52,742 p=48963 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-22 00:05:57,406 p=48963 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-22 00:05:57,423 p=48963 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-22 00:06:01,130 p=48963 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:06:01,139 p=48963 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-22 00:06:05,430 p=48963 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:06:05,440 p=48963 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-22 00:06:09,595 p=48963 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Unable to restart service docker: Job for docker.service failed because the control process exited with error code.\nSee \"systemctl status docker.service\" and \"journalctl -xeu docker.service\" for details.\n"}
2023-11-22 00:06:09,598 p=48963 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 00:06:09,598 p=48963 u=sina n=ansible | bitmail                    : ok=8    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-22 00:06:57,947 p=49348 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 00:06:57,977 p=49348 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 00:07:02,243 p=49348 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:07:02,269 p=49348 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 00:07:07,890 p=49348 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 00:07:13,511 p=49348 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-22 00:07:19,677 p=49348 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 00:07:19,690 p=49348 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 00:07:22,687 p=49348 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-22 00:07:26,424 p=49348 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-22 00:07:26,434 p=49348 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 00:07:29,490 p=49348 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:07:29,500 p=49348 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 00:07:33,714 p=49348 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:07:33,723 p=49348 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 00:07:39,214 p=49348 u=sina n=ansible | ok: [bitmail] => (item=docker-ce)
2023-11-22 00:07:44,759 p=49348 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-22 00:07:49,983 p=49348 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-22 00:07:49,994 p=49348 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-22 00:07:55,100 p=49348 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Unable to start service docker: Job for docker.service failed because the control process exited with error code.\nSee \"systemctl status docker.service\" and \"journalctl -xeu docker.service\" for details.\n"}
2023-11-22 00:07:55,102 p=49348 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 00:07:55,102 p=49348 u=sina n=ansible | bitmail                    : ok=6    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-22 00:11:46,746 p=49659 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 00:11:46,776 p=49659 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 00:11:52,437 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:11:52,460 p=49659 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 00:11:57,343 p=49659 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 00:12:02,565 p=49659 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-22 00:12:15,151 p=49659 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 00:12:15,161 p=49659 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 00:12:18,218 p=49659 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-22 00:12:21,599 p=49659 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-22 00:12:21,609 p=49659 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 00:12:24,676 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:12:24,685 p=49659 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 00:12:28,957 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:12:28,968 p=49659 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 00:12:35,219 p=49659 u=sina n=ansible | ok: [bitmail] => (item=docker-ce)
2023-11-22 00:12:40,437 p=49659 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-22 00:12:44,959 p=49659 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-22 00:12:44,969 p=49659 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-22 00:12:48,245 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:12:48,254 p=49659 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-22 00:12:52,003 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:12:52,014 p=49659 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-22 00:12:57,229 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:12:57,246 p=49659 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-22 00:12:58,862 p=49659 u=sina n=ansible | changed: [bitmail] => (item=services)
2023-11-22 00:12:58,872 p=49659 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-22 00:13:00,506 p=49659 u=sina n=ansible | changed: [bitmail] => (item=traefik)
2023-11-22 00:13:00,517 p=49659 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-22 00:13:04,004 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:13:04,013 p=49659 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-22 00:13:05,665 p=49659 u=sina n=ansible | changed: [bitmail] => (item=traefik/traefik)
2023-11-22 00:13:05,674 p=49659 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-22 00:13:09,004 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:13:09,011 p=49659 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-22 00:13:12,276 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:13:12,293 p=49659 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-22 00:13:18,526 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:13:18,538 p=49659 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-22 00:13:21,290 p=49659 u=sina n=ansible | changed: [bitmail] => (item=app_net)
2023-11-22 00:13:23,766 p=49659 u=sina n=ansible | changed: [bitmail] => (item=web_net)
2023-11-22 00:13:23,776 p=49659 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-22 00:13:52,533 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:13:52,550 p=49659 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-22 00:13:54,194 p=49659 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-22 00:13:54,205 p=49659 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-22 00:13:55,902 p=49659 u=sina n=ansible | changed: [bitmail] => (item=bitwarden)
2023-11-22 00:13:57,442 p=49659 u=sina n=ansible | changed: [bitmail] => (item=mailserver)
2023-11-22 00:13:57,453 p=49659 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-22 00:14:00,625 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:00,634 p=49659 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-22 00:14:04,389 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:04,398 p=49659 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-22 00:14:08,081 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:08,091 p=49659 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-22 00:14:11,465 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:11,474 p=49659 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-22 00:14:17,573 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:17,588 p=49659 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-22 00:14:23,544 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:14:23,556 p=49659 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-22 00:14:28,754 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:14:28,773 p=49659 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-22 00:14:34,104 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:14:34,123 p=49659 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-22 00:14:40,584 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:14:40,593 p=49659 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-22 00:14:45,799 p=49659 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:14:45,809 p=49659 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-22 00:14:48,346 p=49659 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-22 00:14:50,750 p=49659 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-22 00:14:50,775 p=49659 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-22 00:15:52,423 p=49659 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:15:52,463 p=49659 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 00:15:52,463 p=49659 u=sina n=ansible | bitmail                    : ok=32   changed=18   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-22 00:27:01,951 p=51260 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 00:27:01,982 p=51260 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 00:27:07,360 p=51260 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:27:07,385 p=51260 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 00:27:12,680 p=51260 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 00:27:18,407 p=51260 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-22 00:27:23,480 p=51260 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 00:27:23,496 p=51260 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 00:27:26,457 p=51260 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-22 00:27:29,226 p=51260 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-22 00:27:29,236 p=51260 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 00:27:32,402 p=51260 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:27:32,412 p=51260 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 00:27:34,752 p=51260 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:27:34,761 p=51260 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 00:27:39,210 p=51260 u=sina n=ansible | ok: [bitmail] => (item=docker-ce)
2023-11-22 00:27:43,867 p=51260 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-22 00:27:48,260 p=51260 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-22 00:27:48,271 p=51260 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-22 00:27:52,040 p=51260 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:27:52,050 p=51260 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-22 00:27:55,739 p=51260 u=sina n=ansible | ok: [bitmail]
2023-11-22 00:27:55,750 p=51260 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-22 00:28:01,474 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:01,492 p=51260 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-22 00:28:03,112 p=51260 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-22 00:28:03,122 p=51260 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-22 00:28:04,749 p=51260 u=sina n=ansible | changed: [bitmail] => (item=traefik)
2023-11-22 00:28:04,760 p=51260 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-22 00:28:08,336 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:08,346 p=51260 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-22 00:28:10,175 p=51260 u=sina n=ansible | changed: [bitmail] => (item=traefik/traefik)
2023-11-22 00:28:10,187 p=51260 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-22 00:28:13,549 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:13,558 p=51260 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-22 00:28:16,911 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:16,920 p=51260 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-22 00:28:24,348 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:24,357 p=51260 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-22 00:28:28,302 p=51260 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-22 00:28:30,961 p=51260 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-22 00:28:30,974 p=51260 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-22 00:28:36,215 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:36,233 p=51260 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-22 00:28:38,025 p=51260 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-22 00:28:38,035 p=51260 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-22 00:28:39,870 p=51260 u=sina n=ansible | changed: [bitmail] => (item=bitwarden)
2023-11-22 00:28:41,511 p=51260 u=sina n=ansible | changed: [bitmail] => (item=mailserver)
2023-11-22 00:28:41,521 p=51260 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-22 00:28:45,227 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:45,236 p=51260 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-22 00:28:48,879 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:48,889 p=51260 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-22 00:28:52,792 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:52,802 p=51260 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-22 00:28:56,969 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:28:56,978 p=51260 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-22 00:29:02,976 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:02,985 p=51260 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-22 00:29:08,863 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:08,872 p=51260 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-22 00:29:14,911 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:14,920 p=51260 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-22 00:29:24,108 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:24,116 p=51260 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-22 00:29:30,010 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:30,019 p=51260 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-22 00:29:36,085 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:36,095 p=51260 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-22 00:29:39,056 p=51260 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-22 00:29:41,510 p=51260 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-22 00:29:41,521 p=51260 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-22 00:29:46,528 p=51260 u=sina n=ansible | changed: [bitmail]
2023-11-22 00:29:46,571 p=51260 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 00:29:46,571 p=51260 u=sina n=ansible | bitmail                    : ok=32   changed=20   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-22 12:24:26,050 p=55181 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 12:24:26,098 p=55181 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 12:24:35,434 p=55181 u=sina n=ansible | ok: [bitmail]
2023-11-22 12:24:35,461 p=55181 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 12:24:48,262 p=55181 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 12:25:00,279 p=55181 u=sina n=ansible | changed: [bitmail] => (item=gnupg-agent)
2023-11-22 12:25:11,714 p=55181 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 12:25:11,734 p=55181 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 12:25:22,115 p=55181 u=sina n=ansible | changed: [bitmail] => (item=docker)
2023-11-22 12:25:33,889 p=55181 u=sina n=ansible | changed: [bitmail] => (item=docker-compose)
2023-11-22 12:25:33,905 p=55181 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 12:25:37,162 p=55181 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:25:37,178 p=55181 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 12:25:48,945 p=55181 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:25:48,966 p=55181 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 12:25:54,679 p=55181 u=sina n=ansible | failed: [bitmail] (item=docker-ce) => {"ansible_loop_var": "item", "cache_update_time": 1700643352, "cache_updated": true, "changed": false, "item": "docker-ce", "msg": "'/usr/bin/apt-get -y -o \"Dpkg::Options::=--force-confdef\" -o \"Dpkg::Options::=--force-confold\"       install 'docker-ce=5:24.0.2-1~ubuntu.18.04~bionic'' failed: E: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/containerd.io_1.6.21-1_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce-cli_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?\n", "rc": 100, "stderr": "E: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/containerd.io_1.6.21-1_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce-cli_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?\n", "stderr_lines": ["E: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/containerd.io_1.6.21-1_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]", "E: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce-cli_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]", "E: Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce_24.0.2-1%7eubuntu.18.04%7ebionic_amd64.deb  403  Forbidden [IP: 13.32.121.78 443]", "E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?"], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  containerd.io docker-ce-cli\nSuggested packages:\n  aufs-tools cgroupfs-mount | cgroup-lite\nRecommended packages:\n  docker-ce-rootless-extras libltdl7 pigz docker-buildx-plugin\n  docker-compose-plugin\nThe following NEW packages will be installed:\n  containerd.io docker-ce docker-ce-cli\n0 upgraded, 3 newly installed, 0 to remove and 50 not upgraded.\nNeed to get 64.4 MB of archives.\nAfter this operation, 255 MB of additional disk space will be used.\nErr:1 https://download.docker.com/linux/ubuntu bionic/stable amd64 containerd.io amd64 1.6.21-1\n  403  Forbidden [IP: 13.32.121.78 443]\nErr:2 https://download.docker.com/linux/ubuntu bionic/stable amd64 docker-ce-cli amd64 5:24.0.2-1~ubuntu.18.04~bionic\n  403  Forbidden [IP: 13.32.121.78 443]\nErr:3 https://download.docker.com/linux/ubuntu bionic/stable amd64 docker-ce amd64 5:24.0.2-1~ubuntu.18.04~bionic\n  403  Forbidden [IP: 13.32.121.78 443]\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  containerd.io docker-ce-cli", "Suggested packages:", "  aufs-tools cgroupfs-mount | cgroup-lite", "Recommended packages:", "  docker-ce-rootless-extras libltdl7 pigz docker-buildx-plugin", "  docker-compose-plugin", "The following NEW packages will be installed:", "  containerd.io docker-ce docker-ce-cli", "0 upgraded, 3 newly installed, 0 to remove and 50 not upgraded.", "Need to get 64.4 MB of archives.", "After this operation, 255 MB of additional disk space will be used.", "Err:1 https://download.docker.com/linux/ubuntu bionic/stable amd64 containerd.io amd64 1.6.21-1", "  403  Forbidden [IP: 13.32.121.78 443]", "Err:2 https://download.docker.com/linux/ubuntu bionic/stable amd64 docker-ce-cli amd64 5:24.0.2-1~ubuntu.18.04~bionic", "  403  Forbidden [IP: 13.32.121.78 443]", "Err:3 https://download.docker.com/linux/ubuntu bionic/stable amd64 docker-ce amd64 5:24.0.2-1~ubuntu.18.04~bionic", "  403  Forbidden [IP: 13.32.121.78 443]"]}
2023-11-22 12:26:09,744 p=55181 u=sina n=ansible | changed: [bitmail] => (item=docker-ce-cli)
2023-11-22 12:26:15,420 p=55181 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-22 12:27:16,369 p=76412 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 12:27:16,408 p=76412 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 12:27:21,146 p=76412 u=sina n=ansible | ok: [bitmail]
2023-11-22 12:27:21,178 p=76412 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-22 12:27:25,830 p=76412 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-22 12:27:30,137 p=76412 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-22 12:27:34,259 p=76412 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-22 12:27:34,270 p=76412 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-22 12:27:37,065 p=76412 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-22 12:27:39,792 p=76412 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-22 12:27:39,809 p=76412 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-22 12:27:42,832 p=76412 u=sina n=ansible | ok: [bitmail]
2023-11-22 12:27:42,847 p=76412 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-22 12:27:45,255 p=76412 u=sina n=ansible | ok: [bitmail]
2023-11-22 12:27:45,269 p=76412 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-22 12:31:38,958 p=76412 u=sina n=ansible | changed: [bitmail] => (item=docker-ce)
2023-11-22 12:31:50,308 p=76412 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-22 12:31:55,855 p=76412 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-22 12:31:55,876 p=76412 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-22 12:31:59,435 p=76412 u=sina n=ansible | ok: [bitmail]
2023-11-22 12:31:59,449 p=76412 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-22 12:32:03,808 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:03,826 p=76412 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-22 12:32:08,398 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:08,435 p=76412 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-22 12:32:10,467 p=76412 u=sina n=ansible | changed: [bitmail] => (item=services)
2023-11-22 12:32:10,482 p=76412 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-22 12:32:12,286 p=76412 u=sina n=ansible | changed: [bitmail] => (item=traefik)
2023-11-22 12:32:12,316 p=76412 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-22 12:32:15,900 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:15,928 p=76412 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-22 12:32:18,234 p=76412 u=sina n=ansible | changed: [bitmail] => (item=traefik/traefik)
2023-11-22 12:32:18,269 p=76412 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-22 12:32:22,651 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:22,674 p=76412 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-22 12:32:26,835 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:26,852 p=76412 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-22 12:32:33,413 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:33,439 p=76412 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-22 12:32:36,353 p=76412 u=sina n=ansible | changed: [bitmail] => (item=app_net)
2023-11-22 12:32:38,903 p=76412 u=sina n=ansible | changed: [bitmail] => (item=web_net)
2023-11-22 12:32:38,921 p=76412 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-22 12:32:56,000 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:32:56,026 p=76412 u=sina n=ansible | TASK [bitmail : create /opt/srevices dir] **************************************
2023-11-22 12:32:57,724 p=76412 u=sina n=ansible | ok: [bitmail] => (item=services)
2023-11-22 12:32:57,739 p=76412 u=sina n=ansible | TASK [bitmail : create subdir files] *******************************************
2023-11-22 12:32:59,453 p=76412 u=sina n=ansible | changed: [bitmail] => (item=bitwarden)
2023-11-22 12:33:01,210 p=76412 u=sina n=ansible | changed: [bitmail] => (item=mailserver)
2023-11-22 12:33:01,226 p=76412 u=sina n=ansible | TASK [bitmail : copy bitwarden compose file to host] ***************************
2023-11-22 12:33:04,924 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:04,939 p=76412 u=sina n=ansible | TASK [bitmail : copy bitwarden .env] *******************************************
2023-11-22 12:33:08,482 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:08,499 p=76412 u=sina n=ansible | TASK [bitmail : copy mail-server compose file to host] *************************
2023-11-22 12:33:12,059 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:12,073 p=76412 u=sina n=ansible | TASK [bitmail : copy mailserver .env] ******************************************
2023-11-22 12:33:15,501 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:15,515 p=76412 u=sina n=ansible | TASK [bitmail : Create a bit.archidev.ir A record to point to host] ************
2023-11-22 12:33:21,018 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:21,037 p=76412 u=sina n=ansible | TASK [bitmail : Create a mail.archidev.ir A record to point to host] ***********
2023-11-22 12:33:26,400 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:26,415 p=76412 u=sina n=ansible | TASK [bitmail : set SPF TXT record] ********************************************
2023-11-22 12:33:31,931 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:31,944 p=76412 u=sina n=ansible | TASK [bitmail : set DKIM TXT record] *******************************************
2023-11-22 12:33:37,580 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:37,591 p=76412 u=sina n=ansible | TASK [bitmail : set DMARC TXT record] ******************************************
2023-11-22 12:33:43,899 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:43,912 p=76412 u=sina n=ansible | TASK [bitmail : set MX archidev.ir that point to mail.archidev.ir] *************
2023-11-22 12:33:49,511 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:33:49,524 p=76412 u=sina n=ansible | TASK [bitmail : create network] ************************************************
2023-11-22 12:33:51,989 p=76412 u=sina n=ansible | ok: [bitmail] => (item=app_net)
2023-11-22 12:33:54,546 p=76412 u=sina n=ansible | ok: [bitmail] => (item=web_net)
2023-11-22 12:33:54,561 p=76412 u=sina n=ansible | TASK [bitmail : deploy bitwarden Compose stack] ********************************
2023-11-22 12:34:19,185 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:34:19,239 p=76412 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] *************************
2023-11-22 12:34:25,340 p=76412 u=sina n=ansible | changed: [bitmail]
2023-11-22 12:34:25,364 p=76412 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 12:34:25,365 p=76412 u=sina n=ansible | bitmail                    : ok=33   changed=25   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-22 19:44:01,215 p=114253 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "awx": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.58",
                "ansible_port": 8090,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.104.42",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.200",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.96.199",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "production": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "89.107.10.152",
                "ansible_port": 3031,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "root",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage",
            "ansible"
        ]
    },
    "ansible": {
        "hosts": [
            "awx"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "production",
            "pre-product"
        ]
    }
}
2023-11-22 19:44:08,990 p=114273 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 19:44:09,049 p=114273 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 19:44:19,029 p=114273 u=sina n=ansible | ok: [production]
2023-11-22 19:44:19,086 p=114273 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 19:44:19,086 p=114273 u=sina n=ansible | production                 : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-22 19:48:03,350 p=114465 u=sina n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to be in '/home/sina/ansible-project/roles/stages/tasks/dnsrecord.yml': line 14, column 8, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - vote.{{inventory_hostname}}
    - {{inventory_hostname}}
       ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2023-11-22 19:48:28,608 p=114497 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 19:48:28,667 p=114497 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 19:48:38,918 p=114497 u=sina n=ansible | ok: [production]
2023-11-22 19:48:38,963 p=114497 u=sina n=ansible | TASK [stages : Create a sub.hostname.archidev.ir A record to point to host] ****
2023-11-22 19:48:39,004 p=114497 u=sina n=ansible | fatal: [production]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'domain' is undefined. 'domain' is undefined\n\nThe error appears to be in '/home/sina/ansible-project/roles/stages/tasks/dnsrecord.yml': line 2, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n---\n- name: Create a sub.hostname.archidev.ir A record to point to host\n  ^ here\n"}
2023-11-22 19:48:39,007 p=114497 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 19:48:39,007 p=114497 u=sina n=ansible | production                 : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-22 19:49:28,784 p=114574 u=sina n=ansible | PLAY [deploy bitmail] **********************************************************
2023-11-22 19:49:28,864 p=114574 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-22 19:49:36,755 p=114574 u=sina n=ansible | ok: [production]
2023-11-22 19:49:36,781 p=114574 u=sina n=ansible | TASK [stages : Create a sub.hostname.archidev.ir A record to point to host] ****
2023-11-22 19:49:45,949 p=114574 u=sina n=ansible | changed: [production] => (item=result.production)
2023-11-22 19:49:53,397 p=114574 u=sina n=ansible | changed: [production] => (item=vote.production)
2023-11-22 19:50:01,653 p=114574 u=sina n=ansible | changed: [production] => (item=production)
2023-11-22 19:50:01,742 p=114574 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-22 19:50:01,742 p=114574 u=sina n=ansible | production                 : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-24 18:05:08,549 p=204708 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-24 18:05:08,608 p=204708 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-24 18:05:17,846 p=204708 u=sina n=ansible | ok: [production]
2023-11-24 18:05:17,870 p=204708 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-24 18:05:22,883 p=204708 u=sina n=ansible | ok: [production] => (item=services)
2023-11-24 18:05:22,901 p=204708 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-24 18:05:27,979 p=204708 u=sina n=ansible | changed: [production] => (item=traefik)
2023-11-24 18:05:28,006 p=204708 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-24 18:05:41,205 p=204708 u=sina n=ansible | changed: [production]
2023-11-24 18:05:41,224 p=204708 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-24 18:05:46,287 p=204708 u=sina n=ansible | changed: [production] => (item=traefik/traefik)
2023-11-24 18:05:46,298 p=204708 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-24 18:05:56,158 p=204708 u=sina n=ansible | changed: [production]
2023-11-24 18:05:56,171 p=204708 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-24 18:06:12,688 p=204708 u=sina n=ansible | changed: [production]
2023-11-24 18:06:12,702 p=204708 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-24 18:06:22,526 p=204708 u=sina n=ansible | changed: [production]
2023-11-24 18:06:22,544 p=204708 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-24 18:06:31,343 p=204708 u=sina n=ansible | ok: [production] => (item=app_net)
2023-11-24 18:06:39,464 p=204708 u=sina n=ansible | ok: [production] => (item=web_net)
2023-11-24 18:06:39,484 p=204708 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-24 18:06:47,815 p=204708 u=sina n=ansible | fatal: [production]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-24 18:06:47,820 p=204708 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-24 18:06:47,820 p=204708 u=sina n=ansible | production                 : ok=9    changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-24 18:08:51,351 p=204986 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-24 18:08:51,393 p=204986 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-24 18:09:02,831 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:09:02,867 p=204986 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-24 18:09:08,304 p=204986 u=sina n=ansible | ok: [production] => (item=services)
2023-11-24 18:09:08,315 p=204986 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-24 18:09:12,422 p=204986 u=sina n=ansible | ok: [production] => (item=traefik)
2023-11-24 18:09:12,450 p=204986 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-24 18:09:22,204 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:09:22,227 p=204986 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-24 18:09:26,389 p=204986 u=sina n=ansible | ok: [production] => (item=traefik/traefik)
2023-11-24 18:09:26,399 p=204986 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-24 18:09:34,830 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:09:34,839 p=204986 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-24 18:09:42,317 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:09:42,330 p=204986 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-24 18:09:49,236 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:09:49,254 p=204986 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-24 18:09:53,156 p=204986 u=sina n=ansible | ok: [production] => (item=services)
2023-11-24 18:09:53,166 p=204986 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-24 18:09:57,412 p=204986 u=sina n=ansible | ok: [production] => (item=traefik)
2023-11-24 18:10:01,789 p=204986 u=sina n=ansible | changed: [production] => (item=monitoring)
2023-11-24 18:10:06,369 p=204986 u=sina n=ansible | changed: [production] => (item=logging)
2023-11-24 18:10:06,380 p=204986 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-24 18:10:10,342 p=204986 u=sina n=ansible | changed: [production] => (item=prometheus)
2023-11-24 18:10:14,426 p=204986 u=sina n=ansible | changed: [production] => (item=alertmanager)
2023-11-24 18:10:18,225 p=204986 u=sina n=ansible | changed: [production] => (item=blackbox)
2023-11-24 18:10:18,236 p=204986 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-24 18:10:22,652 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:10:22,662 p=204986 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-24 18:10:31,844 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:10:31,854 p=204986 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-24 18:10:40,604 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:10:40,613 p=204986 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-24 18:10:49,152 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:10:49,164 p=204986 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-24 18:10:58,111 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:10:58,129 p=204986 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-24 18:12:22,601 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:12:22,610 p=204986 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-24 18:12:32,104 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:12:32,113 p=204986 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-24 18:12:36,204 p=204986 u=sina n=ansible | changed: [production] => (item=logging/promtail)
2023-11-24 18:12:40,016 p=204986 u=sina n=ansible | changed: [production] => (item=logging/loki)
2023-11-24 18:12:44,314 p=204986 u=sina n=ansible | ok: [production] => (item=traefik/traefik)
2023-11-24 18:12:44,325 p=204986 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-24 18:12:55,632 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:12:55,648 p=204986 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-24 18:13:02,802 p=204986 u=sina n=ansible | ok: [production]
2023-11-24 18:13:02,816 p=204986 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-24 18:13:14,074 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:13:14,084 p=204986 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-24 18:13:22,720 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:13:22,735 p=204986 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-24 18:13:31,568 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:13:31,584 p=204986 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-24 18:13:40,900 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:13:40,910 p=204986 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-24 18:13:49,741 p=204986 u=sina n=ansible | changed: [production]
2023-11-24 18:13:49,750 p=204986 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-24 18:13:58,375 p=204986 u=sina n=ansible | changed: [production] => (item=metrics)
2023-11-24 18:14:06,799 p=204986 u=sina n=ansible | changed: [production] => (item=grafana)
2023-11-24 18:14:15,071 p=204986 u=sina n=ansible | changed: [production] => (item=alerts)
2023-11-24 18:14:24,393 p=204986 u=sina n=ansible | changed: [production] => (item=pushgw)
2023-11-24 18:14:33,017 p=204986 u=sina n=ansible | changed: [production] => (item=loki)
2023-11-24 18:14:48,213 p=204986 u=sina n=ansible | ok: [production] => (item=web)
2023-11-24 18:14:48,281 p=204986 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-24 18:14:48,281 p=204986 u=sina n=ansible | production                 : ok=27   changed=17   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-25 20:35:13,714 p=14295 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "awx": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.58",
                "ansible_port": 8090,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.104.42",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.213.199.200",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "89.107.10.152",
                "ansible_port": 3031,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "root",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.197.91",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.7.204",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "production": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "89.107.10.152",
                "ansible_port": 3031,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "root",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.98.177",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage",
            "ansible"
        ]
    },
    "ansible": {
        "hosts": [
            "awx"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "production",
            "pre-product"
        ]
    }
}
2023-11-25 20:35:44,777 p=14362 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-25 20:35:44,797 p=14362 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-25 20:35:52,665 p=14362 u=sina n=ansible | ok: [gitlab-runner]
2023-11-25 20:35:52,688 p=14362 u=sina n=ansible | TASK [gitlab-runner : create /opt/services dir] ********************************
2023-11-25 20:35:56,317 p=14362 u=sina n=ansible | ok: [gitlab-runner] => (item=services)
2023-11-25 20:35:56,334 p=14362 u=sina n=ansible | TASK [gitlab-runner : create files] ********************************************
2023-11-25 20:35:59,293 p=14362 u=sina n=ansible | changed: [gitlab-runner] => (item=runner)
2023-11-25 20:35:59,309 p=14362 u=sina n=ansible | TASK [gitlab-runner : copy runner compose file to host] ************************
2023-11-25 20:36:07,483 p=14362 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 20:36:07,492 p=14362 u=sina n=ansible | TASK [gitlab-runner : copy runner register script] *****************************
2023-11-25 20:36:15,779 p=14362 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 20:36:15,789 p=14362 u=sina n=ansible | TASK [gitlab-runner : Create a pre-product.archidev.ir A record to point to host] ***
2023-11-25 20:36:23,356 p=14362 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 20:36:23,366 p=14362 u=sina n=ansible | TASK [gitlab-runner : Create a product.archidev.ir A record to point to host] ***
2023-11-25 20:36:30,195 p=14362 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 20:36:30,208 p=14362 u=sina n=ansible | TASK [gitlab-runner : create network] ******************************************
2023-11-25 20:36:34,869 p=14362 u=sina n=ansible | ok: [gitlab-runner] => (item=app_net)
2023-11-25 20:36:39,121 p=14362 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-25 20:36:39,131 p=14362 u=sina n=ansible | TASK [gitlab-runner : deploy runner Compose stack] *****************************
2023-11-25 20:36:43,343 p=14362 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-25 20:36:43,345 p=14362 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-25 20:36:43,345 p=14362 u=sina n=ansible | gitlab-runner              : ok=8    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-25 21:28:36,760 p=19652 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-25 21:28:36,782 p=19652 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-25 21:28:43,589 p=19652 u=sina n=ansible | ok: [gitlab-runner]
2023-11-25 21:28:43,646 p=19652 u=sina n=ansible | TASK [agents : Create a sup.archidev.ir A record to point to host] *************
2023-11-25 21:28:49,836 p=19652 u=sina n=ansible | changed: [gitlab-runner] => (item=cad)
2023-11-25 21:28:55,670 p=19652 u=sina n=ansible | changed: [gitlab-runner] => (item=nod)
2023-11-25 21:28:55,680 p=19652 u=sina n=ansible | TASK [agents : create /opt/srevices dir] ***************************************
2023-11-25 21:28:58,674 p=19652 u=sina n=ansible | ok: [gitlab-runner] => (item=services)
2023-11-25 21:28:58,685 p=19652 u=sina n=ansible | TASK [agents : create files] ***************************************************
2023-11-25 21:29:01,229 p=19652 u=sina n=ansible | changed: [gitlab-runner] => (item=agents)
2023-11-25 21:29:03,631 p=19652 u=sina n=ansible | changed: [gitlab-runner] => (item=agents/promtail)
2023-11-25 21:29:03,641 p=19652 u=sina n=ansible | TASK [agents : promtail config] ************************************************
2023-11-25 21:29:09,130 p=19652 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:29:09,140 p=19652 u=sina n=ansible | TASK [agents : copy agents compose file to host] *******************************
2023-11-25 21:29:14,275 p=19652 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:29:14,295 p=19652 u=sina n=ansible | TASK [agents : copy agents .env file] ******************************************
2023-11-25 21:29:19,502 p=19652 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:29:19,511 p=19652 u=sina n=ansible | TASK [agents : create docker bridge network] ***********************************
2023-11-25 21:29:23,621 p=19652 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-25 21:29:23,630 p=19652 u=sina n=ansible | TASK [agents : deploy agents Compose stack] ************************************
2023-11-25 21:29:27,221 p=19652 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-25 21:29:27,223 p=19652 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-25 21:29:27,224 p=19652 u=sina n=ansible | gitlab-runner              : ok=8    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-25 21:32:47,288 p=20339 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-25 21:32:47,310 p=20339 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-25 21:32:57,142 p=20339 u=sina n=ansible | ok: [gitlab-runner]
2023-11-25 21:32:57,165 p=20339 u=sina n=ansible | TASK [redis : Creates directory] ***********************************************
2023-11-25 21:33:01,063 p=20339 u=sina n=ansible | ok: [gitlab-runner] => (item=/opt/services)
2023-11-25 21:33:05,216 p=20339 u=sina n=ansible | changed: [gitlab-runner] => (item=/opt/services/redis)
2023-11-25 21:33:05,228 p=20339 u=sina n=ansible | TASK [redis : copy haproxy config] *********************************************
2023-11-25 21:33:13,408 p=20339 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:33:13,419 p=20339 u=sina n=ansible | TASK [redis : Copy sentinel config] ********************************************
2023-11-25 21:33:20,177 p=20339 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:33:20,187 p=20339 u=sina n=ansible | TASK [redis : copy Docker Compose files] ***************************************
2023-11-25 21:33:29,282 p=20339 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:33:29,290 p=20339 u=sina n=ansible | TASK [redis : copy redis .env] *************************************************
2023-11-25 21:33:37,780 p=20339 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:33:37,789 p=20339 u=sina n=ansible | TASK [redis : Create a redis.archidev.ir A record to point to host] ************
2023-11-25 21:33:45,255 p=20339 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:33:45,266 p=20339 u=sina n=ansible | TASK [redis : create network] **************************************************
2023-11-25 21:33:49,763 p=20339 u=sina n=ansible | ok: [gitlab-runner] => (item=app_net)
2023-11-25 21:33:54,265 p=20339 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-25 21:33:54,276 p=20339 u=sina n=ansible | TASK [redis : deploy redis Compose stack] **************************************
2023-11-25 21:33:58,568 p=20339 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-25 21:33:58,570 p=20339 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-25 21:33:58,571 p=20339 u=sina n=ansible | gitlab-runner              : ok=8    changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-25 21:34:41,252 p=20548 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-25 21:34:41,269 p=20548 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-25 21:34:47,332 p=20548 u=sina n=ansible | ok: [gitlab-runner]
2023-11-25 21:34:47,355 p=20548 u=sina n=ansible | TASK [postgres : Creates directory] ********************************************
2023-11-25 21:34:50,907 p=20548 u=sina n=ansible | ok: [gitlab-runner] => (item=/opt/services)
2023-11-25 21:34:54,411 p=20548 u=sina n=ansible | changed: [gitlab-runner] => (item=/opt/services/postgres)
2023-11-25 21:34:54,428 p=20548 u=sina n=ansible | TASK [postgres : copy haproxy config] ******************************************
2023-11-25 21:35:03,499 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:03,508 p=20548 u=sina n=ansible | TASK [postgres : copy dockerfile config] ***************************************
2023-11-25 21:35:10,770 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:10,779 p=20548 u=sina n=ansible | TASK [postgres : copy primary-check.sh config] *********************************
2023-11-25 21:35:19,271 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:19,280 p=20548 u=sina n=ansible | TASK [postgres : copy standby-check.sh config] *********************************
2023-11-25 21:35:27,395 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:27,404 p=20548 u=sina n=ansible | TASK [postgres : copy Docker Compose files] ************************************
2023-11-25 21:35:34,429 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:34,438 p=20548 u=sina n=ansible | TASK [postgres : copy postgress .env] ******************************************
2023-11-25 21:35:42,930 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:42,939 p=20548 u=sina n=ansible | TASK [postgres : Create a postgres.archidev.ir A record to point to host] ******
2023-11-25 21:35:50,713 p=20548 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:35:50,722 p=20548 u=sina n=ansible | TASK [postgres : create network] ***********************************************
2023-11-25 21:35:55,939 p=20548 u=sina n=ansible | ok: [gitlab-runner] => (item=app_net)
2023-11-25 21:36:00,134 p=20548 u=sina n=ansible | ok: [gitlab-runner] => (item=web_net)
2023-11-25 21:36:00,147 p=20548 u=sina n=ansible | TASK [postgres : deploy postgre Compose stack] *********************************
2023-11-25 21:36:04,437 p=20548 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Error connecting: Error while fetching server API version: request() got an unexpected keyword argument 'chunked'"}
2023-11-25 21:36:04,439 p=20548 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-25 21:36:04,440 p=20548 u=sina n=ansible | gitlab-runner              : ok=10   changed=8    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-25 21:42:49,843 p=21402 u=sina n=ansible | PLAY [deploy observability] ****************************************************
2023-11-25 21:42:49,861 p=21402 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-25 21:42:57,992 p=21402 u=sina n=ansible | ok: [gitlab-runner]
2023-11-25 21:42:58,019 p=21402 u=sina n=ansible | TASK [repo : create dir] *******************************************************
2023-11-25 21:43:01,156 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=/opt/services)
2023-11-25 21:43:04,703 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=/opt/services/repo)
2023-11-25 21:43:04,723 p=21402 u=sina n=ansible | TASK [repo : create sub dir] ***************************************************
2023-11-25 21:43:10,618 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=gitlab)
2023-11-25 21:43:15,496 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=minio)
2023-11-25 21:43:18,734 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=nexus)
2023-11-25 21:43:22,574 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=sonar)
2023-11-25 21:43:25,832 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=traefik)
2023-11-25 21:43:25,858 p=21402 u=sina n=ansible | TASK [repo : create traefik/traefik sub dir] ***********************************
2023-11-25 21:43:29,855 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=traefik/traefik)
2023-11-25 21:43:29,877 p=21402 u=sina n=ansible | TASK [repo : gitlab compose file] **********************************************
2023-11-25 21:43:37,826 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=compose.yml)
2023-11-25 21:43:46,731 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=.env)
2023-11-25 21:43:46,742 p=21402 u=sina n=ansible | TASK [repo : minio compose file] ***********************************************
2023-11-25 21:43:53,601 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=compose.yml)
2023-11-25 21:44:00,250 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=.env)
2023-11-25 21:44:11,180 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=nginx.conf)
2023-11-25 21:44:11,190 p=21402 u=sina n=ansible | TASK [repo : nexus compose file] ***********************************************
2023-11-25 21:44:19,704 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=compose.yml)
2023-11-25 21:44:27,979 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=.env)
2023-11-25 21:44:27,989 p=21402 u=sina n=ansible | TASK [repo : sonar compose file] ***********************************************
2023-11-25 21:44:34,462 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=compose.yml)
2023-11-25 21:44:34,474 p=21402 u=sina n=ansible | TASK [repo : traefik compose file] *********************************************
2023-11-25 21:44:42,336 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=compose.yml)
2023-11-25 21:44:56,160 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=.env)
2023-11-25 21:44:56,170 p=21402 u=sina n=ansible | TASK [repo : copy traefik config file] *****************************************
2023-11-25 21:45:17,497 p=21402 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:45:17,506 p=21402 u=sina n=ansible | TASK [repo : Create a gitlab sub.archidev.ir A record to point to host] ********
2023-11-25 21:45:24,425 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=git)
2023-11-25 21:45:31,293 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=reg)
2023-11-25 21:45:38,155 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=pages)
2023-11-25 21:45:38,165 p=21402 u=sina n=ansible | TASK [repo : Create a traefik sub.hostname.archidev.ir A record to point to host] ***
2023-11-25 21:45:46,047 p=21402 u=sina n=ansible | changed: [gitlab-runner]
2023-11-25 21:45:46,056 p=21402 u=sina n=ansible | TASK [repo : Create a minio sub.hostname.archidev.ir A record to point to host] ***
2023-11-25 21:45:54,515 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=object)
2023-11-25 21:46:02,301 p=21402 u=sina n=ansible | changed: [gitlab-runner] => (item=io)
2023-11-25 21:46:02,344 p=21402 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-25 21:46:02,345 p=21402 u=sina n=ansible | gitlab-runner              : ok=13   changed=12   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-26 20:01:41,916 p=7619 u=sina n=ansible | {
    "DB": {
        "hosts": [
            "postgres",
            "redis"
        ]
    },
    "_meta": {
        "hostvars": {
            "awx": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.6.114",
                "ansible_port": 8090,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "bitmail": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "37.32.5.28",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "git": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.99.22",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "gitlab-runner": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.99.158",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "minio": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "5.34.199.189",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "obs": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.110.79",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "postgres": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.99.205",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "pre-product": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.107.55",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "production": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.110.161",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            },
            "redis": {
                "ACCOUNT_API_KEY": "a4a61eb4d9356527fc29928403ff61778336e",
                "ACCOUNT_EMAIL": "s1n4.ne1331@gmail.com",
                "DOCKER_REPO_BLOBSTORE": "docker",
                "DOMAIN_NAME": "ansible.archidev.ir",
                "GIT_IMAGE": "gitlab/gitlab-ce",
                "GIT_VERSION": "latest",
                "HUB_SUB_DOMAIN": "hub",
                "NEXUS_ADMIN_PASSWORD": "sina.neissi",
                "NEXUS_ADMIN_USERNAME": "sina",
                "NEXUS_IMAGE": "sonatype/nexus3",
                "NEXUS_REPO_EMAIL": "s1n4.ne1331@gmail.com",
                "NEXUS_REPO_PASSWORD": "admin",
                "NEXUS_REPO_USERNAME": "repo",
                "NEXUS_SERVICE_URL": "https://{{ NEXUS_SUB_DOMAIN }}.{{ DOMAIN_NAME }}",
                "NEXUS_SUB_DOMAIN": "repo",
                "NEXUS_VERSION": "3.38.0",
                "REPO_DIRE_NAME": "/var/services",
                "TRAEFIK_ACME_EMAIL": "s1n4.ne1331@gmail.com",
                "TRAEFIK_IMAGE": "traefik",
                "TRAEFIK_SUB_DOMAIN": "web",
                "TRAEFIK_VERSION": "v2.6.1",
                "WEB_AUTH_USER": "sina",
                "ansible_host": "188.121.105.190",
                "ansible_port": 22,
                "ansible_ssh_private_key_file": "/home/sina/.ssh/id_rsa",
                "ansible_user": "ubuntu",
                "cert_email": "s1n4.ne1331@gmail.com",
                "docker": {
                    "log_max_file": "5",
                    "log_max_size": "100m",
                    "no_proxy": "localhost,127.0.0.1,hub.hamdocker.ir",
                    "registry_mirror": "https://hub.hamdocker.ir"
                },
                "docker_root_directory": "/var/lib/docker",
                "email": "s1n4.ne1331@gmail.com",
                "latest": "latest",
                "nexus_backup_volume_name": "nexus-data",
                "nexus_destination_backup_dir": "/mnt/backups/nexus",
                "postgres_tag": "12.1",
                "redis_tag": "6.2.4",
                "sentry_tag": "latest",
                "server_email": "s1n4.ne1331@gmail.com",
                "sonar_tag": "7.7-community",
                "traefik_backup_volume_name": "traefik-acme",
                "traefik_destination_backup_dir": "/mnt/backups/traefik"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "observability",
            "repo_server",
            "stages",
            "mailbit",
            "DB",
            "object_storage",
            "ansible"
        ]
    },
    "ansible": {
        "hosts": [
            "awx"
        ]
    },
    "mailbit": {
        "hosts": [
            "bitmail"
        ]
    },
    "object_storage": {
        "hosts": [
            "minio"
        ]
    },
    "observability": {
        "hosts": [
            "obs"
        ]
    },
    "repo_server": {
        "hosts": [
            "git",
            "gitlab-runner"
        ]
    },
    "stages": {
        "hosts": [
            "production",
            "pre-product"
        ]
    }
}
2023-11-26 20:17:24,827 p=8835 u=sina n=ansible | PLAY [hardening server and install basic tools] ********************************
2023-11-26 20:17:24,880 p=8835 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 20:17:25,021 p=8835 u=sina n=ansible | fatal: [bitmail]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 37.32.5.28 port 8090: Connection refused", "unreachable": true}
2023-11-26 20:17:25,061 p=8835 u=sina n=ansible | fatal: [git]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname 188.121.99.8090: Name or service not known", "unreachable": true}
2023-11-26 20:17:25,129 p=8835 u=sina n=ansible | fatal: [minio]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 5.34.199.189 port 8090: Connection refused", "unreachable": true}
2023-11-26 20:17:25,129 p=8835 u=sina n=ansible | fatal: [awx]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 37.32.6.114 port 8090: Connection refused", "unreachable": true}
2023-11-26 20:17:34,910 p=8835 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-26 20:26:29,028 p=9632 u=sina n=ansible | PLAY [hardening server and install basic tools] ********************************
2023-11-26 20:26:29,078 p=9632 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 20:26:54,541 p=9632 u=sina n=ansible | ok: [postgres]
2023-11-26 20:26:57,753 p=9632 u=sina n=ansible | ok: [git]
2023-11-26 20:26:59,670 p=9632 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:27:00,186 p=9632 u=sina n=ansible | ok: [redis]
2023-11-26 20:27:01,268 p=9632 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:27:02,455 p=9632 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:27:02,506 p=9632 u=sina n=ansible | ok: [production]
2023-11-26 20:27:03,301 p=9632 u=sina n=ansible | ok: [awx]
2023-11-26 20:27:09,009 p=9632 u=sina n=ansible | ok: [obs]
2023-11-26 20:27:09,239 p=9632 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-26 20:27:44,612 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:27:45,103 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:27:45,361 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:27:45,980 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:27:46,523 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:27:46,907 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:27:49,361 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:27:49,398 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:27:51,252 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:27:51,267 p=9632 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-26 20:28:48,663 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:28:52,684 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:29:06,005 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:29:10,595 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:29:11,254 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:29:12,396 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:29:12,921 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:29:13,289 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:29:13,616 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:29:13,631 p=9632 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-26 20:29:31,238 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:29:33,027 p=9632 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:29:34,382 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:29:34,854 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:29:35,255 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:29:35,489 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:29:36,146 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:29:36,376 p=9632 u=sina n=ansible | ok: [awx]
2023-11-26 20:29:37,984 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:29:38,005 p=9632 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-26 20:29:56,654 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:29:57,307 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:29:57,406 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:29:57,589 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:29:57,848 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:29:57,916 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:29:58,176 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:29:58,361 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:29:58,646 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:29:58,656 p=9632 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-26 20:30:15,748 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:30:16,197 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:30:16,300 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:30:16,732 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:30:16,893 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:30:17,138 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:30:17,252 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:30:17,743 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:30:18,105 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:30:18,120 p=9632 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-26 20:30:32,163 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:30:33,828 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:30:35,782 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:30:36,718 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:30:36,821 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:30:36,967 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:30:36,977 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:30:37,146 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:30:37,241 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:30:37,255 p=9632 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-26 20:30:46,394 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/cron.d)
2023-11-26 20:30:46,794 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.d)
2023-11-26 20:30:46,886 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/cron.d)
2023-11-26 20:30:46,926 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/cron.d)
2023-11-26 20:30:47,137 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.d)
2023-11-26 20:30:47,230 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/cron.d)
2023-11-26 20:30:47,647 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.d)
2023-11-26 20:30:47,789 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/cron.d)
2023-11-26 20:30:51,019 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/cron.d)
2023-11-26 20:30:55,547 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.daily)
2023-11-26 20:30:56,112 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.daily)
2023-11-26 20:30:56,455 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/cron.daily)
2023-11-26 20:30:57,042 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/cron.daily)
2023-11-26 20:30:57,463 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/cron.daily)
2023-11-26 20:30:57,540 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/cron.daily)
2023-11-26 20:30:57,778 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.daily)
2023-11-26 20:30:58,197 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/cron.daily)
2023-11-26 20:31:06,002 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/cron.daily)
2023-11-26 20:31:06,162 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/cron.hourly)
2023-11-26 20:31:06,222 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.hourly)
2023-11-26 20:31:06,238 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/cron.hourly)
2023-11-26 20:31:06,306 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.hourly)
2023-11-26 20:31:07,450 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/cron.hourly)
2023-11-26 20:31:07,453 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.hourly)
2023-11-26 20:31:07,570 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/cron.hourly)
2023-11-26 20:31:09,014 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/cron.hourly)
2023-11-26 20:31:10,361 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/cron.hourly)
2023-11-26 20:31:15,696 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/cron.weekly)
2023-11-26 20:31:15,725 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.weekly)
2023-11-26 20:31:16,264 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/cron.weekly)
2023-11-26 20:31:16,770 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/cron.weekly)
2023-11-26 20:31:18,780 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/cron.weekly)
2023-11-26 20:31:20,407 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/cron.weekly)
2023-11-26 20:31:20,502 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.weekly)
2023-11-26 20:31:21,044 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.weekly)
2023-11-26 20:31:21,171 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/cron.weekly)
2023-11-26 20:31:22,803 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/cron.monthly)
2023-11-26 20:31:25,530 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/cron.monthly)
2023-11-26 20:31:25,574 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/cron.monthly)
2023-11-26 20:31:26,271 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/cron.monthly)
2023-11-26 20:31:27,292 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/cron.monthly)
2023-11-26 20:31:30,701 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/cron.monthly)
2023-11-26 20:31:30,763 p=9632 u=sina n=ansible | changed: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:31,942 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/cron.monthly)
2023-11-26 20:31:32,132 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/cron.monthly)
2023-11-26 20:31:33,108 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/cron.monthly)
2023-11-26 20:31:33,207 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:35,135 p=9632 u=sina n=ansible | changed: [redis] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:37,131 p=9632 u=sina n=ansible | changed: [awx] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:38,403 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/crontab)
2023-11-26 20:31:40,727 p=9632 u=sina n=ansible | changed: [git] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:41,897 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:41,985 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/crontab)
2023-11-26 20:31:42,444 p=9632 u=sina n=ansible | changed: [production] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:42,978 p=9632 u=sina n=ansible | changed: [obs] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:44,116 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/crontab)
2023-11-26 20:31:44,320 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/crontab)
2023-11-26 20:31:44,901 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-26 20:31:45,515 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/crontab)
2023-11-26 20:31:48,833 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/crontab)
2023-11-26 20:31:50,967 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/crontab)
2023-11-26 20:31:50,969 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/crontab)
2023-11-26 20:31:51,520 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/crontab)
2023-11-26 20:31:51,534 p=9632 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-26 20:32:00,440 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/usr/bin/as)
2023-11-26 20:32:01,621 p=9632 u=sina n=ansible | changed: [production] => (item=/usr/bin/as)
2023-11-26 20:32:01,690 p=9632 u=sina n=ansible | changed: [postgres] => (item=/usr/bin/as)
2023-11-26 20:32:01,756 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/usr/bin/as)
2023-11-26 20:32:01,987 p=9632 u=sina n=ansible | changed: [git] => (item=/usr/bin/as)
2023-11-26 20:32:02,993 p=9632 u=sina n=ansible | changed: [obs] => (item=/usr/bin/as)
2023-11-26 20:32:03,415 p=9632 u=sina n=ansible | changed: [awx] => (item=/usr/bin/as)
2023-11-26 20:32:04,193 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/usr/bin/as)
2023-11-26 20:32:05,547 p=9632 u=sina n=ansible | changed: [redis] => (item=/usr/bin/as)
2023-11-26 20:32:08,697 p=9632 u=sina n=ansible | changed: [production] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:09,017 p=9632 u=sina n=ansible | changed: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:11,581 p=9632 u=sina n=ansible | changed: [obs] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:11,728 p=9632 u=sina n=ansible | changed: [redis] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:11,785 p=9632 u=sina n=ansible | changed: [awx] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:11,897 p=9632 u=sina n=ansible | changed: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:11,904 p=9632 u=sina n=ansible | changed: [bitmail] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:12,022 p=9632 u=sina n=ansible | changed: [gitlab-runner] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:12,453 p=9632 u=sina n=ansible | changed: [git] => (item=/etc/ssh/sshd_config)
2023-11-26 20:32:12,471 p=9632 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-26 20:32:28,541 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:32:31,591 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:32:36,592 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:32:37,122 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:32:37,667 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:32:37,846 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:32:39,132 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:32:40,679 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:32:40,685 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:32:40,710 p=9632 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-26 20:32:49,003 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:32:49,504 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:32:49,827 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:32:50,217 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:32:50,241 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:32:50,266 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:32:50,302 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:32:50,303 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:32:53,083 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:32:53,094 p=9632 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-26 20:33:01,138 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:33:01,662 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:33:01,769 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:33:01,831 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:33:01,898 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:33:02,147 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:33:02,243 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:33:02,263 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:33:02,788 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:33:02,803 p=9632 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-26 20:33:19,891 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:33:20,481 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:33:20,637 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:33:20,723 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:33:21,089 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:33:21,304 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:33:21,403 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:33:22,324 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:33:22,450 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:33:22,459 p=9632 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-26 20:33:41,319 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:33:44,087 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:33:44,474 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:33:46,760 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:33:46,809 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:33:47,327 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:33:47,533 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:33:48,446 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:33:49,351 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:33:49,370 p=9632 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-26 20:34:06,160 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:34:06,616 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:34:07,790 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:34:09,159 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:34:09,345 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:34:09,370 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:34:09,690 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:34:09,859 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:34:09,900 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:34:09,922 p=9632 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-26 20:34:18,505 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:34:18,846 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:34:18,964 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:34:19,291 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:34:19,384 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:34:19,639 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:34:20,048 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:34:20,079 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:34:20,096 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:34:20,105 p=9632 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-26 20:34:35,842 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:34:38,037 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:34:39,601 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:34:39,660 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:34:39,765 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:34:40,266 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:34:40,325 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:34:40,511 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:34:40,682 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:34:40,702 p=9632 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-26 20:34:49,367 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:34:50,454 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:34:50,617 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:34:51,156 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:34:51,635 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:34:51,727 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:34:51,804 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:34:51,898 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:34:52,446 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:34:52,460 p=9632 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-26 20:35:08,515 p=9632 u=sina n=ansible | ok: [postgres]
2023-11-26 20:35:09,066 p=9632 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:35:11,330 p=9632 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:35:11,908 p=9632 u=sina n=ansible | ok: [production]
2023-11-26 20:35:12,909 p=9632 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:35:13,078 p=9632 u=sina n=ansible | ok: [redis]
2023-11-26 20:35:13,291 p=9632 u=sina n=ansible | ok: [obs]
2023-11-26 20:35:13,656 p=9632 u=sina n=ansible | ok: [git]
2023-11-26 20:35:14,201 p=9632 u=sina n=ansible | ok: [awx]
2023-11-26 20:35:14,227 p=9632 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-26 20:35:40,598 p=9632 u=sina n=ansible | changed: [obs]
2023-11-26 20:35:42,492 p=9632 u=sina n=ansible | changed: [redis]
2023-11-26 20:35:42,611 p=9632 u=sina n=ansible | changed: [git]
2023-11-26 20:35:43,727 p=9632 u=sina n=ansible | changed: [postgres]
2023-11-26 20:35:46,158 p=9632 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:35:46,644 p=9632 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:35:47,789 p=9632 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:35:48,201 p=9632 u=sina n=ansible | changed: [production]
2023-11-26 20:35:50,230 p=9632 u=sina n=ansible | changed: [awx]
2023-11-26 20:35:50,241 p=9632 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-26 20:35:55,425 p=9632 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-26 20:37:06,317 p=12617 u=sina n=ansible | PLAY [hardening server and install basic tools] ********************************
2023-11-26 20:37:06,366 p=12617 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 20:37:25,443 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:37:26,576 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:37:27,004 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:37:27,551 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:37:28,875 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:37:28,877 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:37:28,999 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:37:29,077 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:37:29,082 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:37:29,226 p=12617 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-26 20:37:39,805 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:37:39,962 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:37:42,284 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:37:42,500 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:37:42,697 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:37:42,810 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:37:42,823 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:37:42,884 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:37:43,604 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:37:43,616 p=12617 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-26 20:37:55,931 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:37:56,747 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:37:57,322 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:37:57,936 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:37:58,075 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:37:58,119 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:37:58,251 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:37:59,021 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:38:00,013 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:38:00,023 p=12617 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-26 20:38:18,862 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:38:19,532 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:38:19,803 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:38:19,839 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:38:20,038 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:38:20,283 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:38:21,047 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:38:21,068 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:38:21,567 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:38:21,577 p=12617 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-26 20:38:38,334 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:38:38,386 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:38:38,431 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:38:38,780 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:38:39,601 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:38:39,619 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:38:39,972 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:38:39,993 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:38:40,642 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:38:40,653 p=12617 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-26 20:38:55,432 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:38:55,815 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:38:56,640 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:38:57,408 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:38:57,569 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:38:58,025 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:38:58,139 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:38:58,808 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:38:59,083 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:38:59,097 p=12617 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-26 20:39:13,693 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:39:16,233 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:39:16,572 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:39:16,890 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:39:16,923 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:39:16,969 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:39:16,987 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:39:17,121 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:39:17,172 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:39:17,182 p=12617 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-26 20:39:25,229 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.d)
2023-11-26 20:39:25,340 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/cron.d)
2023-11-26 20:39:25,969 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/cron.d)
2023-11-26 20:39:27,111 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.d)
2023-11-26 20:39:27,120 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/cron.d)
2023-11-26 20:39:27,290 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/cron.d)
2023-11-26 20:39:28,192 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.d)
2023-11-26 20:39:28,699 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.d)
2023-11-26 20:39:31,325 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/cron.d)
2023-11-26 20:39:33,512 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/cron.daily)
2023-11-26 20:39:35,139 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/cron.daily)
2023-11-26 20:39:35,589 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/cron.daily)
2023-11-26 20:39:35,945 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.daily)
2023-11-26 20:39:36,438 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.daily)
2023-11-26 20:39:36,706 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.daily)
2023-11-26 20:39:36,954 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.daily)
2023-11-26 20:39:40,110 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/cron.daily)
2023-11-26 20:39:40,519 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/cron.daily)
2023-11-26 20:39:41,046 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/cron.hourly)
2023-11-26 20:39:42,823 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/cron.hourly)
2023-11-26 20:39:42,873 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.hourly)
2023-11-26 20:39:43,479 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/cron.hourly)
2023-11-26 20:39:44,210 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.hourly)
2023-11-26 20:39:48,191 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/cron.hourly)
2023-11-26 20:39:50,457 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.hourly)
2023-11-26 20:39:50,546 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/cron.weekly)
2023-11-26 20:39:50,928 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.hourly)
2023-11-26 20:39:51,476 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/cron.weekly)
2023-11-26 20:39:52,083 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/cron.weekly)
2023-11-26 20:39:52,569 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.weekly)
2023-11-26 20:39:52,590 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.weekly)
2023-11-26 20:39:53,863 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/cron.hourly)
2023-11-26 20:39:54,011 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/cron.weekly)
2023-11-26 20:39:57,962 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.weekly)
2023-11-26 20:39:57,972 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/cron.monthly)
2023-11-26 20:39:59,577 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.weekly)
2023-11-26 20:40:00,828 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/cron.monthly)
2023-11-26 20:40:01,046 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/cron.monthly)
2023-11-26 20:40:01,245 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.monthly)
2023-11-26 20:40:03,329 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.monthly)
2023-11-26 20:40:04,170 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/cron.monthly)
2023-11-26 20:40:06,508 p=12617 u=sina n=ansible | ok: [obs] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:07,076 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/cron.weekly)
2023-11-26 20:40:07,322 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.monthly)
2023-11-26 20:40:07,461 p=12617 u=sina n=ansible | ok: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:07,848 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.monthly)
2023-11-26 20:40:08,543 p=12617 u=sina n=ansible | ok: [redis] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:11,958 p=12617 u=sina n=ansible | ok: [awx] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:13,186 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:13,338 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/crontab)
2023-11-26 20:40:14,289 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/cron.monthly)
2023-11-26 20:40:15,736 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:16,781 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/crontab)
2023-11-26 20:40:17,258 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:17,442 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/crontab)
2023-11-26 20:40:17,514 p=12617 u=sina n=ansible | ok: [git] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:17,925 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/crontab)
2023-11-26 20:40:20,540 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/crontab)
2023-11-26 20:40:21,266 p=12617 u=sina n=ansible | ok: [production] => (item=/boot/grub/grub.cfg)
2023-11-26 20:40:21,386 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/crontab)
2023-11-26 20:40:21,698 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/crontab)
2023-11-26 20:40:21,857 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/crontab)
2023-11-26 20:40:23,080 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/crontab)
2023-11-26 20:40:23,093 p=12617 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-26 20:40:29,989 p=12617 u=sina n=ansible | ok: [production] => (item=/usr/bin/as)
2023-11-26 20:40:31,255 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/usr/bin/as)
2023-11-26 20:40:31,601 p=12617 u=sina n=ansible | ok: [git] => (item=/usr/bin/as)
2023-11-26 20:40:32,614 p=12617 u=sina n=ansible | ok: [postgres] => (item=/usr/bin/as)
2023-11-26 20:40:32,862 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/usr/bin/as)
2023-11-26 20:40:32,993 p=12617 u=sina n=ansible | ok: [obs] => (item=/usr/bin/as)
2023-11-26 20:40:33,140 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/usr/bin/as)
2023-11-26 20:40:33,189 p=12617 u=sina n=ansible | ok: [redis] => (item=/usr/bin/as)
2023-11-26 20:40:36,456 p=12617 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:37,294 p=12617 u=sina n=ansible | ok: [awx] => (item=/usr/bin/as)
2023-11-26 20:40:39,935 p=12617 u=sina n=ansible | ok: [obs] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:40,047 p=12617 u=sina n=ansible | ok: [git] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:40,205 p=12617 u=sina n=ansible | ok: [production] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:40,698 p=12617 u=sina n=ansible | ok: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:40,742 p=12617 u=sina n=ansible | ok: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:41,073 p=12617 u=sina n=ansible | ok: [redis] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:41,998 p=12617 u=sina n=ansible | ok: [awx] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:42,267 p=12617 u=sina n=ansible | ok: [bitmail] => (item=/etc/ssh/sshd_config)
2023-11-26 20:40:42,276 p=12617 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-26 20:40:57,788 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:40:58,108 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:40:58,905 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:40:59,013 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:40:59,228 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:41:00,492 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:41:00,885 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:41:01,054 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:41:01,112 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:41:01,121 p=12617 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-26 20:41:08,415 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:41:09,158 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:41:09,715 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:41:09,741 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:41:10,133 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:41:10,242 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:41:10,312 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:41:10,488 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:41:10,597 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:41:10,607 p=12617 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-26 20:41:17,711 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:41:19,153 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:41:19,302 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:41:19,507 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:41:19,804 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:41:19,847 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:41:19,953 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:41:19,965 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:41:20,003 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:41:20,019 p=12617 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-26 20:41:35,651 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:41:37,053 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:41:37,413 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:41:37,498 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:41:37,509 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:41:37,673 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:41:37,730 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:41:37,790 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:41:38,501 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:41:38,513 p=12617 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-26 20:41:55,349 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:41:55,401 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:41:55,710 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:41:55,869 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:41:56,202 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:41:56,681 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:41:56,703 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:41:56,809 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:41:56,899 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:41:56,908 p=12617 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-26 20:42:09,919 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:42:10,178 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:42:13,379 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:42:13,986 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:42:14,077 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:42:14,183 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:42:14,350 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:42:14,463 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:42:15,960 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:42:15,972 p=12617 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-26 20:42:22,832 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:42:24,427 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:42:24,648 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:42:24,909 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:42:25,002 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:42:25,051 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:42:25,280 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:42:25,558 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:42:25,639 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:42:25,649 p=12617 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-26 20:42:42,267 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:42:42,787 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:42:43,683 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:42:43,718 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:42:43,722 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:42:43,732 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:42:43,824 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:42:44,019 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:42:44,110 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:42:44,121 p=12617 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-26 20:42:52,731 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:42:52,766 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:42:52,919 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:42:52,995 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:42:53,101 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:42:53,222 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:42:53,247 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:42:53,303 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:42:53,684 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:42:53,694 p=12617 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-26 20:43:08,974 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:43:11,759 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:43:12,144 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:43:12,288 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:43:12,992 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:43:13,200 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:43:13,369 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:43:13,411 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:43:13,686 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:43:13,696 p=12617 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-26 20:43:32,105 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:43:32,872 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:43:32,933 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:43:33,481 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:43:33,645 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:43:33,979 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:43:34,368 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:43:34,413 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:43:34,688 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:43:34,700 p=12617 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-26 20:43:52,894 p=12617 u=sina n=ansible | fatal: [obs]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:52,894 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:52,940 p=12617 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:52,940 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:54,167 p=12617 u=sina n=ansible | fatal: [redis]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:54,167 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:54,488 p=12617 u=sina n=ansible | fatal: [production]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:54,488 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:54,764 p=12617 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:54,765 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:54,803 p=12617 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:54,804 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:55,017 p=12617 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:55,017 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:55,218 p=12617 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:55,218 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:55,575 p=12617 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 20:43:55,575 p=12617 u=sina n=ansible | ...ignoring
2023-11-26 20:43:55,586 p=12617 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-26 20:44:10,623 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:44:11,794 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:44:11,916 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:44:12,122 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:44:12,946 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:44:13,235 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:44:13,415 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:44:13,458 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:44:13,551 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:44:13,562 p=12617 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-26 20:44:21,646 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:44:21,915 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:44:23,103 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:44:23,134 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:44:23,737 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:44:23,844 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:44:23,889 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:44:24,182 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:44:24,532 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:44:24,546 p=12617 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-26 20:44:35,295 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:44:35,536 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:44:35,660 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:44:35,950 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:44:35,963 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:44:36,289 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:44:36,534 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:44:37,184 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:44:37,192 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:44:37,203 p=12617 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-26 20:44:49,890 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:44:50,941 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:44:53,797 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:44:54,264 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:44:55,321 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:44:55,388 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:44:55,697 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:44:55,907 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:44:56,218 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:44:56,227 p=12617 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-26 20:45:12,204 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:45:13,307 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:45:13,473 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:45:13,697 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:45:13,716 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:45:14,001 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:45:14,180 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:45:14,402 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:45:18,456 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:45:18,465 p=12617 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-26 20:45:38,932 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:45:40,211 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:45:40,804 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:45:40,906 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:45:41,397 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:45:41,481 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:45:41,939 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:45:42,069 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:45:42,963 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:45:42,980 p=12617 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-26 20:45:43,020 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,044 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,085 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,107 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,146 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,167 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,203 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,230 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:43,272 p=12617 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 20:45:52,200 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:45:52,246 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:45:52,668 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:45:52,680 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:45:53,131 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:45:53,171 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:45:53,204 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:45:53,360 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:46:03,541 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:46:03,552 p=12617 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-26 20:46:17,750 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:46:18,223 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:46:20,148 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:46:21,545 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:46:21,951 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:46:22,492 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:46:22,566 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:46:23,161 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:46:23,334 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:46:23,344 p=12617 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-26 20:46:39,002 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:46:39,162 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:46:39,885 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:46:39,981 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:46:40,294 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:46:40,405 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:46:41,104 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:46:41,374 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:46:42,332 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:46:42,343 p=12617 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-26 20:46:57,617 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:46:58,063 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:46:59,268 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:47:00,362 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:47:00,614 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:47:00,749 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:47:01,021 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:47:01,047 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:47:01,151 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:47:01,159 p=12617 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-26 20:47:09,022 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:47:09,296 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:47:09,380 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:47:09,436 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:47:09,542 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:47:10,032 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:47:10,259 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:47:10,308 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:47:10,682 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:47:10,694 p=12617 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-26 20:47:17,987 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:47:18,999 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:47:19,449 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:47:19,643 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:47:19,749 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:47:19,788 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:47:19,792 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:47:19,806 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:47:20,146 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:47:20,155 p=12617 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-26 20:47:27,295 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:47:28,952 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:47:28,974 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:47:29,177 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:47:29,237 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:47:29,286 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:47:29,324 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:47:29,342 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:47:29,526 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:47:29,535 p=12617 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-26 20:47:37,765 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:47:37,857 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:47:38,261 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:47:38,453 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:47:38,564 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:47:38,586 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:47:38,762 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:47:38,918 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:47:38,955 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:47:38,967 p=12617 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-26 20:47:46,354 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:47:47,750 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:47:47,760 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:47:47,875 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:47:47,980 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:47:48,026 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:47:48,084 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:47:48,148 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:47:48,312 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:47:48,322 p=12617 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-26 20:47:56,313 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:47:56,563 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:47:56,987 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:47:56,988 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:47:57,269 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:47:57,316 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:47:57,683 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:47:57,719 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:47:59,442 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:47:59,452 p=12617 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-26 20:48:08,107 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:48:08,992 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:48:09,092 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:48:09,161 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:48:09,179 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:48:09,204 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:48:09,366 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:48:09,409 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:48:09,704 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:48:09,714 p=12617 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-26 20:48:18,767 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:48:18,826 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:48:18,900 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:48:18,973 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:48:19,040 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:48:19,150 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:48:19,247 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:48:19,346 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:48:19,368 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:48:19,381 p=12617 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-26 20:48:28,382 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:48:28,789 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:48:29,042 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:48:29,235 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:48:29,484 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:48:29,522 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:48:29,564 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:48:29,708 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:48:29,816 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:48:29,828 p=12617 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-26 20:48:38,517 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:48:38,894 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:48:39,045 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:48:39,066 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:48:39,164 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:48:39,187 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:48:39,452 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:48:39,601 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:48:39,939 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:48:39,949 p=12617 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-26 20:49:01,109 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:49:05,073 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:49:05,615 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:49:05,945 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:49:07,550 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:49:09,559 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:49:09,963 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:49:10,019 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:49:10,353 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:49:10,366 p=12617 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-26 20:49:19,563 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:49:19,605 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:49:19,664 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:49:19,688 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:49:19,700 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:49:19,851 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:49:19,995 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:49:20,037 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:49:20,296 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:49:20,304 p=12617 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-26 20:49:27,259 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:49:28,439 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:49:28,727 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:49:29,132 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:49:29,169 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:49:29,963 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:49:29,979 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:49:29,997 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:49:30,772 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:49:30,783 p=12617 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-26 20:49:48,658 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:49:48,817 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:49:48,974 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:49:50,257 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:49:51,715 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:49:51,744 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:49:52,124 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:49:52,173 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:49:52,612 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:49:52,622 p=12617 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-26 20:50:08,676 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:50:08,812 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:50:10,450 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:50:11,051 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:50:11,091 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:50:11,915 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:50:12,393 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:50:12,527 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:50:12,663 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:50:12,676 p=12617 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-26 20:50:25,654 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:50:27,012 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:50:29,579 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:50:31,033 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:50:31,192 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:50:31,252 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:50:31,315 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:50:31,358 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:50:31,548 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:50:31,559 p=12617 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-26 20:50:37,944 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:50:39,732 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:50:39,861 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:50:40,380 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:50:40,628 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:50:40,630 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:50:40,740 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:50:40,843 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:50:41,171 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:50:41,182 p=12617 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-26 20:50:48,548 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:50:48,783 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:50:49,310 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:50:49,502 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:50:49,627 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:50:49,658 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:50:50,059 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:50:50,469 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:50:50,482 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:50:50,495 p=12617 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-26 20:50:58,037 p=12617 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:50:58,467 p=12617 u=sina n=ansible | ok: [obs]
2023-11-26 20:50:58,992 p=12617 u=sina n=ansible | ok: [redis]
2023-11-26 20:50:59,054 p=12617 u=sina n=ansible | ok: [git]
2023-11-26 20:50:59,118 p=12617 u=sina n=ansible | ok: [postgres]
2023-11-26 20:50:59,612 p=12617 u=sina n=ansible | ok: [awx]
2023-11-26 20:50:59,660 p=12617 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:50:59,913 p=12617 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:51:00,342 p=12617 u=sina n=ansible | ok: [production]
2023-11-26 20:51:00,352 p=12617 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-26 20:51:09,258 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:51:09,786 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:51:09,855 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:51:09,855 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:51:09,876 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:51:09,957 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:51:11,091 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:51:11,113 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:51:11,122 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:51:11,135 p=12617 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-26 20:51:19,615 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:51:19,675 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:51:19,900 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:51:19,927 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:51:20,176 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:51:20,294 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:51:20,445 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:51:20,463 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:51:20,556 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:51:20,565 p=12617 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-26 20:51:28,848 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:51:29,099 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:51:29,235 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:51:29,419 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:51:29,444 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:51:29,452 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:51:29,958 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:51:29,965 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:51:30,026 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:51:30,040 p=12617 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-26 20:51:39,475 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:39,511 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:39,862 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:39,865 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:39,867 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:40,161 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:40,810 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:41,348 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:46,181 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:46,525 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:47,240 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:47,473 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:47,642 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:47,828 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 20:51:47,942 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:49,836 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:53,165 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:53,453 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:54,362 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:54,609 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:54,689 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:55,426 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:55,518 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:51:55,601 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:52:00,820 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:02,136 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:52:02,466 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:02,491 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:52:02,599 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:02,715 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:02,964 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:04,620 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 20:52:07,477 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:09,044 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:09,256 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:09,685 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:10,665 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:11,392 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:11,863 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:12,871 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 20:52:13,084 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:14,060 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:17,569 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:17,769 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:20,028 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:20,849 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:21,436 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:21,446 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 20:52:21,994 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:22,753 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:23,047 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:24,786 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:25,186 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:28,689 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:29,000 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:29,743 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:30,323 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:30,539 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 20:52:31,633 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:31,739 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:32,993 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:34,681 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:37,791 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:38,299 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:38,470 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:38,713 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:38,936 p=12617 u=sina n=ansible | changed: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:39,412 p=12617 u=sina n=ansible | changed: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:39,490 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:39,612 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 20:52:44,798 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:45,118 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:45,126 p=12617 u=sina n=ansible | changed: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:45,427 p=12617 u=sina n=ansible | changed: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:46,462 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:47,197 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 20:52:47,356 p=12617 u=sina n=ansible | changed: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:48,285 p=12617 u=sina n=ansible | changed: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:48,902 p=12617 u=sina n=ansible | changed: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:49,860 p=12617 u=sina n=ansible | changed: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:49,924 p=12617 u=sina n=ansible | changed: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 20:52:49,937 p=12617 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-26 20:52:57,292 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:52:58,647 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:52:58,664 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:52:58,771 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:52:59,075 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:52:59,241 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:52:59,481 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:52:59,481 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:52:59,605 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:52:59,616 p=12617 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-26 20:53:11,135 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:53:12,396 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:53:12,954 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:53:12,994 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:53:13,073 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:53:13,117 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:53:13,167 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:53:13,265 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:53:13,465 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:53:13,482 p=12617 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-26 20:53:31,186 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:53:31,360 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:53:31,780 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:53:31,890 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:53:32,240 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:53:33,242 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:53:33,302 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:53:33,759 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:53:33,880 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:53:33,893 p=12617 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-26 20:53:41,634 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:53:42,013 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:53:42,574 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:53:42,692 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:53:42,830 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:53:43,293 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:53:43,491 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:53:43,565 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:53:43,902 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:53:44,150 p=12617 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ssh] *******************************
2023-11-26 20:53:59,361 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:54:03,107 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:54:03,412 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:54:04,248 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:54:04,250 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:54:05,146 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:54:05,189 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:54:05,191 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:54:05,232 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:54:05,247 p=12617 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart iptables] **************************
2023-11-26 20:54:24,982 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:54:25,631 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:54:26,013 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:54:26,079 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:54:26,254 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:54:26,473 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:54:26,798 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:54:26,927 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:54:26,981 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:54:26,993 p=12617 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart fail2ban] **************************
2023-11-26 20:54:45,419 p=12617 u=sina n=ansible | changed: [production]
2023-11-26 20:54:45,891 p=12617 u=sina n=ansible | changed: [postgres]
2023-11-26 20:54:46,410 p=12617 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 20:54:46,824 p=12617 u=sina n=ansible | changed: [redis]
2023-11-26 20:54:47,342 p=12617 u=sina n=ansible | changed: [pre-product]
2023-11-26 20:54:47,388 p=12617 u=sina n=ansible | changed: [git]
2023-11-26 20:54:47,452 p=12617 u=sina n=ansible | changed: [bitmail]
2023-11-26 20:54:47,731 p=12617 u=sina n=ansible | changed: [obs]
2023-11-26 20:54:47,914 p=12617 u=sina n=ansible | changed: [awx]
2023-11-26 20:54:47,924 p=12617 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart ntp] *******************************
2023-11-26 20:55:03,718 p=12617 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:04,928 p=12617 u=sina n=ansible | fatal: [production]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:05,446 p=12617 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:05,910 p=12617 u=sina n=ansible | fatal: [obs]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:06,053 p=12617 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:06,661 p=12617 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:06,811 p=12617 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:07,151 p=12617 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:17,373 p=12617 u=sina n=ansible | fatal: [redis]: FAILED! => {"changed": false, "msg": "Could not find the requested service ntp: host"}
2023-11-26 20:55:17,375 p=12617 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-26 20:55:17,375 p=12617 u=sina n=ansible | awx                        : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,376 p=12617 u=sina n=ansible | bitmail                    : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,376 p=12617 u=sina n=ansible | git                        : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,376 p=12617 u=sina n=ansible | gitlab-runner              : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,376 p=12617 u=sina n=ansible | obs                        : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,376 p=12617 u=sina n=ansible | postgres                   : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,377 p=12617 u=sina n=ansible | pre-product                : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,377 p=12617 u=sina n=ansible | production                 : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:55:17,377 p=12617 u=sina n=ansible | redis                      : ok=61   changed=32   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2023-11-26 20:58:31,797 p=19815 u=sina n=ansible | PLAY [hardening server and install basic tools] ********************************
2023-11-26 20:58:31,842 p=19815 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 20:58:57,789 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 20:59:01,423 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 20:59:08,103 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 20:59:11,046 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:59:12,901 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:59:13,445 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:59:14,723 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 20:59:14,811 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 20:59:14,823 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 20:59:14,962 p=19815 u=sina n=ansible | TASK [preparing-server : Update and upgrade apt packages] **********************
2023-11-26 20:59:29,033 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 20:59:30,448 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 20:59:30,791 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 20:59:31,991 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 20:59:32,282 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 20:59:32,315 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 20:59:32,385 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 20:59:32,582 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 20:59:32,685 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 20:59:32,694 p=19815 u=sina n=ansible | TASK [preparing-server : Install basic tools] **********************************
2023-11-26 21:00:07,583 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:00:08,092 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:00:10,674 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:00:11,500 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:00:13,122 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:00:13,552 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:00:14,832 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:00:15,481 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:00:32,962 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:00:32,971 p=19815 u=sina n=ansible | TASK [preparing-server : Set hostname] *****************************************
2023-11-26 21:00:57,302 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:00:58,423 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:00:58,834 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:00:58,853 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:00:58,972 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:00:59,576 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:01:00,198 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:01:00,679 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:01:01,754 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:01:01,768 p=19815 u=sina n=ansible | TASK [preparing-server : Fix /etc/hosts] ***************************************
2023-11-26 21:01:25,329 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:01:25,628 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:01:26,368 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:01:27,868 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:01:28,336 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:01:28,375 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:01:28,851 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:01:29,335 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:01:32,042 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:01:32,053 p=19815 u=sina n=ansible | TASK [preparing-server : limits.conf] ******************************************
2023-11-26 21:01:55,201 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:01:55,244 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:01:57,260 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:01:57,342 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:01:58,971 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:01:59,187 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:02:00,093 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:02:00,361 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:02:00,557 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:02:00,576 p=19815 u=sina n=ansible | TASK [preparing-server : coredump.conf] ****************************************
2023-11-26 21:02:21,470 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:02:22,484 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:02:23,489 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:02:26,321 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:02:26,744 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:02:27,029 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:02:27,215 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:02:27,226 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:02:27,537 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:02:27,559 p=19815 u=sina n=ansible | TASK [preparing-server : Change file ownership, group and permissions] *********
2023-11-26 21:02:39,785 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.d)
2023-11-26 21:02:42,059 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/cron.d)
2023-11-26 21:02:42,211 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.d)
2023-11-26 21:02:42,432 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/cron.d)
2023-11-26 21:02:42,449 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/cron.d)
2023-11-26 21:02:42,603 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.d)
2023-11-26 21:02:42,766 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/cron.d)
2023-11-26 21:02:42,837 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.d)
2023-11-26 21:02:43,607 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/cron.d)
2023-11-26 21:02:50,868 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.daily)
2023-11-26 21:02:52,820 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.daily)
2023-11-26 21:02:53,871 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/cron.daily)
2023-11-26 21:02:54,774 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/cron.daily)
2023-11-26 21:02:55,289 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/cron.daily)
2023-11-26 21:02:56,435 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/cron.daily)
2023-11-26 21:02:56,947 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/cron.daily)
2023-11-26 21:02:59,215 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.daily)
2023-11-26 21:02:59,511 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.daily)
2023-11-26 21:03:01,803 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.hourly)
2023-11-26 21:03:02,772 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/cron.hourly)
2023-11-26 21:03:07,700 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/cron.hourly)
2023-11-26 21:03:07,909 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.hourly)
2023-11-26 21:03:08,010 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/cron.hourly)
2023-11-26 21:03:09,995 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.hourly)
2023-11-26 21:03:10,232 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.hourly)
2023-11-26 21:03:11,042 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/cron.hourly)
2023-11-26 21:03:11,517 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/cron.hourly)
2023-11-26 21:03:12,608 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/cron.weekly)
2023-11-26 21:03:13,825 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.weekly)
2023-11-26 21:03:19,820 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.weekly)
2023-11-26 21:03:19,988 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/cron.weekly)
2023-11-26 21:03:20,664 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/cron.weekly)
2023-11-26 21:03:21,635 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.weekly)
2023-11-26 21:03:22,473 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/cron.weekly)
2023-11-26 21:03:23,220 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/cron.monthly)
2023-11-26 21:03:24,513 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/cron.monthly)
2023-11-26 21:03:24,604 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.weekly)
2023-11-26 21:03:24,684 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/cron.weekly)
2023-11-26 21:03:32,707 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/cron.monthly)
2023-11-26 21:03:33,994 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/cron.monthly)
2023-11-26 21:03:34,133 p=19815 u=sina n=ansible | ok: [git] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:34,154 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/cron.monthly)
2023-11-26 21:03:35,557 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/cron.monthly)
2023-11-26 21:03:35,743 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/cron.monthly)
2023-11-26 21:03:35,910 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/cron.monthly)
2023-11-26 21:03:38,196 p=19815 u=sina n=ansible | ok: [postgres] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:40,493 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/cron.monthly)
2023-11-26 21:03:45,506 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:45,783 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:46,622 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/crontab)
2023-11-26 21:03:46,636 p=19815 u=sina n=ansible | ok: [production] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:46,899 p=19815 u=sina n=ansible | ok: [awx] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:49,371 p=19815 u=sina n=ansible | ok: [obs] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:49,936 p=19815 u=sina n=ansible | ok: [redis] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:53,255 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/crontab)
2023-11-26 21:03:54,882 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/crontab)
2023-11-26 21:03:55,377 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/crontab)
2023-11-26 21:03:55,781 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/boot/grub/grub.cfg)
2023-11-26 21:03:56,247 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/crontab)
2023-11-26 21:03:56,780 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/crontab)
2023-11-26 21:03:57,335 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/crontab)
2023-11-26 21:03:58,556 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/crontab)
2023-11-26 21:03:59,562 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/crontab)
2023-11-26 21:03:59,575 p=19815 u=sina n=ansible | TASK [preparing-server : restrict access to gcc] *******************************
2023-11-26 21:04:11,652 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/usr/bin/as)
2023-11-26 21:04:13,477 p=19815 u=sina n=ansible | ok: [obs] => (item=/usr/bin/as)
2023-11-26 21:04:13,480 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/usr/bin/as)
2023-11-26 21:04:13,483 p=19815 u=sina n=ansible | ok: [production] => (item=/usr/bin/as)
2023-11-26 21:04:13,812 p=19815 u=sina n=ansible | ok: [git] => (item=/usr/bin/as)
2023-11-26 21:04:13,828 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/usr/bin/as)
2023-11-26 21:04:14,617 p=19815 u=sina n=ansible | ok: [awx] => (item=/usr/bin/as)
2023-11-26 21:04:14,930 p=19815 u=sina n=ansible | ok: [postgres] => (item=/usr/bin/as)
2023-11-26 21:04:16,305 p=19815 u=sina n=ansible | ok: [redis] => (item=/usr/bin/as)
2023-11-26 21:04:23,562 p=19815 u=sina n=ansible | ok: [obs] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:26,597 p=19815 u=sina n=ansible | ok: [bitmail] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:26,620 p=19815 u=sina n=ansible | ok: [production] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:27,195 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:27,263 p=19815 u=sina n=ansible | ok: [pre-product] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:27,271 p=19815 u=sina n=ansible | ok: [git] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:27,455 p=19815 u=sina n=ansible | ok: [postgres] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:27,870 p=19815 u=sina n=ansible | ok: [redis] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:28,110 p=19815 u=sina n=ansible | ok: [awx] => (item=/etc/ssh/sshd_config)
2023-11-26 21:04:28,125 p=19815 u=sina n=ansible | TASK [preparing-server : Create sysctl configuration file] *********************
2023-11-26 21:04:49,528 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:04:51,776 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:04:52,146 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:04:52,808 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:04:52,852 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:04:53,217 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:04:53,222 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:04:53,547 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:04:53,683 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:04:53,694 p=19815 u=sina n=ansible | TASK [preparing-server : disable drivers like usb] *****************************
2023-11-26 21:05:05,203 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:05:05,785 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:05:05,915 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:05:06,146 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:05:06,659 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:05:06,669 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:05:06,682 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:05:06,697 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:05:06,705 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:05:06,714 p=19815 u=sina n=ansible | TASK [preparing-server : disable drivers like firewire] ************************
2023-11-26 21:05:16,353 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:05:17,881 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:05:18,247 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:05:18,473 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:05:18,813 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:05:18,993 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:05:19,221 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:05:19,250 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:05:19,474 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:05:19,484 p=19815 u=sina n=ansible | TASK [preparing-server : change default umask for bashrc] **********************
2023-11-26 21:05:43,198 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:05:43,535 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:05:47,214 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:05:47,334 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:05:47,951 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:05:47,989 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:05:48,958 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:05:49,321 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:05:49,379 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:05:49,391 p=19815 u=sina n=ansible | TASK [preparing-server : change default umask for login.defs] ******************
2023-11-26 21:06:09,565 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:06:11,076 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:06:11,288 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:06:11,965 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:06:12,107 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:06:12,706 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:06:12,896 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:06:14,196 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:06:14,986 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:06:14,996 p=19815 u=sina n=ansible | TASK [preparing-server : config sysctl file] ***********************************
2023-11-26 21:06:33,049 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:06:36,774 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:06:38,760 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:06:38,985 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:06:39,026 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:06:39,039 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:06:39,391 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:06:39,566 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:06:41,679 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:06:41,691 p=19815 u=sina n=ansible | TASK [preparing-server : sysctl reload] ****************************************
2023-11-26 21:06:53,110 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:06:54,142 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:06:54,276 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:06:54,319 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:06:54,528 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:06:54,538 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:06:54,622 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:06:55,028 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:06:55,159 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:06:55,171 p=19815 u=sina n=ansible | TASK [preparing-server : change default umask for profile] *********************
2023-11-26 21:07:14,915 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:07:16,036 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:07:18,367 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:07:18,607 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:07:18,996 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:07:19,136 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:07:19,233 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:07:19,733 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:07:19,884 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:07:19,900 p=19815 u=sina n=ansible | TASK [preparing-server : change directory premissions] *************************
2023-11-26 21:07:30,904 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:07:31,136 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:07:31,404 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:07:32,259 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:07:32,266 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:07:32,420 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:07:32,432 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:07:32,457 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:07:32,908 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:07:32,924 p=19815 u=sina n=ansible | TASK [preparing-server : change password max and min age] **********************
2023-11-26 21:07:53,176 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:07:54,395 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:07:55,507 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:07:55,766 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:07:56,317 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:07:56,702 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:07:57,003 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:07:57,024 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:07:57,123 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:07:57,136 p=19815 u=sina n=ansible | TASK [preparing-server : Stop and Disable ufw service if started] **************
2023-11-26 21:08:22,933 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:08:24,284 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:08:25,592 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:08:25,759 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:08:26,164 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:08:26,349 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:08:26,932 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:08:27,049 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:08:27,665 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:08:27,675 p=19815 u=sina n=ansible | TASK [preparing-server : Stop and Disable postfix service if started] **********
2023-11-26 21:08:48,236 p=19815 u=sina n=ansible | fatal: [git]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:48,237 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:52,636 p=19815 u=sina n=ansible | fatal: [redis]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:52,636 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:52,980 p=19815 u=sina n=ansible | fatal: [pre-product]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:52,980 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:53,513 p=19815 u=sina n=ansible | fatal: [bitmail]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:53,513 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:53,676 p=19815 u=sina n=ansible | fatal: [gitlab-runner]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:53,676 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:53,867 p=19815 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:53,867 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:54,567 p=19815 u=sina n=ansible | fatal: [postgres]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:54,568 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:55,316 p=19815 u=sina n=ansible | fatal: [production]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:55,317 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:55,565 p=19815 u=sina n=ansible | fatal: [obs]: FAILED! => {"changed": false, "msg": "Could not find the requested service postfix: host"}
2023-11-26 21:08:55,565 p=19815 u=sina n=ansible | ...ignoring
2023-11-26 21:08:55,574 p=19815 u=sina n=ansible | TASK [preparing-server : Make timout configuration file.] **********************
2023-11-26 21:09:15,806 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:09:16,884 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:09:17,980 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:09:18,137 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:09:18,703 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:09:18,791 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:09:18,833 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:09:19,140 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:09:21,422 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:09:21,432 p=19815 u=sina n=ansible | TASK [preparing-server : Set timezone to Asia/Tehran] **************************
2023-11-26 21:09:31,354 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:09:31,625 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:09:32,082 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:09:32,541 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:09:32,994 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:09:33,310 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:09:33,969 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:09:34,152 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:09:34,781 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:09:34,791 p=19815 u=sina n=ansible | TASK [preparing-server : Set authorized key taken from file] *******************
2023-11-26 21:09:47,818 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:09:48,614 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:09:49,603 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:09:50,191 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:09:50,322 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:09:50,376 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:09:50,463 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:09:50,561 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:09:50,824 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:09:50,837 p=19815 u=sina n=ansible | TASK [preparing-server : Copy ssh banner file.] ********************************
2023-11-26 21:10:12,192 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:10:14,568 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:10:15,002 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:10:15,103 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:10:15,236 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:10:15,386 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:10:15,390 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:10:15,581 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:10:15,714 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:10:15,725 p=19815 u=sina n=ansible | TASK [preparing-server : Make sshd configuration file.] ************************
2023-11-26 21:10:31,883 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:10:38,488 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:10:38,834 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:10:38,950 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:10:39,354 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:10:39,855 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:10:39,892 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:10:40,066 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:10:40,178 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:10:40,187 p=19815 u=sina n=ansible | TASK [preparing-server : Make iptables configuration file.] ********************
2023-11-26 21:11:01,040 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:11:02,840 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:11:03,691 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:11:03,837 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:11:03,893 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:11:04,132 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:11:04,312 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:11:04,644 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:11:04,663 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:11:04,679 p=19815 u=sina n=ansible | TASK [preparing-server : restore iptables state from a file] *******************
2023-11-26 21:11:04,717 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,738 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,778 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,795 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,835 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,859 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,914 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,948 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:04,983 p=19815 u=sina n=ansible | [WARNING]: Attempts to restore iptables state without rollback in case of
mistake may lead the ansible controller to loose access to the hosts and never
regain it before fixing firewall rules through a serial console, or any other
way except SSH. Please set task attribute 'poll' (=15) to 0, and 'async' (=0)
to a value >2 and not greater than 'ansible_timeout' (=10) (recommended).

2023-11-26 21:11:19,752 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:11:19,978 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:11:20,471 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:11:20,479 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:11:20,515 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:11:20,568 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:11:20,569 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:11:21,244 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:11:22,304 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:11:22,314 p=19815 u=sina n=ansible | TASK [preparing-server : Make fail2ban configuration file.] ********************
2023-11-26 21:11:43,162 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:11:44,481 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:11:45,312 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:11:45,548 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:11:45,775 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:11:46,295 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:11:46,543 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:11:46,597 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:11:46,610 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:11:46,621 p=19815 u=sina n=ansible | TASK [preparing-server : hosts.allow] ******************************************
2023-11-26 21:12:08,481 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:12:08,639 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:12:09,671 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:12:09,829 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:12:10,534 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:12:10,542 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:12:10,842 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:12:11,110 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:12:11,119 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:12:11,134 p=19815 u=sina n=ansible | TASK [preparing-server : hosts.deny] *******************************************
2023-11-26 21:12:34,051 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:12:34,319 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:12:34,420 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:12:35,028 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:12:35,319 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:12:35,452 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:12:35,459 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:12:35,560 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:12:35,756 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:12:35,776 p=19815 u=sina n=ansible | TASK [preparing-server : set Debian audit grub cmdline] ************************
2023-11-26 21:12:46,406 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:12:46,606 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:12:47,075 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:12:47,134 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:12:47,373 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:12:47,781 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:12:48,132 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:12:48,379 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:12:48,765 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:12:48,780 p=19815 u=sina n=ansible | TASK [preparing-server : set audit action_mail_acct] ***************************
2023-11-26 21:12:59,430 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:12:59,650 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:13:00,444 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:13:00,573 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:13:00,574 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:13:00,675 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:13:00,704 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:13:01,013 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:13:01,452 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:13:01,470 p=19815 u=sina n=ansible | TASK [preparing-server : set audit admin_space_left_action] ********************
2023-11-26 21:13:12,175 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:13:12,812 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:13:12,945 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:13:13,821 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:13:13,862 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:13:15,456 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:13:15,482 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:13:15,497 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:13:15,505 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:13:15,523 p=19815 u=sina n=ansible | TASK [preparing-server : set audit disk_error_action] **************************
2023-11-26 21:13:27,488 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:13:27,563 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:13:28,164 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:13:28,321 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:13:28,610 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:13:28,628 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:13:28,680 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:13:28,762 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:13:29,023 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:13:29,033 p=19815 u=sina n=ansible | TASK [preparing-server : set audit disk_full_action] ***************************
2023-11-26 21:13:40,557 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:13:40,638 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:13:40,854 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:13:40,900 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:13:40,919 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:13:40,969 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:13:41,090 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:13:41,339 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:13:41,462 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:13:41,474 p=19815 u=sina n=ansible | TASK [preparing-server : set audit max_log_file] *******************************
2023-11-26 21:13:51,051 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:13:51,197 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:13:51,644 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:13:52,275 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:13:52,963 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:13:53,845 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:13:53,912 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:13:54,031 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:13:54,702 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:13:54,711 p=19815 u=sina n=ansible | TASK [preparing-server : set audit max_log_file_action] ************************
2023-11-26 21:14:05,094 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:14:06,356 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:14:06,497 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:14:07,413 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:14:07,577 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:14:07,598 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:14:07,606 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:14:07,636 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:14:07,802 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:14:07,813 p=19815 u=sina n=ansible | TASK [preparing-server : set audit num_logs] ***********************************
2023-11-26 21:14:18,051 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:14:18,448 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:14:19,098 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:14:19,559 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:14:20,075 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:14:20,308 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:14:21,109 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:14:21,183 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:14:21,372 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:14:21,384 p=19815 u=sina n=ansible | TASK [preparing-server : set audit space_left] *********************************
2023-11-26 21:14:33,717 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:14:33,928 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:14:34,479 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:14:34,548 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:14:34,580 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:14:34,602 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:14:34,618 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:14:34,644 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:14:34,733 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:14:34,743 p=19815 u=sina n=ansible | TASK [preparing-server : set audit space_left_action] **************************
2023-11-26 21:14:45,361 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:14:46,514 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:14:46,613 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:14:46,669 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:14:46,791 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:14:46,981 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:14:47,016 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:14:47,285 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:14:47,430 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:14:47,440 p=19815 u=sina n=ansible | TASK [preparing-server : audit.rules] ******************************************
2023-11-26 21:15:06,230 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:15:09,346 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:15:10,423 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:15:10,943 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:15:11,110 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:15:11,199 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:15:11,608 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:15:11,757 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:15:12,121 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:15:12,134 p=19815 u=sina n=ansible | TASK [preparing-server : remove /tmp from fstab] *******************************
2023-11-26 21:15:30,145 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:15:30,207 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:15:32,420 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:15:32,934 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:15:32,941 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:15:33,653 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:15:33,920 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:15:33,944 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:15:36,871 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:15:36,882 p=19815 u=sina n=ansible | TASK [preparing-server : remove floppy from fstab] *****************************
2023-11-26 21:15:44,515 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:15:48,302 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:15:49,177 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:15:49,203 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:15:49,332 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:15:49,354 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:15:49,530 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:15:49,634 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:15:49,670 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:15:49,682 p=19815 u=sina n=ansible | TASK [preparing-server : resolved.conf] ****************************************
2023-11-26 21:16:11,353 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:16:12,448 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:16:12,789 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:16:13,028 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:16:13,082 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:16:13,402 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:16:13,457 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:16:13,614 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:16:14,246 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:16:14,258 p=19815 u=sina n=ansible | TASK [preparing-server : systemd journald.conf] ********************************
2023-11-26 21:16:36,273 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:16:36,520 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:16:36,762 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:16:38,229 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:16:38,322 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:16:38,550 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:16:38,587 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:16:38,758 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:16:39,073 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:16:39,088 p=19815 u=sina n=ansible | TASK [preparing-server : logrotate.conf] ***************************************
2023-11-26 21:17:00,569 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:17:01,389 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:17:02,993 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:17:03,032 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:17:03,062 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:17:03,264 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:17:03,486 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:17:03,746 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:17:03,871 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:17:03,881 p=19815 u=sina n=ansible | TASK [preparing-server : cron.daily logrotate] *********************************
2023-11-26 21:17:16,002 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:17:16,366 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:17:16,904 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:17:17,012 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:17:17,115 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:17:17,201 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:17:17,261 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:17:17,402 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:17:17,531 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:17:17,541 p=19815 u=sina n=ansible | TASK [preparing-server : stat rsyslog.conf] ************************************
2023-11-26 21:17:26,547 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:17:26,792 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:17:27,736 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:17:29,222 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:17:29,482 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:17:29,490 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:17:29,768 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:17:29,884 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:17:30,036 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:17:30,048 p=19815 u=sina n=ansible | TASK [preparing-server : get rsyslog.conf FileCreateMode] **********************
2023-11-26 21:17:40,687 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:17:41,357 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:17:42,903 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:17:43,037 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:17:43,060 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:17:43,099 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:17:43,104 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:17:43,108 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:17:43,124 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:17:43,140 p=19815 u=sina n=ansible | TASK [preparing-server : set rsyslog.conf FileCreateMode] **********************
2023-11-26 21:17:52,832 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:17:53,570 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:17:53,587 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:17:53,665 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:17:53,803 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:17:54,788 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:17:55,436 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:17:55,446 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:17:55,622 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:17:55,633 p=19815 u=sina n=ansible | TASK [preparing-server : set rsyslog.d FileCreateMode] *************************
2023-11-26 21:18:07,238 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:18:07,301 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:18:07,468 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:18:07,632 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:18:07,679 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:18:07,700 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:18:07,737 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:18:08,494 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:18:08,898 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:18:08,907 p=19815 u=sina n=ansible | TASK [preparing-server : Add the br_netfilter module] **************************
2023-11-26 21:18:19,351 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:18:20,364 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:18:20,641 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:18:20,832 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:18:20,986 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:18:21,095 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:18:21,136 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:18:21,136 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:18:21,403 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:18:21,412 p=19815 u=sina n=ansible | TASK [preparing-server : Change various sysctl-settings] ***********************
2023-11-26 21:18:31,791 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:32,205 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,371 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,375 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,465 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,560 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,857 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:33,952 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:35,686 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.ip_forward', 'value': 1})
2023-11-26 21:18:43,166 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:44,972 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:45,441 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:45,502 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:45,999 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:46,986 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:47,594 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:49,218 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:49,612 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:51,216 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:54,262 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:55,003 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:55,202 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:59,325 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:18:59,372 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:19:00,138 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:19:01,036 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:19:04,208 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:05,476 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv6.conf.all.forwarding', 'value': 1})
2023-11-26 21:19:05,632 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:06,487 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:10,226 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:10,359 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:13,368 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:15,332 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:16,319 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:16,748 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:16,806 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:16,814 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:17,649 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'vm.max_map_count', 'value': 262144})
2023-11-26 21:19:18,982 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:24,563 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:24,628 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:26,884 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:28,708 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:29,142 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:29,403 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:29,704 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:30,061 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:32,961 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'fs.file-max', 'value': 1500000})
2023-11-26 21:19:34,363 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:34,549 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:39,517 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:39,928 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:40,086 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:41,144 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:41,319 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:42,816 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:45,463 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.ipv4.tcp_tw_reuse', 'value': 1})
2023-11-26 21:19:45,825 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:46,762 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:47,987 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:19:50,511 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:19:51,273 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:53,213 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:56,017 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:19:56,211 p=19815 u=sina n=ansible | ok: [pre-product] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:19:58,207 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_established', 'value': 900})
2023-11-26 21:19:58,910 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:19:59,520 p=19815 u=sina n=ansible | ok: [redis] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:19:59,663 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:19:59,668 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:20:03,033 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:20:03,297 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:20:04,970 p=19815 u=sina n=ansible | ok: [postgres] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:07,050 p=19815 u=sina n=ansible | ok: [obs] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:07,709 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:07,843 p=19815 u=sina n=ansible | ok: [awx] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:08,452 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_close_wait', 'value': 10})
2023-11-26 21:20:08,478 p=19815 u=sina n=ansible | ok: [git] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:09,441 p=19815 u=sina n=ansible | ok: [production] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:10,610 p=19815 u=sina n=ansible | ok: [bitmail] => (item={'key': 'net.netfilter.nf_conntrack_tcp_timeout_syn_recv', 'value': 30})
2023-11-26 21:20:10,626 p=19815 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - create directories] ******************
2023-11-26 21:20:22,209 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:20:22,381 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:20:23,105 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:20:23,147 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:20:23,151 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:20:23,366 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:20:23,718 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:20:23,804 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:20:23,814 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:20:23,828 p=19815 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - download latest stable version] ******
2023-11-26 21:20:39,296 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:20:39,355 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:20:39,947 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:20:39,969 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:20:39,999 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:20:40,136 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:20:40,314 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:20:40,592 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:20:40,614 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:20:40,630 p=19815 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - unpack] ******************************
2023-11-26 21:21:06,319 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:21:06,490 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:21:06,584 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:21:06,936 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:21:07,701 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:21:07,713 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:21:07,737 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:21:07,992 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:21:08,249 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:21:08,259 p=19815 u=sina n=ansible | TASK [preparing-server : Lynis | Manual - remove tarball] **********************
2023-11-26 21:21:19,228 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:21:19,418 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:21:20,378 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:21:21,397 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:21:21,555 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:21:21,868 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:21:21,976 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:21:22,015 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:21:22,065 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:21:22,283 p=19815 u=sina n=ansible | RUNNING HANDLER [preparing-server : Restart iptables] **************************
2023-11-26 21:21:44,505 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:21:47,600 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:21:47,979 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:21:48,622 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:21:51,868 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:21:51,875 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:21:52,143 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:21:52,228 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:21:54,227 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:21:54,417 p=19815 u=sina n=ansible | PLAY [install docker] **********************************************************
2023-11-26 21:21:54,435 p=19815 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 21:22:20,392 p=19815 u=sina n=ansible | ok: [postgres]
2023-11-26 21:22:22,961 p=19815 u=sina n=ansible | ok: [obs]
2023-11-26 21:22:23,960 p=19815 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:22:24,115 p=19815 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:22:30,914 p=19815 u=sina n=ansible | ok: [git]
2023-11-26 21:22:31,473 p=19815 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:22:33,262 p=19815 u=sina n=ansible | ok: [production]
2023-11-26 21:22:33,388 p=19815 u=sina n=ansible | ok: [awx]
2023-11-26 21:22:33,727 p=19815 u=sina n=ansible | ok: [redis]
2023-11-26 21:22:33,921 p=19815 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-26 21:22:52,841 p=19815 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-26 21:22:52,875 p=19815 u=sina n=ansible | ok: [redis] => (item=ca-certificates)
2023-11-26 21:22:53,414 p=19815 u=sina n=ansible | ok: [obs] => (item=ca-certificates)
2023-11-26 21:22:53,909 p=19815 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-26 21:22:55,549 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=ca-certificates)
2023-11-26 21:22:55,734 p=19815 u=sina n=ansible | ok: [awx] => (item=ca-certificates)
2023-11-26 21:22:56,234 p=19815 u=sina n=ansible | ok: [production] => (item=ca-certificates)
2023-11-26 21:22:56,342 p=19815 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-26 21:23:00,006 p=19815 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-26 21:23:06,051 p=19815 u=sina n=ansible | changed: [postgres] => (item=gnupg-agent)
2023-11-26 21:23:11,686 p=19815 u=sina n=ansible | changed: [redis] => (item=gnupg-agent)
2023-11-26 21:23:13,133 p=19815 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-26 21:23:13,194 p=19815 u=sina n=ansible | changed: [pre-product] => (item=gnupg-agent)
2023-11-26 21:23:13,491 p=19815 u=sina n=ansible | changed: [git] => (item=gnupg-agent)
2023-11-26 21:23:16,154 p=19815 u=sina n=ansible | changed: [gitlab-runner] => (item=gnupg-agent)
2023-11-26 21:23:16,402 p=19815 u=sina n=ansible | changed: [obs] => (item=gnupg-agent)
2023-11-26 21:23:16,726 p=19815 u=sina n=ansible | ok: [redis] => (item=software-properties-common)
2023-11-26 21:23:17,589 p=19815 u=sina n=ansible | changed: [production] => (item=gnupg-agent)
2023-11-26 21:23:17,865 p=19815 u=sina n=ansible | changed: [bitmail] => (item=gnupg-agent)
2023-11-26 21:23:19,227 p=19815 u=sina n=ansible | changed: [awx] => (item=gnupg-agent)
2023-11-26 21:23:20,920 p=19815 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-26 21:23:21,207 p=19815 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-26 21:23:26,360 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=software-properties-common)
2023-11-26 21:23:27,489 p=19815 u=sina n=ansible | ok: [obs] => (item=software-properties-common)
2023-11-26 21:23:27,736 p=19815 u=sina n=ansible | ok: [production] => (item=software-properties-common)
2023-11-26 21:23:28,673 p=19815 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-26 21:23:29,444 p=19815 u=sina n=ansible | ok: [awx] => (item=software-properties-common)
2023-11-26 21:23:29,464 p=19815 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-26 21:23:49,506 p=19815 u=sina n=ansible | changed: [git] => (item=docker)
2023-11-26 21:23:50,146 p=19815 u=sina n=ansible | changed: [obs] => (item=docker)
2023-11-26 21:23:50,267 p=19815 u=sina n=ansible | changed: [production] => (item=docker)
2023-11-26 21:23:51,556 p=19815 u=sina n=ansible | changed: [postgres] => (item=docker)
2023-11-26 21:23:51,695 p=19815 u=sina n=ansible | changed: [pre-product] => (item=docker)
2023-11-26 21:23:51,799 p=19815 u=sina n=ansible | changed: [bitmail] => (item=docker)
2023-11-26 21:23:52,069 p=19815 u=sina n=ansible | changed: [redis] => (item=docker)
2023-11-26 21:23:52,379 p=19815 u=sina n=ansible | changed: [gitlab-runner] => (item=docker)
2023-11-26 21:23:57,417 p=19815 u=sina n=ansible | changed: [awx] => (item=docker)
2023-11-26 21:24:01,118 p=19815 u=sina n=ansible | changed: [git] => (item=docker-compose)
2023-11-26 21:24:12,362 p=19815 u=sina n=ansible | changed: [production] => (item=docker-compose)
2023-11-26 21:24:14,019 p=19815 u=sina n=ansible | changed: [obs] => (item=docker-compose)
2023-11-26 21:24:14,171 p=19815 u=sina n=ansible | changed: [pre-product] => (item=docker-compose)
2023-11-26 21:24:14,667 p=19815 u=sina n=ansible | changed: [gitlab-runner] => (item=docker-compose)
2023-11-26 21:24:15,161 p=19815 u=sina n=ansible | changed: [redis] => (item=docker-compose)
2023-11-26 21:24:15,298 p=19815 u=sina n=ansible | changed: [postgres] => (item=docker-compose)
2023-11-26 21:24:15,606 p=19815 u=sina n=ansible | changed: [bitmail] => (item=docker-compose)
2023-11-26 21:24:19,811 p=19815 u=sina n=ansible | changed: [awx] => (item=docker-compose)
2023-11-26 21:24:19,821 p=19815 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-26 21:24:35,204 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:24:35,306 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:24:35,475 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:24:35,612 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:24:35,955 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:24:36,145 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:24:36,249 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:24:36,409 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:24:36,597 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:24:36,608 p=19815 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-26 21:24:56,463 p=19815 u=sina n=ansible | changed: [pre-product]
2023-11-26 21:24:59,134 p=19815 u=sina n=ansible | changed: [redis]
2023-11-26 21:25:00,053 p=19815 u=sina n=ansible | changed: [production]
2023-11-26 21:25:00,991 p=19815 u=sina n=ansible | changed: [postgres]
2023-11-26 21:25:02,274 p=19815 u=sina n=ansible | changed: [gitlab-runner]
2023-11-26 21:25:03,189 p=19815 u=sina n=ansible | changed: [bitmail]
2023-11-26 21:25:03,733 p=19815 u=sina n=ansible | changed: [git]
2023-11-26 21:25:05,054 p=19815 u=sina n=ansible | changed: [obs]
2023-11-26 21:25:05,834 p=19815 u=sina n=ansible | changed: [awx]
2023-11-26 21:25:05,847 p=19815 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-26 21:30:10,119 p=19815 u=sina n=ansible | changed: [gitlab-runner] => (item=docker-ce)
2023-11-26 21:30:10,580 p=19815 u=sina n=ansible | changed: [pre-product] => (item=docker-ce)
2023-11-26 21:30:10,936 p=19815 u=sina n=ansible | changed: [postgres] => (item=docker-ce)
2023-11-26 21:30:12,038 p=19815 u=sina n=ansible | changed: [production] => (item=docker-ce)
2023-11-26 21:30:12,377 p=19815 u=sina n=ansible | changed: [git] => (item=docker-ce)
2023-11-26 21:30:13,920 p=19815 u=sina n=ansible | changed: [redis] => (item=docker-ce)
2023-11-26 21:30:18,345 p=19815 u=sina n=ansible | changed: [bitmail] => (item=docker-ce)
2023-11-26 21:30:26,727 p=19815 u=sina n=ansible | changed: [obs] => (item=docker-ce)
2023-11-26 21:30:32,005 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-ce-cli)
2023-11-26 21:30:36,692 p=19815 u=sina n=ansible | ok: [git] => (item=docker-ce-cli)
2023-11-26 21:30:36,741 p=19815 u=sina n=ansible | ok: [pre-product] => (item=docker-ce-cli)
2023-11-26 21:30:39,416 p=19815 u=sina n=ansible | ok: [production] => (item=docker-ce-cli)
2023-11-26 21:30:40,825 p=19815 u=sina n=ansible | ok: [postgres] => (item=docker-ce-cli)
2023-11-26 21:30:41,012 p=19815 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-26 21:30:41,411 p=19815 u=sina n=ansible | ok: [redis] => (item=docker-ce-cli)
2023-11-26 21:30:46,656 p=19815 u=sina n=ansible | ok: [obs] => (item=docker-ce-cli)
2023-11-26 21:30:51,146 p=19815 u=sina n=ansible | ok: [git] => (item=containerd.io)
2023-11-26 21:30:51,260 p=19815 u=sina n=ansible | ok: [pre-product] => (item=containerd.io)
2023-11-26 21:30:55,805 p=19815 u=sina n=ansible | ok: [gitlab-runner] => (item=containerd.io)
2023-11-26 21:30:59,168 p=19815 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-26 21:30:59,192 p=19815 u=sina n=ansible | ok: [production] => (item=containerd.io)
2023-11-26 21:30:59,853 p=19815 u=sina n=ansible | ok: [postgres] => (item=containerd.io)
2023-11-26 21:30:59,936 p=19815 u=sina n=ansible | ok: [redis] => (item=containerd.io)
2023-11-26 21:31:01,273 p=19815 u=sina n=ansible | ok: [obs] => (item=containerd.io)
2023-11-26 21:44:34,352 p=19815 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-26 21:46:07,210 p=28302 u=sina n=ansible | PLAY [install docker] **********************************************************
2023-11-26 21:46:07,229 p=28302 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 21:46:35,610 p=28302 u=sina n=ansible | ok: [git]
2023-11-26 21:46:36,988 p=28302 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:46:38,784 p=28302 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:46:41,691 p=28302 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 21:46:46,262 p=28302 u=sina n=ansible | ok: [redis]
2023-11-26 21:46:46,350 p=28302 u=sina n=ansible | ok: [postgres]
2023-11-26 21:46:46,351 p=28302 u=sina n=ansible | ok: [production]
2023-11-26 21:46:46,382 p=28302 u=sina n=ansible | ok: [obs]
2023-11-26 21:50:03,048 p=28302 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-26 21:50:05,787 p=28598 u=sina n=ansible | PLAY [install docker] **********************************************************
2023-11-26 21:50:05,809 p=28598 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-26 21:50:24,371 p=28598 u=sina n=ansible | ok: [bitmail]
2023-11-26 21:50:47,309 p=28598 u=sina n=ansible | ok: [git]
2023-11-26 21:50:48,791 p=28598 u=sina n=ansible | ok: [redis]
2023-11-26 21:50:49,443 p=28598 u=sina n=ansible | ok: [production]
2023-11-26 21:50:50,634 p=28598 u=sina n=ansible | ok: [pre-product]
2023-11-26 21:50:51,708 p=28598 u=sina n=ansible | ok: [obs]
2023-11-26 21:50:56,768 p=28598 u=sina n=ansible | ok: [postgres]
2023-11-26 21:51:01,409 p=28598 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 22:01:15,998 p=28598 u=sina n=ansible | ok: [awx]
2023-11-26 22:01:16,153 p=28598 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-26 22:01:28,998 p=28598 u=sina n=ansible | ok: [awx] => (item=ca-certificates)
2023-11-26 22:01:33,110 p=28598 u=sina n=ansible | ok: [redis] => (item=ca-certificates)
2023-11-26 22:01:34,537 p=28598 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-26 22:01:35,338 p=28598 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-26 22:01:35,441 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=ca-certificates)
2023-11-26 22:01:35,754 p=28598 u=sina n=ansible | ok: [obs] => (item=ca-certificates)
2023-11-26 22:01:36,871 p=28598 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-26 22:01:37,729 p=28598 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-26 22:01:39,038 p=28598 u=sina n=ansible | ok: [production] => (item=ca-certificates)
2023-11-26 22:01:39,633 p=28598 u=sina n=ansible | ok: [awx] => (item=gnupg-agent)
2023-11-26 22:01:43,242 p=28598 u=sina n=ansible | ok: [redis] => (item=gnupg-agent)
2023-11-26 22:01:49,834 p=28598 u=sina n=ansible | ok: [postgres] => (item=gnupg-agent)
2023-11-26 22:01:49,903 p=28598 u=sina n=ansible | ok: [obs] => (item=gnupg-agent)
2023-11-26 22:01:52,384 p=28598 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-26 22:01:53,017 p=28598 u=sina n=ansible | ok: [pre-product] => (item=gnupg-agent)
2023-11-26 22:01:53,627 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=gnupg-agent)
2023-11-26 22:01:54,779 p=28598 u=sina n=ansible | ok: [git] => (item=gnupg-agent)
2023-11-26 22:01:55,604 p=28598 u=sina n=ansible | ok: [production] => (item=gnupg-agent)
2023-11-26 22:01:56,057 p=28598 u=sina n=ansible | ok: [redis] => (item=software-properties-common)
2023-11-26 22:01:56,981 p=28598 u=sina n=ansible | ok: [awx] => (item=software-properties-common)
2023-11-26 22:01:59,552 p=28598 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-26 22:02:02,858 p=28598 u=sina n=ansible | ok: [obs] => (item=software-properties-common)
2023-11-26 22:02:05,971 p=28598 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-26 22:02:06,139 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=software-properties-common)
2023-11-26 22:02:06,315 p=28598 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-26 22:02:06,797 p=28598 u=sina n=ansible | ok: [production] => (item=software-properties-common)
2023-11-26 22:02:07,144 p=28598 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-26 22:02:07,160 p=28598 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-26 22:02:20,047 p=28598 u=sina n=ansible | ok: [git] => (item=docker)
2023-11-26 22:02:21,186 p=28598 u=sina n=ansible | ok: [pre-product] => (item=docker)
2023-11-26 22:02:21,413 p=28598 u=sina n=ansible | ok: [obs] => (item=docker)
2023-11-26 22:02:24,212 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=docker)
2023-11-26 22:02:24,747 p=28598 u=sina n=ansible | ok: [redis] => (item=docker)
2023-11-26 22:02:24,955 p=28598 u=sina n=ansible | ok: [production] => (item=docker)
2023-11-26 22:02:25,268 p=28598 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-26 22:02:26,441 p=28598 u=sina n=ansible | ok: [awx] => (item=docker)
2023-11-26 22:02:27,455 p=28598 u=sina n=ansible | ok: [postgres] => (item=docker)
2023-11-26 22:02:32,595 p=28598 u=sina n=ansible | ok: [obs] => (item=docker-compose)
2023-11-26 22:02:36,926 p=28598 u=sina n=ansible | ok: [git] => (item=docker-compose)
2023-11-26 22:02:40,226 p=28598 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-26 22:02:40,377 p=28598 u=sina n=ansible | ok: [pre-product] => (item=docker-compose)
2023-11-26 22:02:40,601 p=28598 u=sina n=ansible | ok: [production] => (item=docker-compose)
2023-11-26 22:02:40,719 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-compose)
2023-11-26 22:02:41,164 p=28598 u=sina n=ansible | ok: [redis] => (item=docker-compose)
2023-11-26 22:02:41,413 p=28598 u=sina n=ansible | ok: [postgres] => (item=docker-compose)
2023-11-26 22:02:41,705 p=28598 u=sina n=ansible | ok: [awx] => (item=docker-compose)
2023-11-26 22:02:41,718 p=28598 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-26 22:02:55,235 p=28598 u=sina n=ansible | ok: [obs]
2023-11-26 22:02:56,900 p=28598 u=sina n=ansible | ok: [postgres]
2023-11-26 22:02:57,456 p=28598 u=sina n=ansible | ok: [awx]
2023-11-26 22:02:57,541 p=28598 u=sina n=ansible | ok: [pre-product]
2023-11-26 22:02:57,562 p=28598 u=sina n=ansible | ok: [bitmail]
2023-11-26 22:02:57,707 p=28598 u=sina n=ansible | ok: [redis]
2023-11-26 22:02:57,826 p=28598 u=sina n=ansible | ok: [production]
2023-11-26 22:02:57,840 p=28598 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 22:02:57,851 p=28598 u=sina n=ansible | ok: [git]
2023-11-26 22:02:57,874 p=28598 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-26 22:03:12,206 p=28598 u=sina n=ansible | ok: [bitmail]
2023-11-26 22:03:12,278 p=28598 u=sina n=ansible | ok: [redis]
2023-11-26 22:03:12,476 p=28598 u=sina n=ansible | ok: [postgres]
2023-11-26 22:03:12,772 p=28598 u=sina n=ansible | ok: [obs]
2023-11-26 22:03:12,963 p=28598 u=sina n=ansible | ok: [production]
2023-11-26 22:03:13,028 p=28598 u=sina n=ansible | ok: [git]
2023-11-26 22:03:13,114 p=28598 u=sina n=ansible | ok: [pre-product]
2023-11-26 22:03:13,323 p=28598 u=sina n=ansible | ok: [gitlab-runner]
2023-11-26 22:03:14,287 p=28598 u=sina n=ansible | ok: [awx]
2023-11-26 22:03:14,313 p=28598 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-26 22:03:32,360 p=28598 u=sina n=ansible | ok: [pre-product] => (item=docker-ce)
2023-11-26 22:03:32,543 p=28598 u=sina n=ansible | ok: [obs] => (item=docker-ce)
2023-11-26 22:03:32,590 p=28598 u=sina n=ansible | ok: [postgres] => (item=docker-ce)
2023-11-26 22:03:32,854 p=28598 u=sina n=ansible | ok: [git] => (item=docker-ce)
2023-11-26 22:03:32,913 p=28598 u=sina n=ansible | ok: [production] => (item=docker-ce)
2023-11-26 22:03:33,565 p=28598 u=sina n=ansible | ok: [bitmail] => (item=docker-ce)
2023-11-26 22:03:33,611 p=28598 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-ce)
2023-11-26 22:03:33,967 p=28598 u=sina n=ansible | ok: [awx] => (item=docker-ce)
2023-11-26 22:03:34,399 p=28598 u=sina n=ansible | ok: [redis] => (item=docker-ce)
2023-11-26 22:03:40,014 p=28598 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-27 14:35:38,631 p=47829 u=sina n=ansible | PLAY [install docker] **********************************************************
2023-11-27 14:35:38,661 p=47829 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 14:36:08,054 p=47829 u=sina n=ansible | ok: [git]
2023-11-27 14:36:08,433 p=47829 u=sina n=ansible | ok: [pre-product]
2023-11-27 14:36:08,848 p=47829 u=sina n=ansible | ok: [gitlab-runner]
2023-11-27 14:36:09,123 p=47829 u=sina n=ansible | ok: [awx]
2023-11-27 14:36:11,104 p=47829 u=sina n=ansible | ok: [bitmail]
2023-11-27 14:36:11,493 p=47829 u=sina n=ansible | ok: [obs]
2023-11-27 14:36:11,741 p=47829 u=sina n=ansible | ok: [redis]
2023-11-27 14:36:11,747 p=47829 u=sina n=ansible | ok: [production]
2023-11-27 14:36:11,799 p=47829 u=sina n=ansible | ok: [postgres]
2023-11-27 14:36:12,054 p=47829 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-27 14:36:53,238 p=47829 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-27 14:36:59,422 p=47829 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-27 14:37:00,963 p=47829 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-27 14:37:02,640 p=47829 u=sina n=ansible | ok: [gitlab-runner] => (item=ca-certificates)
2023-11-27 14:37:11,575 p=47829 u=sina n=ansible | ok: [git] => (item=gnupg-agent)
2023-11-27 14:37:13,760 p=47829 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-27 14:37:15,162 p=47829 u=sina n=ansible | ok: [postgres] => (item=gnupg-agent)
2023-11-27 14:37:17,988 p=47829 u=sina n=ansible | ok: [gitlab-runner] => (item=gnupg-agent)
2023-11-27 14:37:19,898 p=47829 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-27 14:37:23,008 p=47829 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-27 14:37:31,345 p=47829 u=sina n=ansible | ok: [redis] => (item=ca-certificates)
2023-11-27 14:37:34,631 p=47829 u=sina n=ansible | ok: [obs] => (item=ca-certificates)
2023-11-27 14:37:41,058 p=47829 u=sina n=ansible | ok: [redis] => (item=gnupg-agent)
2023-11-27 14:37:42,078 p=47829 u=sina n=ansible | ok: [pre-product] => (item=gnupg-agent)
2023-11-27 14:37:42,606 p=47829 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-27 14:37:49,322 p=47829 u=sina n=ansible | ok: [gitlab-runner] => (item=software-properties-common)
2023-11-27 14:37:54,254 p=47829 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-27 14:37:55,287 p=47829 u=sina n=ansible | ok: [redis] => (item=software-properties-common)
2023-11-27 14:38:03,061 p=47829 u=sina n=ansible | ok: [awx] => (item=ca-certificates)
2023-11-27 14:38:10,741 p=47829 u=sina n=ansible | ok: [production] => (item=ca-certificates)
2023-11-27 14:38:13,816 p=47829 u=sina n=ansible | ok: [awx] => (item=gnupg-agent)
2023-11-27 14:38:21,720 p=47829 u=sina n=ansible | ok: [awx] => (item=software-properties-common)
2023-11-27 14:38:25,303 p=47829 u=sina n=ansible | failed: [obs] (item=gnupg-agent) => {"ansible_loop_var": "item", "changed": false, "item": "gnupg-agent", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.90 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-27 14:38:28,630 p=47829 u=sina n=ansible | ok: [production] => (item=gnupg-agent)
2023-11-27 14:38:36,537 p=47829 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-27 14:39:12,675 p=47829 u=sina n=ansible | failed: [production] (item=software-properties-common) => {"ansible_loop_var": "item", "changed": false, "item": "software-properties-common", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.90 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-27 14:39:17,830 p=47829 u=sina n=ansible | failed: [obs] (item=software-properties-common) => {"ansible_loop_var": "item", "changed": false, "item": "software-properties-common", "msg": "Failed to update apt cache: E:Failed to fetch https://download.docker.com/linux/ubuntu/dists/bionic/InRelease  403  Forbidden [IP: 65.9.55.127 443], E:The repository 'https://download.docker.com/linux/ubuntu bionic InRelease' is no longer signed."}
2023-11-27 14:39:17,838 p=47829 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-27 14:39:28,751 p=47829 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-27 14:39:29,733 p=47829 u=sina n=ansible | ok: [awx] => (item=docker)
2023-11-27 14:39:30,213 p=47829 u=sina n=ansible | ok: [postgres] => (item=docker)
2023-11-27 14:39:32,955 p=47829 u=sina n=ansible | ok: [pre-product] => (item=docker)
2023-11-27 14:39:33,127 p=47829 u=sina n=ansible | ok: [redis] => (item=docker)
2023-11-27 14:39:34,666 p=47829 u=sina n=ansible | ok: [gitlab-runner] => (item=docker)
2023-11-27 14:39:38,527 p=47829 u=sina n=ansible | ok: [git] => (item=docker)
2023-11-27 14:39:40,245 p=47829 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-27 14:39:42,985 p=47829 u=sina n=ansible | ok: [awx] => (item=docker-compose)
2023-11-27 14:39:43,004 p=47829 u=sina n=ansible | ok: [postgres] => (item=docker-compose)
2023-11-27 14:39:44,461 p=47829 u=sina n=ansible | ok: [pre-product] => (item=docker-compose)
2023-11-27 14:39:45,153 p=47829 u=sina n=ansible | ok: [redis] => (item=docker-compose)
2023-11-27 14:39:45,396 p=47829 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-compose)
2023-11-27 14:39:46,658 p=47829 u=sina n=ansible | ok: [git] => (item=docker-compose)
2023-11-27 14:39:46,669 p=47829 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-27 14:39:50,216 p=47829 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-27 14:43:11,041 p=94061 u=sina n=ansible | PLAY [install docker] **********************************************************
2023-11-27 14:43:11,059 p=94061 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 14:43:42,393 p=94061 u=sina n=ansible | ok: [redis]
2023-11-27 14:43:44,016 p=94061 u=sina n=ansible | ok: [pre-product]
2023-11-27 14:43:52,234 p=94061 u=sina n=ansible | ok: [awx]
2023-11-27 14:43:53,350 p=94061 u=sina n=ansible | ok: [git]
2023-11-27 14:43:54,533 p=94061 u=sina n=ansible | ok: [obs]
2023-11-27 14:43:54,803 p=94061 u=sina n=ansible | ok: [postgres]
2023-11-27 14:43:55,650 p=94061 u=sina n=ansible | ok: [production]
2023-11-27 14:43:56,381 p=94061 u=sina n=ansible | ok: [gitlab-runner]
2023-11-27 14:43:57,131 p=94061 u=sina n=ansible | ok: [bitmail]
2023-11-27 14:43:57,261 p=94061 u=sina n=ansible | TASK [docker-installation : install dependency] ********************************
2023-11-27 14:44:12,963 p=94061 u=sina n=ansible | ok: [redis] => (item=ca-certificates)
2023-11-27 14:44:15,421 p=94061 u=sina n=ansible | ok: [pre-product] => (item=ca-certificates)
2023-11-27 14:44:16,199 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=ca-certificates)
2023-11-27 14:44:17,311 p=94061 u=sina n=ansible | ok: [postgres] => (item=ca-certificates)
2023-11-27 14:44:17,313 p=94061 u=sina n=ansible | ok: [bitmail] => (item=ca-certificates)
2023-11-27 14:44:17,341 p=94061 u=sina n=ansible | ok: [production] => (item=ca-certificates)
2023-11-27 14:44:18,634 p=94061 u=sina n=ansible | ok: [obs] => (item=ca-certificates)
2023-11-27 14:44:18,785 p=94061 u=sina n=ansible | ok: [awx] => (item=ca-certificates)
2023-11-27 14:44:18,851 p=94061 u=sina n=ansible | ok: [redis] => (item=gnupg-agent)
2023-11-27 14:44:19,346 p=94061 u=sina n=ansible | ok: [git] => (item=ca-certificates)
2023-11-27 14:44:22,711 p=94061 u=sina n=ansible | ok: [pre-product] => (item=gnupg-agent)
2023-11-27 14:44:28,638 p=94061 u=sina n=ansible | ok: [redis] => (item=software-properties-common)
2023-11-27 14:44:34,242 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=gnupg-agent)
2023-11-27 14:44:35,065 p=94061 u=sina n=ansible | ok: [pre-product] => (item=software-properties-common)
2023-11-27 14:44:35,715 p=94061 u=sina n=ansible | ok: [production] => (item=gnupg-agent)
2023-11-27 14:44:36,081 p=94061 u=sina n=ansible | ok: [bitmail] => (item=gnupg-agent)
2023-11-27 14:44:36,165 p=94061 u=sina n=ansible | ok: [postgres] => (item=gnupg-agent)
2023-11-27 14:44:37,350 p=94061 u=sina n=ansible | ok: [obs] => (item=gnupg-agent)
2023-11-27 14:44:37,470 p=94061 u=sina n=ansible | ok: [awx] => (item=gnupg-agent)
2023-11-27 14:44:38,648 p=94061 u=sina n=ansible | ok: [git] => (item=gnupg-agent)
2023-11-27 14:44:40,667 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=software-properties-common)
2023-11-27 14:44:47,912 p=94061 u=sina n=ansible | ok: [postgres] => (item=software-properties-common)
2023-11-27 14:44:50,373 p=94061 u=sina n=ansible | ok: [awx] => (item=software-properties-common)
2023-11-27 14:44:51,599 p=94061 u=sina n=ansible | ok: [bitmail] => (item=software-properties-common)
2023-11-27 14:44:51,815 p=94061 u=sina n=ansible | ok: [git] => (item=software-properties-common)
2023-11-27 14:44:53,359 p=94061 u=sina n=ansible | ok: [obs] => (item=software-properties-common)
2023-11-27 14:44:57,211 p=94061 u=sina n=ansible | ok: [production] => (item=software-properties-common)
2023-11-27 14:44:57,220 p=94061 u=sina n=ansible | TASK [docker-installation : insatll apt docker - apt docker-compose] ***********
2023-11-27 14:45:11,109 p=94061 u=sina n=ansible | ok: [production] => (item=docker)
2023-11-27 14:45:14,353 p=94061 u=sina n=ansible | ok: [postgres] => (item=docker)
2023-11-27 14:45:14,456 p=94061 u=sina n=ansible | ok: [awx] => (item=docker)
2023-11-27 14:45:15,909 p=94061 u=sina n=ansible | ok: [obs] => (item=docker)
2023-11-27 14:45:16,323 p=94061 u=sina n=ansible | ok: [bitmail] => (item=docker)
2023-11-27 14:45:16,478 p=94061 u=sina n=ansible | ok: [git] => (item=docker)
2023-11-27 14:45:16,610 p=94061 u=sina n=ansible | ok: [redis] => (item=docker)
2023-11-27 14:45:17,004 p=94061 u=sina n=ansible | ok: [pre-product] => (item=docker)
2023-11-27 14:45:18,431 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=docker)
2023-11-27 14:45:28,414 p=94061 u=sina n=ansible | ok: [production] => (item=docker-compose)
2023-11-27 14:45:29,717 p=94061 u=sina n=ansible | ok: [postgres] => (item=docker-compose)
2023-11-27 14:45:30,754 p=94061 u=sina n=ansible | ok: [redis] => (item=docker-compose)
2023-11-27 14:45:32,007 p=94061 u=sina n=ansible | ok: [bitmail] => (item=docker-compose)
2023-11-27 14:45:32,960 p=94061 u=sina n=ansible | ok: [obs] => (item=docker-compose)
2023-11-27 14:45:34,816 p=94061 u=sina n=ansible | ok: [git] => (item=docker-compose)
2023-11-27 14:45:35,432 p=94061 u=sina n=ansible | ok: [pre-product] => (item=docker-compose)
2023-11-27 14:45:35,515 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-compose)
2023-11-27 14:45:36,808 p=94061 u=sina n=ansible | ok: [awx] => (item=docker-compose)
2023-11-27 14:45:36,821 p=94061 u=sina n=ansible | TASK [docker-installation : give GPG key] **************************************
2023-11-27 14:45:49,432 p=94061 u=sina n=ansible | ok: [redis]
2023-11-27 14:45:51,424 p=94061 u=sina n=ansible | ok: [pre-product]
2023-11-27 14:45:51,930 p=94061 u=sina n=ansible | ok: [git]
2023-11-27 14:45:53,756 p=94061 u=sina n=ansible | ok: [obs]
2023-11-27 14:45:53,818 p=94061 u=sina n=ansible | ok: [awx]
2023-11-27 14:45:54,008 p=94061 u=sina n=ansible | ok: [bitmail]
2023-11-27 14:45:55,374 p=94061 u=sina n=ansible | ok: [gitlab-runner]
2023-11-27 14:45:55,375 p=94061 u=sina n=ansible | ok: [postgres]
2023-11-27 14:45:55,483 p=94061 u=sina n=ansible | ok: [production]
2023-11-27 14:45:55,496 p=94061 u=sina n=ansible | TASK [docker-installation : add docker repo] ***********************************
2023-11-27 14:46:09,418 p=94061 u=sina n=ansible | ok: [redis]
2023-11-27 14:46:09,964 p=94061 u=sina n=ansible | ok: [obs]
2023-11-27 14:46:10,293 p=94061 u=sina n=ansible | ok: [postgres]
2023-11-27 14:46:10,901 p=94061 u=sina n=ansible | ok: [bitmail]
2023-11-27 14:46:11,375 p=94061 u=sina n=ansible | ok: [production]
2023-11-27 14:46:11,556 p=94061 u=sina n=ansible | ok: [gitlab-runner]
2023-11-27 14:46:11,940 p=94061 u=sina n=ansible | ok: [git]
2023-11-27 14:46:12,197 p=94061 u=sina n=ansible | ok: [pre-product]
2023-11-27 14:46:12,691 p=94061 u=sina n=ansible | ok: [awx]
2023-11-27 14:46:12,699 p=94061 u=sina n=ansible | TASK [docker-installation : install docker] ************************************
2023-11-27 14:46:29,681 p=94061 u=sina n=ansible | ok: [redis] => (item=docker-ce)
2023-11-27 14:46:30,577 p=94061 u=sina n=ansible | ok: [pre-product] => (item=docker-ce)
2023-11-27 14:46:32,879 p=94061 u=sina n=ansible | ok: [production] => (item=docker-ce)
2023-11-27 14:46:32,931 p=94061 u=sina n=ansible | ok: [postgres] => (item=docker-ce)
2023-11-27 14:46:32,971 p=94061 u=sina n=ansible | ok: [git] => (item=docker-ce)
2023-11-27 14:46:34,020 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-ce)
2023-11-27 14:46:34,798 p=94061 u=sina n=ansible | ok: [bitmail] => (item=docker-ce)
2023-11-27 14:46:34,983 p=94061 u=sina n=ansible | ok: [obs] => (item=docker-ce)
2023-11-27 14:46:36,413 p=94061 u=sina n=ansible | ok: [redis] => (item=docker-ce-cli)
2023-11-27 14:46:41,551 p=94061 u=sina n=ansible | ok: [awx] => (item=docker-ce)
2023-11-27 14:46:42,673 p=94061 u=sina n=ansible | ok: [pre-product] => (item=docker-ce-cli)
2023-11-27 14:46:49,220 p=94061 u=sina n=ansible | ok: [production] => (item=docker-ce-cli)
2023-11-27 14:46:50,293 p=94061 u=sina n=ansible | ok: [redis] => (item=containerd.io)
2023-11-27 14:46:50,500 p=94061 u=sina n=ansible | ok: [postgres] => (item=docker-ce-cli)
2023-11-27 14:46:51,003 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=docker-ce-cli)
2023-11-27 14:46:51,792 p=94061 u=sina n=ansible | ok: [git] => (item=docker-ce-cli)
2023-11-27 14:46:53,781 p=94061 u=sina n=ansible | ok: [obs] => (item=docker-ce-cli)
2023-11-27 14:46:54,767 p=94061 u=sina n=ansible | ok: [pre-product] => (item=containerd.io)
2023-11-27 14:46:54,771 p=94061 u=sina n=ansible | ok: [bitmail] => (item=docker-ce-cli)
2023-11-27 14:46:57,277 p=94061 u=sina n=ansible | ok: [awx] => (item=docker-ce-cli)
2023-11-27 14:47:01,259 p=94061 u=sina n=ansible | ok: [production] => (item=containerd.io)
2023-11-27 14:47:03,402 p=94061 u=sina n=ansible | ok: [postgres] => (item=containerd.io)
2023-11-27 14:47:07,106 p=94061 u=sina n=ansible | ok: [obs] => (item=containerd.io)
2023-11-27 14:47:09,153 p=94061 u=sina n=ansible | ok: [git] => (item=containerd.io)
2023-11-27 14:47:09,161 p=94061 u=sina n=ansible | ok: [gitlab-runner] => (item=containerd.io)
2023-11-27 14:47:10,494 p=94061 u=sina n=ansible | ok: [bitmail] => (item=containerd.io)
2023-11-27 14:47:11,919 p=94061 u=sina n=ansible | ok: [awx] => (item=containerd.io)
2023-11-27 14:47:11,930 p=94061 u=sina n=ansible | TASK [docker-installation : start and enable docker] ***************************
2023-11-27 14:47:34,037 p=94061 u=sina n=ansible | ok: [redis]
2023-11-27 14:47:36,166 p=94061 u=sina n=ansible | ok: [postgres]
2023-11-27 14:47:37,073 p=94061 u=sina n=ansible | ok: [bitmail]
2023-11-27 14:47:39,604 p=94061 u=sina n=ansible | ok: [pre-product]
2023-11-27 14:47:39,824 p=94061 u=sina n=ansible | ok: [obs]
2023-11-27 14:47:40,469 p=94061 u=sina n=ansible | ok: [production]
2023-11-27 14:47:40,490 p=94061 u=sina n=ansible | ok: [git]
2023-11-27 14:47:40,545 p=94061 u=sina n=ansible | ok: [awx]
2023-11-27 14:47:41,120 p=94061 u=sina n=ansible | ok: [gitlab-runner]
2023-11-27 14:47:41,128 p=94061 u=sina n=ansible | TASK [docker-installation : Make docker configuration file.] *******************
2023-11-27 14:47:58,563 p=94061 u=sina n=ansible | changed: [redis]
2023-11-27 14:48:01,498 p=94061 u=sina n=ansible | changed: [production]
2023-11-27 14:48:04,305 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:48:04,638 p=94061 u=sina n=ansible | changed: [obs]
2023-11-27 14:48:04,843 p=94061 u=sina n=ansible | changed: [postgres]
2023-11-27 14:48:04,918 p=94061 u=sina n=ansible | changed: [pre-product]
2023-11-27 14:48:05,694 p=94061 u=sina n=ansible | changed: [git]
2023-11-27 14:48:05,819 p=94061 u=sina n=ansible | changed: [gitlab-runner]
2023-11-27 14:48:06,047 p=94061 u=sina n=ansible | changed: [bitmail]
2023-11-27 14:48:06,055 p=94061 u=sina n=ansible | TASK [docker-installation : Restart service docker and daemon-reload to pick up config changes] ***
2023-11-27 14:48:31,858 p=94061 u=sina n=ansible | changed: [redis]
2023-11-27 14:48:34,374 p=94061 u=sina n=ansible | changed: [production]
2023-11-27 14:48:34,767 p=94061 u=sina n=ansible | changed: [git]
2023-11-27 14:48:35,807 p=94061 u=sina n=ansible | changed: [bitmail]
2023-11-27 14:48:35,928 p=94061 u=sina n=ansible | changed: [obs]
2023-11-27 14:48:36,948 p=94061 u=sina n=ansible | changed: [pre-product]
2023-11-27 14:48:36,972 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:48:37,970 p=94061 u=sina n=ansible | changed: [gitlab-runner]
2023-11-27 14:48:39,893 p=94061 u=sina n=ansible | changed: [postgres]
2023-11-27 14:48:40,088 p=94061 u=sina n=ansible | RUNNING HANDLER [docker-installation : restart docker] *************************
2023-11-27 14:49:06,140 p=94061 u=sina n=ansible | changed: [production]
2023-11-27 14:49:08,369 p=94061 u=sina n=ansible | changed: [bitmail]
2023-11-27 14:49:08,426 p=94061 u=sina n=ansible | changed: [redis]
2023-11-27 14:49:08,955 p=94061 u=sina n=ansible | changed: [pre-product]
2023-11-27 14:49:09,130 p=94061 u=sina n=ansible | changed: [obs]
2023-11-27 14:49:10,769 p=94061 u=sina n=ansible | changed: [git]
2023-11-27 14:49:11,520 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:49:12,414 p=94061 u=sina n=ansible | changed: [postgres]
2023-11-27 14:49:13,390 p=94061 u=sina n=ansible | changed: [gitlab-runner]
2023-11-27 14:49:13,520 p=94061 u=sina n=ansible | PLAY [deploy awx stack] ********************************************************
2023-11-27 14:49:13,550 p=94061 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 14:49:26,904 p=94061 u=sina n=ansible | ok: [awx]
2023-11-27 14:49:26,928 p=94061 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-27 14:49:31,634 p=94061 u=sina n=ansible | changed: [awx] => (item=services)
2023-11-27 14:49:31,645 p=94061 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-27 14:49:34,888 p=94061 u=sina n=ansible | changed: [awx] => (item=traefik)
2023-11-27 14:49:34,897 p=94061 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-27 14:49:44,878 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:49:44,887 p=94061 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-27 14:49:48,551 p=94061 u=sina n=ansible | changed: [awx] => (item=traefik/traefik)
2023-11-27 14:49:48,561 p=94061 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-27 14:49:56,117 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:49:56,126 p=94061 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-27 14:50:03,517 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:50:03,526 p=94061 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-27 14:50:12,226 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:50:12,236 p=94061 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-27 14:50:17,754 p=94061 u=sina n=ansible | changed: [awx] => (item=app_net)
2023-11-27 14:50:22,163 p=94061 u=sina n=ansible | changed: [awx] => (item=web_net)
2023-11-27 14:50:22,175 p=94061 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-27 14:51:15,533 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:51:15,554 p=94061 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-27 14:51:18,394 p=94061 u=sina n=ansible | ok: [awx] => (item=services)
2023-11-27 14:51:18,404 p=94061 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-27 14:51:32,684 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:51:32,693 p=94061 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-27 14:51:41,578 p=94061 u=sina n=ansible | changed: [awx] => (item=inventory)
2023-11-27 14:51:41,587 p=94061 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-27 14:51:47,437 p=94061 u=sina n=ansible | changed: [awx] => (item=docker-compose.yml.j2)
2023-11-27 14:51:47,448 p=94061 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-27 14:51:54,988 p=94061 u=sina n=ansible | changed: [awx]
2023-11-27 14:51:54,998 p=94061 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-27 14:51:57,768 p=94061 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": false, "cmd": "ansible-playbook -i inventory install.yml", "msg": "[Errno 2] No such file or directory: b'ansible-playbook'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2023-11-27 14:51:57,770 p=94061 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-27 14:51:57,770 p=94061 u=sina n=ansible | awx                        : ok=25   changed=16   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,770 p=94061 u=sina n=ansible | bitmail                    : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,770 p=94061 u=sina n=ansible | git                        : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | gitlab-runner              : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | obs                        : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | postgres                   : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | pre-product                : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | production                 : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:51:57,771 p=94061 u=sina n=ansible | redis                      : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-11-27 14:54:40,702 p=95787 u=sina n=ansible | PLAY [deploy awx stack] ********************************************************
2023-11-27 14:54:40,729 p=95787 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 14:54:49,352 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:54:49,389 p=95787 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-27 14:54:51,934 p=95787 u=sina n=ansible | ok: [awx] => (item=services)
2023-11-27 14:54:51,954 p=95787 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-27 14:54:54,372 p=95787 u=sina n=ansible | ok: [awx] => (item=traefik)
2023-11-27 14:54:54,388 p=95787 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-27 14:55:00,448 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:55:00,458 p=95787 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-27 14:55:06,158 p=95787 u=sina n=ansible | ok: [awx] => (item=traefik/traefik)
2023-11-27 14:55:06,182 p=95787 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-27 14:55:12,837 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:55:12,852 p=95787 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-27 14:55:17,623 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:55:17,640 p=95787 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-27 14:55:29,328 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:55:29,338 p=95787 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-27 14:55:33,422 p=95787 u=sina n=ansible | ok: [awx] => (item=app_net)
2023-11-27 14:55:36,906 p=95787 u=sina n=ansible | ok: [awx] => (item=web_net)
2023-11-27 14:55:36,917 p=95787 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-27 14:55:40,780 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:55:40,807 p=95787 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-27 14:55:44,502 p=95787 u=sina n=ansible | ok: [awx] => (item=services)
2023-11-27 14:55:44,514 p=95787 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-27 14:56:01,539 p=95787 u=sina n=ansible | changed: [awx]
2023-11-27 14:56:01,560 p=95787 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-27 14:56:11,947 p=95787 u=sina n=ansible | changed: [awx] => (item=inventory)
2023-11-27 14:56:11,973 p=95787 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-27 14:56:20,589 p=95787 u=sina n=ansible | changed: [awx] => (item=docker-compose.yml.j2)
2023-11-27 14:56:20,600 p=95787 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-27 14:56:27,740 p=95787 u=sina n=ansible | ok: [awx]
2023-11-27 14:56:27,751 p=95787 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-27 14:56:31,895 p=95787 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": false, "cmd": "ansible-playbook -i inventory install.yml", "msg": "[Errno 2] No such file or directory: b'ansible-playbook'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2023-11-27 14:56:31,898 p=95787 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-27 14:56:31,898 p=95787 u=sina n=ansible | awx                        : ok=15   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-27 15:03:43,609 p=96287 u=sina n=ansible | PLAY [deploy awx stack] ********************************************************
2023-11-27 15:03:43,637 p=96287 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 15:03:52,250 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:03:52,279 p=96287 u=sina n=ansible | TASK [reverse-proxy : create /opt/srevices dir] ********************************
2023-11-27 15:03:54,989 p=96287 u=sina n=ansible | ok: [awx] => (item=services)
2023-11-27 15:03:55,011 p=96287 u=sina n=ansible | TASK [reverse-proxy : create files] ********************************************
2023-11-27 15:03:57,351 p=96287 u=sina n=ansible | ok: [awx] => (item=traefik)
2023-11-27 15:03:57,370 p=96287 u=sina n=ansible | TASK [reverse-proxy : copy traefik compose file to host] ***********************
2023-11-27 15:04:01,958 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:04:01,979 p=96287 u=sina n=ansible | TASK [reverse-proxy : create sub dir] ******************************************
2023-11-27 15:04:04,512 p=96287 u=sina n=ansible | ok: [awx] => (item=traefik/traefik)
2023-11-27 15:04:04,533 p=96287 u=sina n=ansible | TASK [reverse-proxy : copy traefik conf] ***************************************
2023-11-27 15:04:11,589 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:04:11,608 p=96287 u=sina n=ansible | TASK [reverse-proxy : copy traefik .env] ***************************************
2023-11-27 15:04:15,951 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:04:15,972 p=96287 u=sina n=ansible | TASK [reverse-proxy : Create a sub.archidev.ir A record to point to host] ******
2023-11-27 15:04:22,058 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:04:22,070 p=96287 u=sina n=ansible | TASK [reverse-proxy : create network] ******************************************
2023-11-27 15:04:25,927 p=96287 u=sina n=ansible | ok: [awx] => (item=app_net)
2023-11-27 15:04:29,187 p=96287 u=sina n=ansible | ok: [awx] => (item=web_net)
2023-11-27 15:04:29,200 p=96287 u=sina n=ansible | TASK [reverse-proxy : deploy traefik Compose stack] ****************************
2023-11-27 15:04:32,233 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:04:32,254 p=96287 u=sina n=ansible | TASK [awx : create /opt/services dir] ******************************************
2023-11-27 15:04:34,595 p=96287 u=sina n=ansible | ok: [awx] => (item=services)
2023-11-27 15:04:34,605 p=96287 u=sina n=ansible | TASK [awx : Unarchive a file that needs to be downloaded (added in 2.0)] *******
2023-11-27 15:04:47,759 p=96287 u=sina n=ansible | changed: [awx]
2023-11-27 15:04:47,769 p=96287 u=sina n=ansible | TASK [awx : copy inventory file to host] ***************************************
2023-11-27 15:04:55,104 p=96287 u=sina n=ansible | changed: [awx] => (item=inventory)
2023-11-27 15:04:55,116 p=96287 u=sina n=ansible | TASK [awx : copy docker compose file to host] **********************************
2023-11-27 15:05:00,183 p=96287 u=sina n=ansible | changed: [awx] => (item=docker-compose.yml.j2)
2023-11-27 15:05:00,194 p=96287 u=sina n=ansible | TASK [awx : Create a awx.archidev.ir A record to point to host] ****************
2023-11-27 15:05:07,489 p=96287 u=sina n=ansible | ok: [awx]
2023-11-27 15:05:07,499 p=96287 u=sina n=ansible | TASK [awx : run docker-compose] ************************************************
2023-11-27 15:05:10,800 p=96287 u=sina n=ansible | fatal: [awx]: FAILED! => {"changed": true, "cmd": ["ansible-playbook", "-i", "inventory", "install.yml"], "delta": "0:00:00.962590", "end": "2023-11-27 15:05:10.658120", "msg": "non-zero return code", "rc": 4, "start": "2023-11-27 15:05:09.695530", "stderr": "ERROR! couldn't resolve module/action 'docker_login'. This often indicates a misspelling, missing collection, or incorrect module path.\n\nThe error appears to be in '/opt/services/awx-17.1.0/installer/roles/image_push/tasks/main.yml': line 2, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n---\n- name: Authenticate with Docker registry if registry password given\n  ^ here", "stderr_lines": ["ERROR! couldn't resolve module/action 'docker_login'. This often indicates a misspelling, missing collection, or incorrect module path.", "", "The error appears to be in '/opt/services/awx-17.1.0/installer/roles/image_push/tasks/main.yml': line 2, column 3, but may", "be elsewhere in the file depending on the exact syntax problem.", "", "The offending line appears to be:", "", "---", "- name: Authenticate with Docker registry if registry password given", "  ^ here"], "stdout": "", "stdout_lines": []}
2023-11-27 15:05:10,802 p=96287 u=sina n=ansible | PLAY RECAP *********************************************************************
2023-11-27 15:05:10,803 p=96287 u=sina n=ansible | awx                        : ok=15   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-11-27 15:06:00,103 p=96579 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-27 15:06:00,128 p=96579 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 15:06:10,329 p=96579 u=sina n=ansible | ok: [obs]
2023-11-27 15:06:10,356 p=96579 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-27 15:06:13,005 p=96579 u=sina n=ansible | changed: [obs] => (item=services)
2023-11-27 15:06:13,015 p=96579 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-27 15:06:15,498 p=96579 u=sina n=ansible | changed: [obs] => (item=traefik)
2023-11-27 15:06:18,062 p=96579 u=sina n=ansible | changed: [obs] => (item=monitoring)
2023-11-27 15:06:20,683 p=96579 u=sina n=ansible | changed: [obs] => (item=logging)
2023-11-27 15:06:20,693 p=96579 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-27 15:06:23,490 p=96579 u=sina n=ansible | changed: [obs] => (item=prometheus)
2023-11-27 15:06:26,242 p=96579 u=sina n=ansible | changed: [obs] => (item=alertmanager)
2023-11-27 15:06:29,115 p=96579 u=sina n=ansible | changed: [obs] => (item=blackbox)
2023-11-27 15:06:29,133 p=96579 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-27 15:06:31,985 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:06:32,000 p=96579 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-27 15:06:37,092 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:06:37,101 p=96579 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-27 15:06:41,497 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:06:41,506 p=96579 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-27 15:06:46,108 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:06:46,117 p=96579 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-27 15:06:50,632 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:06:50,643 p=96579 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-27 15:07:40,789 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:07:40,797 p=96579 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-27 15:07:47,145 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:07:47,154 p=96579 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-27 15:07:49,399 p=96579 u=sina n=ansible | changed: [obs] => (item=logging/promtail)
2023-11-27 15:07:51,549 p=96579 u=sina n=ansible | changed: [obs] => (item=logging/loki)
2023-11-27 15:07:53,691 p=96579 u=sina n=ansible | changed: [obs] => (item=traefik/traefik)
2023-11-27 15:07:53,702 p=96579 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-27 15:08:00,248 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:00,257 p=96579 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-27 15:08:04,927 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:04,936 p=96579 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-27 15:08:11,923 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:11,933 p=96579 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-27 15:08:16,430 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:16,439 p=96579 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-27 15:08:20,832 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:20,841 p=96579 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-27 15:08:25,241 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:25,251 p=96579 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-27 15:08:30,257 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:08:30,266 p=96579 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-27 15:08:37,345 p=96579 u=sina n=ansible | changed: [obs] => (item=metrics)
2023-11-27 15:08:44,599 p=96579 u=sina n=ansible | changed: [obs] => (item=grafana)
2023-11-27 15:08:51,356 p=96579 u=sina n=ansible | changed: [obs] => (item=alerts)
2023-11-27 15:08:58,090 p=96579 u=sina n=ansible | changed: [obs] => (item=pushgw)
2023-11-27 15:09:04,919 p=96579 u=sina n=ansible | changed: [obs] => (item=loki)
2023-11-27 15:09:13,340 p=96579 u=sina n=ansible | changed: [obs] => (item=web)
2023-11-27 15:09:13,350 p=96579 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-27 15:09:18,398 p=96579 u=sina n=ansible | changed: [obs] => (item=app_net)
2023-11-27 15:09:22,495 p=96579 u=sina n=ansible | changed: [obs] => (item=web_net)
2023-11-27 15:09:22,506 p=96579 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-27 15:09:43,700 p=96579 u=sina n=ansible | changed: [obs]
2023-11-27 15:09:43,709 p=96579 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-27 16:23:56,436 p=96579 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-27 16:24:26,220 p=100115 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-27 16:24:26,242 p=100115 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 16:24:33,570 p=100115 u=sina n=ansible | ok: [obs]
2023-11-27 16:24:33,601 p=100115 u=sina n=ansible | TASK [observability : create /opt/srevices dir] ********************************
2023-11-27 16:24:36,512 p=100115 u=sina n=ansible | changed: [obs] => (item=services)
2023-11-27 16:24:36,522 p=100115 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-27 16:24:38,972 p=100115 u=sina n=ansible | changed: [obs] => (item=traefik)
2023-11-27 16:24:41,318 p=100115 u=sina n=ansible | changed: [obs] => (item=monitoring)
2023-11-27 16:24:43,575 p=100115 u=sina n=ansible | changed: [obs] => (item=logging)
2023-11-27 16:24:43,592 p=100115 u=sina n=ansible | TASK [observability : create files] ********************************************
2023-11-27 16:24:45,826 p=100115 u=sina n=ansible | changed: [obs] => (item=prometheus)
2023-11-27 16:24:48,285 p=100115 u=sina n=ansible | changed: [obs] => (item=alertmanager)
2023-11-27 16:24:50,635 p=100115 u=sina n=ansible | changed: [obs] => (item=blackbox)
2023-11-27 16:24:50,646 p=100115 u=sina n=ansible | TASK [observability : create prometheus/alertmanager] **************************
2023-11-27 16:24:52,992 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:24:53,003 p=100115 u=sina n=ansible | TASK [observability : copy monitoring compose file to host] ********************
2023-11-27 16:24:59,664 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:24:59,677 p=100115 u=sina n=ansible | TASK [observability : copy traefik compose file to host] ***********************
2023-11-27 16:25:04,168 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:25:04,177 p=100115 u=sina n=ansible | TASK [observability : copy logging compose file to host] ***********************
2023-11-27 16:25:08,750 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:25:08,760 p=100115 u=sina n=ansible | TASK [observability : copy prometheus.yml] *************************************
2023-11-27 16:25:13,368 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:25:13,378 p=100115 u=sina n=ansible | TASK [observability : grafana-dashboard config] ********************************
2023-11-27 16:26:04,665 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:04,674 p=100115 u=sina n=ansible | TASK [observability : copy alertmanager config] ********************************
2023-11-27 16:26:09,186 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:09,195 p=100115 u=sina n=ansible | TASK [observability : create sub dir] ******************************************
2023-11-27 16:26:11,434 p=100115 u=sina n=ansible | changed: [obs] => (item=logging/promtail)
2023-11-27 16:26:13,683 p=100115 u=sina n=ansible | changed: [obs] => (item=logging/loki)
2023-11-27 16:26:15,931 p=100115 u=sina n=ansible | changed: [obs] => (item=traefik/traefik)
2023-11-27 16:26:15,942 p=100115 u=sina n=ansible | TASK [observability : loki local config] ***************************************
2023-11-27 16:26:22,495 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:22,505 p=100115 u=sina n=ansible | TASK [observability : copy traefik conf] ***************************************
2023-11-27 16:26:27,185 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:27,195 p=100115 u=sina n=ansible | TASK [observability : promtail config] *****************************************
2023-11-27 16:26:33,653 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:33,663 p=100115 u=sina n=ansible | TASK [observability : blackbox exporter config] ********************************
2023-11-27 16:26:38,162 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:38,172 p=100115 u=sina n=ansible | TASK [observability : copy traefik .env] ***************************************
2023-11-27 16:26:42,669 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:42,678 p=100115 u=sina n=ansible | TASK [observability : copy logging .env] ***************************************
2023-11-27 16:26:47,174 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:47,184 p=100115 u=sina n=ansible | TASK [observability : copy monitoring .env] ************************************
2023-11-27 16:26:51,783 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:26:51,792 p=100115 u=sina n=ansible | TASK [observability : Create a sub.observability.archidev.ir A record to point to host] ***
2023-11-27 16:26:58,261 p=100115 u=sina n=ansible | ok: [obs] => (item=metrics)
2023-11-27 16:27:04,082 p=100115 u=sina n=ansible | ok: [obs] => (item=grafana)
2023-11-27 16:27:09,979 p=100115 u=sina n=ansible | ok: [obs] => (item=alerts)
2023-11-27 16:27:15,856 p=100115 u=sina n=ansible | ok: [obs] => (item=pushgw)
2023-11-27 16:27:21,708 p=100115 u=sina n=ansible | ok: [obs] => (item=loki)
2023-11-27 16:27:27,423 p=100115 u=sina n=ansible | ok: [obs] => (item=web)
2023-11-27 16:27:27,436 p=100115 u=sina n=ansible | TASK [observability : create network] ******************************************
2023-11-27 16:27:30,894 p=100115 u=sina n=ansible | ok: [obs] => (item=app_net)
2023-11-27 16:27:34,189 p=100115 u=sina n=ansible | ok: [obs] => (item=web_net)
2023-11-27 16:27:34,200 p=100115 u=sina n=ansible | TASK [observability : deploy traefik Compose stack] ****************************
2023-11-27 16:27:37,170 p=100115 u=sina n=ansible | ok: [obs]
2023-11-27 16:27:37,179 p=100115 u=sina n=ansible | TASK [observability : deploy monitoring Compose stack] *************************
2023-11-27 16:27:43,946 p=100115 u=sina n=ansible | changed: [obs]
2023-11-27 16:27:43,956 p=100115 u=sina n=ansible | TASK [observability : deploy logging Compose stack] ****************************
2023-11-27 16:49:06,870 p=100115 u=sina n=ansible |  [ERROR]: User interrupted execution

2023-11-27 16:50:00,297 p=101721 u=sina n=ansible | PLAY [deploy observability stack] **********************************************
2023-11-27 16:50:00,350 p=101721 u=sina n=ansible | TASK [Gathering Facts] *********************************************************
2023-11-27 16:52:54,821 p=101721 u=sina n=ansible |  [ERROR]: User interrupted execution

